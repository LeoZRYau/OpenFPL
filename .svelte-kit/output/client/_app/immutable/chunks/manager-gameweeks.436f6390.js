import{s as Y,e as H,i as T,d as v,z as Z,o as ee,F as te,f as w,a as E,g as k,h as b,I as ae,c as V,j as y,x as p,D as re,y as se,l as L,m as N,C as le,n as q}from"./scheduler.2037d42e.js";import{S as ne,i as ie,g as $,t as I,c as J,a as x,b as K,d as Q,m as R,e as W}from"./index.cd713282.js";import{s as A,a as oe,e as F}from"./Layout.b983af79.js";import{p as ce}from"./stores.2a5d2c72.js";import{m as fe}from"./manager-store.5e9e5c1f.js";import{V as ue}from"./ViewDetailsIcon.e0242b25.js";import{L as me}from"./LoadingIcon.64dacd79.js";function O(o,t,a){const s=o.slice();return s[11]=t[a],s}function de(o){let t,a,s,f='<div class="w-1/4 px-4">Gameweek</div> <div class="w-1/4 px-4">Points</div> <div class="w-1/4 px-4">Â </div>',_,i,c=F(o[2].gameweeks),e=[];for(let r=0;r<c.length;r+=1)e[r]=U(O(o,c,r));const d=r=>I(e[r],1,1,()=>{e[r]=null});return{c(){t=w("div"),a=w("div"),s=w("div"),s.innerHTML=f,_=E();for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=k(r,"DIV",{class:!0});var n=b(t);a=k(n,"DIV",{class:!0});var l=b(a);s=k(l,"DIV",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-1u9zia4"&&(s.innerHTML=f),_=V(l);for(let m=0;m<e.length;m+=1)e[m].l(l);l.forEach(v),n.forEach(v),this.h()},h(){y(s,"class","flex justify-between p-2 border border-gray-700 py-4 bg-light-gray"),y(a,"class","overflow-x-auto flex-1"),y(t,"class","flex flex-col space-y-4 text-lg mt-4")},m(r,n){T(r,t,n),p(t,a),p(a,s),p(a,_);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,null);i=!0},p(r,n){if(n&5){c=F(r[2].gameweeks);let l;for(l=0;l<c.length;l+=1){const m=O(r,c,l);e[l]?(e[l].p(m,n),x(e[l],1)):(e[l]=U(m),e[l].c(),x(e[l],1),e[l].m(a,null))}for($(),l=c.length;l<e.length;l+=1)d(l);J()}},i(r){if(!i){for(let n=0;n<c.length;n+=1)x(e[n]);i=!0}},o(r){e=e.filter(Boolean);for(let n=0;n<e.length;n+=1)I(e[n]);i=!1},d(r){r&&v(t),re(e,r)}}}function _e(o){let t,a;return t=new me({}),{c(){K(t.$$.fragment)},l(s){Q(t.$$.fragment,s)},m(s,f){R(t,s,f),a=!0},p:se,i(s){a||(x(t.$$.fragment,s),a=!0)},o(s){I(t.$$.fragment,s),a=!1},d(s){W(t,s)}}}function U(o){let t,a,s=o[11].gameweek+"",f,_,i,c=o[11].points+"",e,d,r,n,l,m,u,S,D,G,j;m=new ue({props:{className:"w-6 mr-2"}});function X(){return o[5](o[11])}return{c(){t=w("div"),a=w("div"),f=L(s),_=E(),i=w("div"),e=L(c),d=E(),r=w("div"),n=w("button"),l=w("span"),K(m.$$.fragment),u=L("View Details"),S=E(),this.h()},l(h){t=k(h,"DIV",{class:!0});var g=b(t);a=k(g,"DIV",{class:!0});var C=b(a);f=N(C,s),C.forEach(v),_=V(g),i=k(g,"DIV",{class:!0});var P=b(i);e=N(P,c),P.forEach(v),d=V(g),r=k(g,"DIV",{class:!0});var z=b(r);n=k(z,"BUTTON",{});var B=b(n);l=k(B,"SPAN",{class:!0});var M=b(l);Q(m.$$.fragment,M),u=N(M,"View Details"),M.forEach(v),B.forEach(v),z.forEach(v),S=V(g),g.forEach(v),this.h()},h(){y(a,"class","w-1/4 px-4"),y(i,"class","w-1/4 px-4"),y(l,"class","flex items-center"),y(r,"class","w-1/4 px-4 flex items-center"),y(t,"class","flex items-center justify-between p-2 py-4 border-b border-gray-700 cursor-pointer")},m(h,g){T(h,t,g),p(t,a),p(a,f),p(t,_),p(t,i),p(i,e),p(t,d),p(t,r),p(r,n),p(n,l),R(m,l,null),p(l,u),p(t,S),D=!0,G||(j=le(n,"click",X),G=!0)},p(h,g){o=h,(!D||g&4)&&s!==(s=o[11].gameweek+"")&&q(f,s),(!D||g&4)&&c!==(c=o[11].points+"")&&q(e,c)},i(h){D||(x(m.$$.fragment,h),D=!0)},o(h){I(m.$$.fragment,h),D=!1},d(h){h&&v(t),W(m),G=!1,j()}}}function pe(o){let t,a,s,f;const _=[_e,de],i=[];function c(e,d){return e[1]?0:1}return t=c(o),a=i[t]=_[t](o),{c(){a.c(),s=H()},l(e){a.l(e),s=H()},m(e,d){i[t].m(e,d),T(e,s,d),f=!0},p(e,[d]){let r=t;t=c(e),t===r?i[t].p(e,d):($(),I(i[r],1,1,()=>{i[r]=null}),J(),a=i[t],a?a.p(e,d):(a=i[t]=_[t](e),a.c()),x(a,1),a.m(s.parentNode,s))},i(e){f||(x(a),f=!0)},o(e){I(a),f=!1},d(e){e&&v(s),i[t].d(e)}}}function ge(o,t,a){let s,f;Z(o,ce,u=>a(4,f=u));let _,i=!0,{principalId:c=""}=t,{viewGameweekDetail:e}=t,d,r=1,n=null,l;ee(async()=>{try{await A.sync(),l=A.subscribe(u=>{_=u}),r=_?.activeGameweek??r,n=_?.activeSeason??n,a(2,d=await fe.getManager(s??"",n?.id??1,r))}catch(u){oe({msg:{text:"Error fetching manager gameweeks."},err:u}),console.error("Error fetching manager gameweeks:",u)}finally{a(1,i=!1)}}),te(()=>{l?.()});const m=u=>e(u.principalId,u.gameweek);return o.$$set=u=>{"principalId"in u&&a(3,c=u.principalId),"viewGameweekDetail"in u&&a(0,e=u.viewGameweekDetail)},o.$$.update=()=>{o.$$.dirty&24&&(s=f.url.searchParams.get("id")??c)},[e,i,d,c,f,m]}class De extends ne{constructor(t){super(),ie(this,t,ge,pe,Y,{principalId:3,viewGameweekDetail:0})}}export{De as M};
