var _=Object.defineProperty;var I=(s,a,e)=>a in s?_(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var i=(s,a,e)=>(I(s,typeof a!="symbol"?a+"":a,e),e);import{a as S}from"./Layout.9d799e1b.js";import{A as m,i as t}from"./LoadingIcon.c6bc274d.js";import{S as c}from"./BadgeIcon.1a82ba04.js";class b{constructor(){i(this,"actor");this.actor=m.createActor(t,"bkyz2-fmaaa-aaaaa-qaaaq-cai")}async actorFromIdentity(){let a;return new Promise((e,n)=>{a=S.subscribe(o=>{o.identity&&e(o.identity)})}).then(e=>(a(),m.createActor(t,"bkyz2-fmaaa-aaaaa-qaaaq-cai",e)))}async getManager(a){try{let e=new c;await e.updateSystemStateData();let n=await e.getSystemState();return await this.actor.getManager(a,n?.activeSeason.id,n?.activeGameweek)}catch(e){throw console.error("Error fetching fantasy team for gameweek:",e),e}}async getTotalManagers(){try{const a=await this.actor.getTotalManagers();return Number(a)}catch(a){throw console.error("Error fetching total managers:",a),a}}async getFantasyTeamForGameweek(a,e){try{let n=new c;await n.updateSystemStateData();let o=await n.getSystemState();return await this.actor.getFantasyTeamForGameweek(a,o?.activeSeason.id,e)}catch(n){throw console.error("Error fetching fantasy team for gameweek:",n),n}}async getFantasyTeam(){try{return await(await this.actorFromIdentity()).getFantasyTeam()}catch(a){throw console.error("Error fetching fantasy team:",a),a}}async saveFantasyTeam(a,e){try{let n=this.getBonusPlayed(a,e),o=this.getBonusPlayerId(a,e),r=this.getBonusTeamId(a,e);return await(await this.actorFromIdentity()).saveFantasyTeam(a.playerIds,a.captainId,n,o,r)}catch(n){throw console.error("Error saving fantasy team:",n),n}}getBonusPlayed(a,e){let n=0;return a.goalGetterGameweek==e&&(n=1),a.passMasterGameweek==e&&(n=2),a.noEntryGameweek==e&&(n=3),a.teamBoostGameweek==e&&(n=4),a.safeHandsGameweek==e&&(n=5),a.captainFantasticGameweek==e&&(n=6),a.hatTrickHeroGameweek==e&&(n=7),a.hatTrickHeroGameweek==e&&(n=8),n}getBonusPlayerId(a,e){let n=0;return a.goalGetterGameweek==e&&(n=a.goalGetterPlayerId),a.passMasterGameweek==e&&(n=a.passMasterPlayerId),a.noEntryGameweek==e&&(n=a.noEntryPlayerId),a.safeHandsGameweek==e&&(n=a.safeHandsPlayerId),a.captainFantasticGameweek==e&&(n=a.captainId),n}getBonusTeamId(a,e){let n=0;return a.teamBoostGameweek==e&&(n=a.teamBoostTeamId),n}}export{b as M};
