import{S as Ka,i as Ha,s as Ba,a0 as ne,a1 as te,m as d,h as l,n as r,U as ja,p as Ra,b as ma,G as n,L as Y,H as ga,e as qa,k as m,q as k,a as C,l as _,r as j,c as P,V as de,Q as ae,a6 as De,R as be,N as se,T as ge,o as re,O as ve,J as Te,K as pe,M as he,u as Ja,P as Ae,v as ie,d as la,f as le,g as na,I as oe,w as Ce,y as Oa,z as ya,$ as ka,A as La,B as wa}from"../chunks/index.c7b38e5e.js";import{r as Pe}from"../chunks/index.d7eb2526.js";import{l as Ma,L as Re,a as Oe,i as ye}from"../chunks/Layout.4ea1ffce.js";import{M as Le}from"../chunks/manager-gameweeks.a1356f41.js";import{a as Qa,t as va}from"../chunks/toast-store.d43f66ba.js";import{w as $a}from"../chunks/index.8caf67b2.js";import{A as Za,t as ee}from"../chunks/team-store.e2695fd5.js";import{s as fe}from"../chunks/system-store.2529fbb7.js";function we(){const{subscribe:t,set:a,update:e}=$a(null);async function s(c){try{return await(await Za.createIdentityActor(Qa,"bkyz2-fmaaa-aaaaa-qaaaq-cai")).updateDisplayName(c)}catch(o){throw console.error("Error updating username:",o),o}}async function i(c){try{return await(await Za.createIdentityActor(Qa,"bkyz2-fmaaa-aaaaa-qaaaq-cai")).updateFavouriteTeam(c)}catch(o){throw console.error("Error updating favourite team:",o),o}}async function p(){try{const o=await(await Za.createIdentityActor(Qa,"bkyz2-fmaaa-aaaaa-qaaaq-cai")).getProfileDTO();return a(o),o}catch(c){throw console.error("Error getting profile:",c),c}}async function u(c){try{if(c.size>1e3*1024)return null;const I=new FileReader;I.readAsArrayBuffer(c),I.onloadend=async()=>{const g=I.result,S=new Uint8Array(g);try{return await(await Za.createIdentityActor(Qa,"bkyz2-fmaaa-aaaaa-qaaaq-cai")).updateProfilePicture(S)}catch(D){console.error(D)}}}catch(o){throw console.error("Error updating username:",o),o}}return{subscribe:t,updateUsername:s,updateFavouriteTeam:i,getProfile:p,updateProfilePicture:u}}const Pa=we();function Fe(t){let a,e,s,i,p,u;return{c(){a=ne("svg"),e=ne("path"),s=ne("path"),this.h()},l(c){a=te(c,"svg",{xmlns:!0,"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,style:!0});var o=d(a);e=te(o,"path",{d:!0}),d(e).forEach(l),s=te(o,"path",{d:!0}),d(s).forEach(l),o.forEach(l),this.h()},h(){r(e,"d","M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"),r(s,"d","M3.5 2a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5h-9zM2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v10a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 12.5v-10zm9.5 3A1.5 1.5 0 0 1 13 7h1.5V3.5a1.5 1.5 0 0 0-1.5-1.5H9V4a1.5 1.5 0 0 1 1.5 1.5v1zm0 1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1z"),r(a,"xmlns","http://www.w3.org/2000/svg"),r(a,"aria-hidden","true"),r(a,"class",i=ja(t[0])+" svelte-1qbujws"),r(a,"fill","currentColor"),r(a,"viewBox","0 0 16 16"),Ra(a,"--hover-color",t[3]),Ra(a,"cursor","'pointer'")},m(c,o){ma(c,a,o),n(a,e),n(a,s),p||(u=Y(a,"click",t[4]),p=!0)},p(c,[o]){o&1&&i!==(i=ja(c[0])+" svelte-1qbujws")&&r(a,"class",i),o&8&&Ra(a,"--hover-color",c[3])},i:ga,o:ga,d(c){c&&l(a),p=!1,u()}}}function ke(t,a,e){let{className:s=""}=a,{principalId:i=""}=a,{onClick:p}=a,{hoverColor:u="red"}=a;const c=()=>p(i);return t.$$set=o=>{"className"in o&&e(0,s=o.className),"principalId"in o&&e(1,i=o.principalId),"onClick"in o&&e(2,p=o.onClick),"hoverColor"in o&&e(3,u=o.hoverColor)},[s,i,p,u,c]}class je extends Ka{constructor(a){super(),Ha(this,a,ke,Fe,Ba,{className:0,principalId:1,onClick:2,hoverColor:3})}}function ue(t){let a,e,s,i,p,u,c,o,I,g,S,D,b,E,N,T,R,M,W;return{c(){a=m("div"),e=m("div"),s=m("div"),i=m("h3"),p=k("Update Display Name"),u=C(),c=m("form"),o=m("div"),I=m("input"),g=C(),S=m("div"),D=m("button"),b=k("Cancel"),E=C(),N=m("button"),T=k("Use"),this.h()},l(x){a=_(x,"DIV",{class:!0});var U=d(a);e=_(U,"DIV",{class:!0});var L=d(e);s=_(L,"DIV",{class:!0});var F=d(s);i=_(F,"H3",{class:!0});var O=d(i);p=j(O,"Update Display Name"),O.forEach(l),u=P(F),c=_(F,"FORM",{});var y=d(c);o=_(y,"DIV",{class:!0});var q=d(o);I=_(q,"INPUT",{type:!0,class:!0,placeholder:!0}),q.forEach(l),g=P(y),S=_(y,"DIV",{class:!0});var G=d(S);D=_(G,"BUTTON",{class:!0});var K=d(D);b=j(K,"Cancel"),K.forEach(l),E=P(G),N=_(G,"BUTTON",{class:!0,type:!0});var f=d(N);T=j(f,"Use"),f.forEach(l),G.forEach(l),y.forEach(l),F.forEach(l),L.forEach(l),U.forEach(l),this.h()},h(){r(i,"class","text-lg leading-6 font-medium mb-2"),r(I,"type","text"),r(I,"class","w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black"),r(I,"placeholder","New Username"),r(o,"class","mt-4"),r(D,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),r(N,"class",R=ja(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),r(N,"type","submit"),N.disabled=t[3],r(S,"class","items-center py-3 flex space-x-4"),r(s,"class","mt-3 text-center"),r(e,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),r(a,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(x,U){ma(x,a,U),n(a,e),n(e,s),n(s,i),n(i,p),n(s,u),n(s,c),n(c,o),n(o,I),de(I,t[0]),n(c,g),n(c,S),n(S,D),n(D,b),n(S,E),n(S,N),n(N,T),M||(W=[Y(I,"input",t[9]),Y(D,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(c,"submit",De(t[4])),Y(e,"click",be(t[8])),Y(e,"keydown",t[5]),Y(a,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(a,"keydown",t[5])],M=!0)},p(x,U){t=x,U&1&&I.value!==t[0]&&de(I,t[0]),U&8&&R!==(R=ja(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&r(N,"class",R),U&8&&(N.disabled=t[3])},d(x){x&&l(a),M=!1,se(W)}}}function qe(t){let a,e=t[1]&&ue(t);return{c(){e&&e.c(),a=qa()},l(s){e&&e.l(s),a=qa()},m(s,i){e&&e.m(s,i),ma(s,a,i)},p(s,[i]){s[1]?e?e.p(s,i):(e=ue(s),e.c(),e.m(a.parentNode,a)):e&&(e.d(1),e=null)},i:ga,o:ga,d(s){e&&e.d(s),s&&l(a)}}}function Me(t){return t.length<3||t.length>20?!1:/^[a-zA-Z0-9 ]+$/.test(t)}function We(t,a,e){let s,{showModal:i}=a,{closeModal:p}=a,{cancelModal:u}=a,{newUsername:c=""}=a,{isLoading:o}=a;async function I(){o.set(!0),Ma.set("Updating Display Name");try{await Pa.updateUsername(c),await p(),va.show("Display name updated.","success")}catch(b){va.show("Error updating username.","error"),console.error("Error updating username:",b),u()}finally{o.set(!1),Ma.set("Loading")}}function g(b){!(b.target instanceof HTMLInputElement)&&b.key==="Escape"&&p()}function S(b){ge.call(this,t,b)}function D(){c=this.value,e(0,c)}return t.$$set=b=>{"showModal"in b&&e(1,i=b.showModal),"closeModal"in b&&e(6,p=b.closeModal),"cancelModal"in b&&e(2,u=b.cancelModal),"newUsername"in b&&e(0,c=b.newUsername),"isLoading"in b&&e(7,o=b.isLoading)},t.$$.update=()=>{t.$$.dirty&1&&e(3,s=!Me(c))},[c,i,u,s,I,g,p,o,S,D]}class xe extends Ka{constructor(a){super(),Ha(this,a,We,qe,Ba,{showModal:1,closeModal:6,cancelModal:2,newUsername:0,isLoading:7})}}function Ie(t,a,e){const s=t.slice();return s[12]=a[e],s}function Ne(t){let a,e,s,i,p,u,c,o,I,g,S,D,b,E,N,T,R,M,W,x,U,L,F,O,y,q,G,K=t[4],f=[];for(let v=0;v<K.length;v+=1)f[v]=Se(Ie(t,K,v));return{c(){a=m("div"),e=m("div"),s=m("div"),i=m("h3"),p=k("Update Favourite Team"),u=C(),c=m("div"),o=m("select"),I=m("option"),g=k("Select Team");for(let v=0;v<f.length;v+=1)f[v].c();S=C(),D=m("div"),b=m("p"),E=k("Warning"),N=C(),T=m("p"),R=k("You can only set your favourite team once per season."),M=C(),W=m("div"),x=m("button"),U=k("Cancel"),L=C(),F=m("button"),O=k("Use"),this.h()},l(v){a=_(v,"DIV",{class:!0});var z=d(a);e=_(z,"DIV",{class:!0});var A=d(e);s=_(A,"DIV",{class:!0});var X=d(s);i=_(X,"H3",{class:!0});var J=d(i);p=j(J,"Update Favourite Team"),J.forEach(l),u=P(X),c=_(X,"DIV",{class:!0});var ua=d(c);o=_(ua,"SELECT",{class:!0});var ea=d(o);I=_(ea,"OPTION",{});var $=d(I);g=j($,"Select Team"),$.forEach(l);for(let Q=0;Q<f.length;Q+=1)f[Q].l(ea);ea.forEach(l),ua.forEach(l),X.forEach(l),S=P(A),D=_(A,"DIV",{class:!0,role:!0});var aa=d(D);b=_(aa,"P",{class:!0});var ta=d(b);E=j(ta,"Warning"),ta.forEach(l),N=P(aa),T=_(aa,"P",{class:!0});var da=d(T);R=j(da,"You can only set your favourite team once per season."),da.forEach(l),aa.forEach(l),M=P(A),W=_(A,"DIV",{class:!0});var sa=d(W);x=_(sa,"BUTTON",{class:!0});var oa=d(x);U=j(oa,"Cancel"),oa.forEach(l),L=P(sa),F=_(sa,"BUTTON",{class:!0});var pa=d(F);O=j(pa,"Use"),pa.forEach(l),sa.forEach(l),A.forEach(l),z.forEach(l),this.h()},h(){r(i,"class","text-lg leading-6 font-medium mb-2"),I.__value=0,I.value=I.__value,r(o,"class","w-full p-2 rounded-md fpl-dropdown"),t[0]===void 0&&Te(()=>t[10].call(o)),r(c,"class","w-full border border-gray-500 mt-4 mb-2"),r(s,"class","mt-3 text-center"),r(b,"class","font-bold text-sm"),r(T,"class","font-bold text-xs"),r(D,"class","bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-1 mt-4"),r(D,"role","alert"),r(x,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),r(F,"class",y=ja(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),F.disabled=t[3],r(W,"class","items-center py-3 flex space-x-4"),r(e,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),r(a,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(v,z){ma(v,a,z),n(a,e),n(e,s),n(s,i),n(i,p),n(s,u),n(s,c),n(c,o),n(o,I),n(I,g);for(let A=0;A<f.length;A+=1)f[A]&&f[A].m(o,null);pe(o,t[0],!0),n(e,S),n(e,D),n(D,b),n(b,E),n(D,N),n(D,T),n(T,R),n(e,M),n(e,W),n(W,x),n(x,U),n(W,L),n(W,F),n(F,O),q||(G=[Y(o,"change",t[10]),Y(x,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(F,"click",t[5]),Y(e,"click",be(t[9])),Y(e,"keydown",t[6]),Y(a,"click",function(){ae(t[2])&&t[2].apply(this,arguments)}),Y(a,"keydown",t[6])],q=!0)},p(v,z){if(t=v,z&16){K=t[4];let A;for(A=0;A<K.length;A+=1){const X=Ie(t,K,A);f[A]?f[A].p(X,z):(f[A]=Se(X),f[A].c(),f[A].m(o,null))}for(;A<f.length;A+=1)f[A].d(1);f.length=K.length}z&17&&pe(o,t[0]),z&8&&y!==(y=ja(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&r(F,"class",y),z&8&&(F.disabled=t[3])},d(v){v&&l(a),he(f,v),q=!1,se(G)}}}function Se(t){let a,e=t[12].friendlyName+"",s,i;return{c(){a=m("option"),s=k(e),this.h()},l(p){a=_(p,"OPTION",{});var u=d(a);s=j(u,e),u.forEach(l),this.h()},h(){a.__value=i=t[12].id,a.value=a.__value},m(p,u){ma(p,a,u),n(a,s)},p(p,u){u&16&&e!==(e=p[12].friendlyName+"")&&Ja(s,e),u&16&&i!==(i=p[12].id)&&(a.__value=i,a.value=a.__value)},d(p){p&&l(a)}}}function Ve(t){let a,e=t[1]&&Ne(t);return{c(){e&&e.c(),a=qa()},l(s){e&&e.l(s),a=qa()},m(s,i){e&&e.m(s,i),ma(s,a,i)},p(s,[i]){s[1]?e?e.p(s,i):(e=Ne(s),e.c(),e.m(a.parentNode,a)):e&&(e.d(1),e=null)},i:ga,o:ga,d(s){e&&e.d(s),s&&l(a)}}}function ze(t,a,e){let{showModal:s}=a,{closeModal:i}=a,{cancelModal:p}=a,{newFavouriteTeam:u=0}=a,{isLoading:c}=a,o=!0,I,g;re(async()=>{await ee.sync(),g=ee.subscribe(N=>{e(4,I=N)})}),ve(()=>{g?.()});async function S(){c.set(!0),Ma.set("Updating Favourite Club");try{await Pa.updateFavouriteTeam(u),await i(),va.show("Favourite team updated.","success")}catch(N){va.show("Error updating favourite team.","error"),console.error("Error updating favourite team:",N),p()}finally{c.set(!1),Ma.set("Loading")}}function D(N){!(N.target instanceof HTMLInputElement)&&N.key==="Escape"&&i()}function b(N){ge.call(this,t,N)}function E(){u=Ae(this),e(0,u),e(4,I)}return t.$$set=N=>{"showModal"in N&&e(1,s=N.showModal),"closeModal"in N&&e(7,i=N.closeModal),"cancelModal"in N&&e(2,p=N.cancelModal),"newFavouriteTeam"in N&&e(0,u=N.newFavouriteTeam),"isLoading"in N&&e(8,c=N.isLoading)},t.$$.update=()=>{t.$$.dirty&1&&e(3,o=u<=0)},[u,s,p,o,I,S,D,i,c,b,E]}class Ue extends Ka{constructor(a){super(),Ha(this,a,ze,Ve,Ba,{showModal:1,closeModal:7,cancelModal:2,newFavouriteTeam:0,isLoading:8})}}function Ge(t){let a,e,s,i,p,u,c,o,I,g,S,D,b,E,N,T,R,M,W,x,U,L,F,O,y,q,G,K,f,v,z,A,X,J,ua,ea,$,aa,ta,da,sa,oa,pa,Q,Z,Ia,Na,ra,fa,ca,ia,Sa,Fa,H;a=new xe({props:{newUsername:t[6]?t[6].displayName:"",showModal:t[1],closeModal:t[12],cancelModal:t[13],isLoading:t[10]}}),s=new Ue({props:{newFavouriteTeam:t[6]?t[6].favouriteTeamId:0,showModal:t[2],closeModal:t[15],cancelModal:t[16],isLoading:t[10]}});let w=t[6]&&Ee(t);return{c(){Oa(a.$$.fragment),e=C(),Oa(s.$$.fragment),i=C(),p=m("div"),w&&w.c(),u=C(),c=m("div"),o=m("div"),I=m("div"),g=m("div"),S=m("div"),D=m("img"),E=C(),N=m("div"),T=m("p"),R=k("ICP"),M=C(),W=m("p"),x=k("0.00 ICP"),U=C(),L=m("div"),F=m("img"),y=C(),q=m("div"),G=m("p"),K=k("FPL"),f=C(),v=m("p"),z=k("0.00 FPL"),A=C(),X=m("div"),J=m("img"),ea=C(),$=m("div"),aa=m("p"),ta=k("ckBTC"),da=C(),sa=m("p"),oa=k("0.00 ckBTC"),pa=C(),Q=m("div"),Z=m("img"),Na=C(),ra=m("div"),fa=m("p"),ca=k("ckETH"),ia=C(),Sa=m("p"),Fa=k("0.00 ckETH"),this.h()},l(h){ya(a.$$.fragment,h),e=P(h),ya(s.$$.fragment,h),i=P(h),p=_(h,"DIV",{class:!0});var B=d(p);w&&w.l(B),u=P(B),c=_(B,"DIV",{class:!0});var _a=d(c);o=_(_a,"DIV",{class:!0});var Ea=d(o);I=_(Ea,"DIV",{class:!0});var Wa=d(I);g=_(Wa,"DIV",{class:!0});var V=d(g);S=_(V,"DIV",{class:!0});var Da=d(S);D=_(Da,"IMG",{src:!0,alt:!0,class:!0}),E=P(Da),N=_(Da,"DIV",{class:!0});var Ta=d(N);T=_(Ta,"P",{class:!0});var xa=d(T);R=j(xa,"ICP"),xa.forEach(l),M=P(Ta),W=_(Ta,"P",{});var Va=d(W);x=j(Va,"0.00 ICP"),Va.forEach(l),Ta.forEach(l),Da.forEach(l),U=P(V),L=_(V,"DIV",{class:!0});var ha=d(L);F=_(ha,"IMG",{src:!0,alt:!0,class:!0}),y=P(ha),q=_(ha,"DIV",{class:!0});var Aa=d(q);G=_(Aa,"P",{class:!0});var za=d(G);K=j(za,"FPL"),za.forEach(l),f=P(Aa),v=_(Aa,"P",{});var Ua=d(v);z=j(Ua,"0.00 FPL"),Ua.forEach(l),Aa.forEach(l),ha.forEach(l),A=P(V),X=_(V,"DIV",{class:!0});var Ca=d(X);J=_(Ca,"IMG",{src:!0,alt:!0,class:!0}),ea=P(Ca),$=_(Ca,"DIV",{class:!0});var ba=d($);aa=_(ba,"P",{class:!0});var Ga=d(aa);ta=j(Ga,"ckBTC"),Ga.forEach(l),da=P(ba),sa=_(ba,"P",{});var ce=d(sa);oa=j(ce,"0.00 ckBTC"),ce.forEach(l),ba.forEach(l),Ca.forEach(l),pa=P(V),Q=_(V,"DIV",{class:!0});var Ya=d(Q);Z=_(Ya,"IMG",{src:!0,alt:!0,class:!0}),Na=P(Ya),ra=_(Ya,"DIV",{class:!0});var Xa=d(ra);fa=_(Xa,"P",{class:!0});var me=d(fa);ca=j(me,"ckETH"),me.forEach(l),ia=P(Xa),Sa=_(Xa,"P",{});var _e=d(Sa);Fa=j(_e,"0.00 ckETH"),_e.forEach(l),Xa.forEach(l),Ya.forEach(l),V.forEach(l),Wa.forEach(l),Ea.forEach(l),_a.forEach(l),B.forEach(l),this.h()},h(){ka(D.src,b="ICPCoin.png")||r(D,"src",b),r(D,"alt","ICP"),r(D,"class","h-12 w-12"),r(T,"class","font-bold"),r(N,"class","ml-4"),r(S,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),ka(F.src,O="FPLCoin.png")||r(F,"src",O),r(F,"alt","FPL"),r(F,"class","h-12 w-12"),r(G,"class","font-bold"),r(q,"class","ml-4"),r(L,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),ka(J.src,ua="ckBTCCoin.png")||r(J,"src",ua),r(J,"alt","ICP"),r(J,"class","h-12 w-12"),r(aa,"class","font-bold"),r($,"class","ml-4"),r(X,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),ka(Z.src,Ia="ckETHCoin.png")||r(Z,"src",Ia),r(Z,"alt","ICP"),r(Z,"class","h-12 w-12"),r(fa,"class","font-bold"),r(ra,"class","ml-4"),r(Q,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),r(g,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),r(I,"class","mt-4 px-2"),r(o,"class","w-full px-2 mb-4"),r(c,"class","flex flex-wrap -mx-2 mt-4"),r(p,"class","container mx-auto p-4")},m(h,B){La(a,h,B),ma(h,e,B),La(s,h,B),ma(h,i,B),ma(h,p,B),w&&w.m(p,null),n(p,u),n(p,c),n(c,o),n(o,I),n(I,g),n(g,S),n(S,D),n(S,E),n(S,N),n(N,T),n(T,R),n(N,M),n(N,W),n(W,x),n(g,U),n(g,L),n(L,F),n(L,y),n(L,q),n(q,G),n(G,K),n(q,f),n(q,v),n(v,z),n(g,A),n(g,X),n(X,J),n(X,ea),n(X,$),n($,aa),n(aa,ta),n($,da),n($,sa),n(sa,oa),n(g,pa),n(g,Q),n(Q,Z),n(Q,Na),n(Q,ra),n(ra,fa),n(fa,ca),n(ra,ia),n(ra,Sa),n(Sa,Fa),H=!0},p(h,B){const _a={};B&64&&(_a.newUsername=h[6]?h[6].displayName:""),B&2&&(_a.showModal=h[1]),a.$set(_a);const Ea={};B&64&&(Ea.newFavouriteTeam=h[6]?h[6].favouriteTeamId:0),B&4&&(Ea.showModal=h[2]),s.$set(Ea),h[6]?w?(w.p(h,B),B&64&&na(w,1)):(w=Ee(h),w.c(),na(w,1),w.m(p,u)):w&&(ie(),la(w,1,1,()=>{w=null}),le())},i(h){H||(na(a.$$.fragment,h),na(s.$$.fragment,h),na(w),H=!0)},o(h){la(a.$$.fragment,h),la(s.$$.fragment,h),la(w),H=!1},d(h){wa(a,h),h&&l(e),wa(s,h),h&&l(i),h&&l(p),w&&w.d()}}}function Ke(t){let a,e;return a=new Re({}),{c(){Oa(a.$$.fragment)},l(s){ya(a.$$.fragment,s)},m(s,i){La(a,s,i),e=!0},p:ga,i(s){e||(na(a.$$.fragment,s),e=!0)},o(s){la(a.$$.fragment,s),e=!1},d(s){wa(a,s)}}}function Ee(t){let a,e,s,i,p,u,c,o,I,g,S,D,b,E,N,T,R,M,W=t[6]?.displayName+"",x,U,L,F,O,y,q,G,K,f=t[0].find(t[21])?.friendlyName+"",v,z,A,X,J,ua,ea,$,aa,ta,da,sa,oa,pa,Q,Z,Ia,Na=t[6]?.principalName+"",ra,fa,ca,ia,Sa,Fa;return ca=new je({props:{onClick:t[17],principalId:t[6]?.principalName,className:"ml-2 w-4 h-4"}}),{c(){a=m("div"),e=m("div"),s=m("div"),i=m("img"),u=C(),c=m("div"),o=m("button"),I=k("Upload Photo"),g=C(),S=m("input"),D=C(),b=m("div"),E=m("div"),N=m("p"),T=k("Display Name:"),R=C(),M=m("h2"),x=k(W),U=C(),L=m("button"),F=k("Update"),O=C(),y=m("p"),q=k("Favourite Team:"),G=C(),K=m("h2"),v=k(f),z=C(),A=m("button"),X=k("Update"),ua=C(),ea=m("p"),$=k("Joined:"),aa=C(),ta=m("h2"),da=k("August 2023"),sa=C(),oa=m("p"),pa=k("Principal:"),Q=C(),Z=m("div"),Ia=m("h2"),ra=k(Na),fa=C(),Oa(ca.$$.fragment),this.h()},l(H){a=_(H,"DIV",{class:!0});var w=d(a);e=_(w,"DIV",{class:!0});var h=d(e);s=_(h,"DIV",{class:!0});var B=d(s);i=_(B,"IMG",{src:!0,alt:!0,class:!0}),u=P(B),c=_(B,"DIV",{class:!0});var _a=d(c);o=_(_a,"BUTTON",{class:!0});var Ea=d(o);I=j(Ea,"Upload Photo"),Ea.forEach(l),g=P(_a),S=_(_a,"INPUT",{type:!0,id:!0,accept:!0,style:!0,class:!0}),_a.forEach(l),B.forEach(l),h.forEach(l),D=P(w),b=_(w,"DIV",{class:!0});var Wa=d(b);E=_(Wa,"DIV",{class:!0});var V=d(E);N=_(V,"P",{class:!0});var Da=d(N);T=j(Da,"Display Name:"),Da.forEach(l),R=P(V),M=_(V,"H2",{class:!0});var Ta=d(M);x=j(Ta,W),Ta.forEach(l),U=P(V),L=_(V,"BUTTON",{class:!0});var xa=d(L);F=j(xa,"Update"),xa.forEach(l),O=P(V),y=_(V,"P",{class:!0});var Va=d(y);q=j(Va,"Favourite Team:"),Va.forEach(l),G=P(V),K=_(V,"H2",{class:!0});var ha=d(K);v=j(ha,f),ha.forEach(l),z=P(V),A=_(V,"BUTTON",{class:!0});var Aa=d(A);X=j(Aa,"Update"),Aa.forEach(l),ua=P(V),ea=_(V,"P",{class:!0});var za=d(ea);$=j(za,"Joined:"),za.forEach(l),aa=P(V),ta=_(V,"H2",{class:!0});var Ua=d(ta);da=j(Ua,"August 2023"),Ua.forEach(l),sa=P(V),oa=_(V,"P",{class:!0});var Ca=d(oa);pa=j(Ca,"Principal:"),Ca.forEach(l),Q=P(V),Z=_(V,"DIV",{class:!0});var ba=d(Z);Ia=_(ba,"H2",{class:!0});var Ga=d(Ia);ra=j(Ga,Na),Ga.forEach(l),fa=P(ba),ya(ca.$$.fragment,ba),ba.forEach(l),V.forEach(l),Wa.forEach(l),w.forEach(l),this.h()},h(){ka(i.src,p=t[7])||r(i,"src",p),r(i,"alt","Profile"),r(i,"class","w-48 md:w-80 mb-1 rounded-lg"),r(o,"class","btn-file-upload fpl-button svelte-e6um5o"),r(S,"type","file"),r(S,"id","profile-image"),r(S,"accept","image/*"),Ra(S,"opacity","0"),Ra(S,"position","absolute"),Ra(S,"left","0"),Ra(S,"top","0"),r(S,"class","svelte-e6um5o"),r(c,"class","file-upload-wrapper mt-4 svelte-e6um5o"),r(s,"class","group"),r(e,"class","w-full md:w-auto px-2 ml-4 md:ml-0"),r(N,"class","text-xs mb-2"),r(M,"class","text-2xl font-bold mb-2"),r(L,"class","p-2 px-4 rounded fpl-button"),r(y,"class","text-xs mb-2 mt-4"),r(K,"class","text-2xl font-bold mb-2"),r(A,"class","p-2 px-4 rounded fpl-button"),A.disabled=J=t[4]>1&&(t[6]?.favouriteTeamId??0)>0,r(ea,"class","text-xs mb-2 mt-4"),r(ta,"class","text-2xl font-bold mb-2"),r(oa,"class","text-xs mb-2 mt-4"),r(Ia,"class","text-xs font-bold"),r(Z,"class","flex items-center"),r(E,"class","ml-4 p-4 rounded-lg"),r(b,"class","w-full md:w-3/4 px-2 mb-4"),r(a,"class","flex flex-wrap")},m(H,w){ma(H,a,w),n(a,e),n(e,s),n(s,i),n(s,u),n(s,c),n(c,o),n(o,I),n(c,g),n(c,S),t[20](S),n(a,D),n(a,b),n(b,E),n(E,N),n(N,T),n(E,R),n(E,M),n(M,x),n(E,U),n(E,L),n(L,F),n(E,O),n(E,y),n(y,q),n(E,G),n(E,K),n(K,v),n(E,z),n(E,A),n(A,X),n(E,ua),n(E,ea),n(ea,$),n(E,aa),n(E,ta),n(ta,da),n(E,sa),n(E,oa),n(oa,pa),n(E,Q),n(E,Z),n(Z,Ia),n(Ia,ra),n(Z,fa),La(ca,Z,null),ia=!0,Sa||(Fa=[Y(o,"click",t[18]),Y(S,"change",t[19]),Y(L,"click",t[11]),Y(A,"click",t[14])],Sa=!0)},p(H,w){(!ia||w&128&&!ka(i.src,p=H[7]))&&r(i,"src",p),(!ia||w&64)&&W!==(W=H[6]?.displayName+"")&&Ja(x,W),(!ia||w&65)&&f!==(f=H[0].find(H[21])?.friendlyName+"")&&Ja(v,f),(!ia||w&80&&J!==(J=H[4]>1&&(H[6]?.favouriteTeamId??0)>0))&&(A.disabled=J),(!ia||w&64)&&Na!==(Na=H[6]?.principalName+"")&&Ja(ra,Na);const h={};w&64&&(h.principalId=H[6]?.principalName),ca.$set(h)},i(H){ia||(na(ca.$$.fragment,H),ia=!0)},o(H){la(ca.$$.fragment,H),ia=!1},d(H){H&&l(a),t[20](null),wa(ca),Sa=!1,se(Fa)}}}function He(t){let a,e,s,i;const p=[Ke,Ge],u=[];function c(o,I){return o[5]?0:1}return a=c(t),e=u[a]=p[a](t),{c(){e.c(),s=qa()},l(o){e.l(o),s=qa()},m(o,I){u[a].m(o,I),ma(o,s,I),i=!0},p(o,[I]){let g=a;a=c(o),a===g?u[a].p(o,I):(ie(),la(u[g],1,1,()=>{u[g]=null}),le(),e=u[a],e?e.p(o,I):(e=u[a]=p[a](o),e.c()),na(e,1),e.m(s.parentNode,s))},i(o){i||(na(e),i=!0)},o(o){la(e),i=!1},d(o){u[a].d(o),o&&l(s)}}}function Be(t,a,e){let s,i,p,u,c,o=$a(null);oe(t,o,f=>e(6,i=f));let I=$a("profile_placeholder.png");oe(t,I,f=>e(7,p=f));let g=!1,S=!1,D,b=1,E=$a(!1);oe(t,E,f=>e(5,s=f));let N,T;re(async()=>{E.set(!0);try{await ee.sync(),await fe.sync(),N=ee.subscribe(v=>{e(0,u=v)}),T=fe.subscribe(v=>{c=v});const f=await Pa.getProfile();if(o.set(f),f&&f.profilePicture.length>0){const v=new Blob([new Uint8Array(f.profilePicture)]);I.set(URL.createObjectURL(v))}e(4,b=c?.activeGameweek??1)}catch(f){va.show("Error fetching profile detail.","error"),console.error("Error fetching profile detail:",f)}finally{E.set(!1)}}),ve(()=>{N?.(),T?.()});function R(){e(1,g=!0)}async function M(){const f=await Pa.getProfile();o.set(f),e(1,g=!1)}function W(){e(1,g=!1)}function x(){e(2,S=!0)}async function U(){const f=await Pa.getProfile();o.set(f),e(2,S=!1)}function L(){e(2,S=!1)}function F(f){navigator.clipboard.writeText(f).then(()=>{va.show("Copied!","success")})}function O(){D.click()}function y(f){const v=f.target;if(v.files&&v.files[0]){const z=v.files[0];if(z.size>1e3*1024){alert("File size exceeds 1000KB");return}q(z)}}async function q(f){E.set(!0),Ma.set("Updating Profile Picture");try{await Pa.updateProfilePicture(f);const v=await Pa.getProfile();if(o.set(v),v&&v.profilePicture.length>0){const z=new Blob([new Uint8Array(v.profilePicture)]);I.set(URL.createObjectURL(z))}va.show("Profile image updated.","success")}catch(v){va.show("Error updating profile image","error"),console.error("Error updating profile image",v)}finally{E.set(!1),Ma.set("Loading")}}function G(f){Ce[f?"unshift":"push"](()=>{D=f,e(3,D)})}return[u,g,S,D,b,s,i,p,o,I,E,R,M,W,x,U,L,F,O,y,G,f=>f.id===i?.favouriteTeamId]}class Ye extends Ka{constructor(a){super(),Ha(this,a,Be,He,Ba,{})}}function Xe(t){let a,e;return a=new Le({props:{viewGameweekDetail:t[2]}}),{c(){Oa(a.$$.fragment)},l(s){ya(a.$$.fragment,s)},m(s,i){La(a,s,i),e=!0},p:ga,i(s){e||(na(a.$$.fragment,s),e=!0)},o(s){la(a.$$.fragment,s),e=!1},d(s){wa(a,s)}}}function Qe(t){let a,e;return a=new Ye({}),{c(){Oa(a.$$.fragment)},l(s){ya(a.$$.fragment,s)},m(s,i){La(a,s,i),e=!0},p:ga,i(s){e||(na(a.$$.fragment,s),e=!0)},o(s){la(a.$$.fragment,s),e=!1},d(s){wa(a,s)}}}function Ze(t){let a,e,s,i,p,u,c,o,I,g,S,D,b,E,N,T,R,M,W,x;const U=[Qe,Xe],L=[];function F(O,y){return O[0]==="details"?0:O[0]==="gameweeks"?1:-1}return~(T=F(t))&&(R=L[T]=U[T](t)),{c(){a=m("div"),e=m("div"),s=m("ul"),i=m("li"),p=m("button"),u=k("Details"),I=C(),g=m("li"),S=m("button"),D=k("Gameweeks"),N=C(),R&&R.c(),this.h()},l(O){a=_(O,"DIV",{class:!0});var y=d(a);e=_(y,"DIV",{class:!0});var q=d(e);s=_(q,"UL",{class:!0});var G=d(s);i=_(G,"LI",{class:!0});var K=d(i);p=_(K,"BUTTON",{class:!0});var f=d(p);u=j(f,"Details"),f.forEach(l),K.forEach(l),I=P(G),g=_(G,"LI",{class:!0});var v=d(g);S=_(v,"BUTTON",{class:!0});var z=d(S);D=j(z,"Gameweeks"),z.forEach(l),v.forEach(l),G.forEach(l),N=P(q),R&&R.l(q),q.forEach(l),y.forEach(l),this.h()},h(){r(p,"class",c=`p-2 ${t[0]==="details"?"text-white":"text-gray-400"}`),r(i,"class",o=`mr-4 text-xs md:text-lg ${t[0]==="details"?"active-tab":""}`),r(S,"class",b=`p-2 ${t[0]==="gameweeks"?"text-white":"text-gray-400"}`),r(g,"class",E=`mr-4 text-xs md:text-lg ${t[0]==="gameweeks"?"active-tab":""}`),r(s,"class","flex rounded-lg bg-light-gray px-4 pt-2"),r(e,"class","bg-panel rounded-lg m-4"),r(a,"class","m-4")},m(O,y){ma(O,a,y),n(a,e),n(e,s),n(s,i),n(i,p),n(p,u),n(s,I),n(s,g),n(g,S),n(S,D),n(e,N),~T&&L[T].m(e,null),M=!0,W||(x=[Y(p,"click",t[3]),Y(S,"click",t[4])],W=!0)},p(O,y){(!M||y&1&&c!==(c=`p-2 ${O[0]==="details"?"text-white":"text-gray-400"}`))&&r(p,"class",c),(!M||y&1&&o!==(o=`mr-4 text-xs md:text-lg ${O[0]==="details"?"active-tab":""}`))&&r(i,"class",o),(!M||y&1&&b!==(b=`p-2 ${O[0]==="gameweeks"?"text-white":"text-gray-400"}`))&&r(S,"class",b),(!M||y&1&&E!==(E=`mr-4 text-xs md:text-lg ${O[0]==="gameweeks"?"active-tab":""}`))&&r(g,"class",E);let q=T;T=F(O),T===q?~T&&L[T].p(O,y):(R&&(ie(),la(L[q],1,1,()=>{L[q]=null}),le()),~T?(R=L[T],R?R.p(O,y):(R=L[T]=U[T](O),R.c()),na(R,1),R.m(e,null)):R=null)},i(O){M||(na(R),M=!0)},o(O){la(R),M=!1},d(O){O&&l(a),~T&&L[T].d(),W=!1,se(x)}}}function Je(t){let a,e;return a=new Oe({props:{$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){Oa(a.$$.fragment)},l(s){ya(a.$$.fragment,s)},m(s,i){La(a,s,i),e=!0},p(s,[i]){const p={};i&33&&(p.$$scope={dirty:i,ctx:s}),a.$set(p)},i(s){e||(na(a.$$.fragment,s),e=!0)},o(s){la(a.$$.fragment,s),e=!1},d(s){wa(a,s)}}}function $e(t,a,e){let s="details";re(async()=>{ye.set(!1)});function i(o){e(0,s=o)}function p(o,I){throw Pe(307,`/manager?id=${o}&gw=${I}`)}return[s,i,p,()=>i("details"),()=>i("gameweeks")]}class ls extends Ka{constructor(a){super(),Ha(this,a,$e,Je,Ba,{})}}export{ls as component};
