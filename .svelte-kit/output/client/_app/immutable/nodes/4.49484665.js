import{S as Me,i as qe,s as Ke,k as _,q as G,a as F,l as v,m as p,r as P,h as u,c as j,n as m,J as Qe,b as se,G as r,K as Se,L as ae,g as q,v as pe,f as ge,d as W,M as ve,N as ze,o as Je,O as Re,H as We,u as Z,P as Xe,y as ce,z as de,A as me,B as he}from"../chunks/index.245a0e92.js";import{a as Ye,i as Ze}from"../chunks/Layout.1bcae1a2.js";import{t as Ve}from"../chunks/team-store.f070e8c0.js";import{f as Ne}from"../chunks/fixture-store.89aff47d.js";import{s as He}from"../chunks/system-store.53911b2c.js";import{t as et,f as Ae}from"../chunks/Helpers.c6feb0fc.js";import{B as Oe}from"../chunks/BadgeIcon.aeacabbb.js";function Fe(a,e,l){const t=a.slice();return t[17]=e[l][0],t[2]=e[l][1],t}function je(a,e,l){const t=a.slice();return t[20]=e[l].fixture,t[21]=e[l].homeTeam,t[22]=e[l].awayTeam,t}function Be(a,e,l){const t=a.slice();return t[25]=e[l],t}function Ge(a){let e,l,t=a[25]+"",i;return{c(){e=_("option"),l=G("Gameweek "),i=G(t),this.h()},l(d){e=v(d,"OPTION",{});var E=p(e);l=P(E,"Gameweek "),i=P(E,t),E.forEach(u),this.h()},h(){e.__value=a[25],e.value=e.__value},m(d,E){se(d,e,E),r(e,l),r(e,i)},p:We,d(d){d&&u(e)}}}function Pe(a){let e,l,t,i,d,E,T,N,w,c,k,f,h,n,I,C,A,O,y=Ae(Number(a[20].kickOff))+"",$,V,g,H,s,b=(a[21]?a[21].friendlyName:"")+"",o,S,B,M,K=(a[22]?a[22].friendlyName:"")+"",Q,R,L,z,Y,ee=(a[20].status===0?"-":a[20].homeGoals)+"",re,_e,te,le=(a[20].status===0?"-":a[20].awayGoals)+"",oe,ne,U;return E=new Oe({props:{primaryColour:a[21]?a[21].primaryColourHex:"",secondaryColour:a[21]?a[21].secondaryColourHex:"",thirdColour:a[21]?a[21].thirdColourHex:""}}),n=new Oe({props:{primaryColour:a[22]?a[22].primaryColourHex:"",secondaryColour:a[22]?a[22].secondaryColourHex:"",thirdColour:a[22]?a[22].thirdColourHex:""}}),{c(){e=_("div"),l=_("div"),t=_("div"),i=_("div"),d=_("a"),ce(E.$$.fragment),N=F(),w=_("span"),c=G("v"),k=F(),f=_("div"),h=_("a"),ce(n.$$.fragment),C=F(),A=_("div"),O=_("span"),$=G(y),V=F(),g=_("div"),H=_("div"),s=_("a"),o=G(b),B=F(),M=_("a"),Q=G(K),L=F(),z=_("div"),Y=_("span"),re=G(ee),_e=F(),te=_("span"),oe=G(le),this.h()},l(x){e=v(x,"DIV",{class:!0});var D=p(e);l=v(D,"DIV",{class:!0});var X=p(l);t=v(X,"DIV",{class:!0});var J=p(t);i=v(J,"DIV",{class:!0});var be=p(i);d=v(be,"A",{href:!0});var xe=p(d);de(E.$$.fragment,xe),xe.forEach(u),be.forEach(u),N=j(J),w=v(J,"SPAN",{class:!0});var ye=p(w);c=P(ye,"v"),ye.forEach(u),k=j(J),f=v(J,"DIV",{class:!0});var $e=p(f);h=v($e,"A",{href:!0});var we=p(h);de(n.$$.fragment,we),we.forEach(u),$e.forEach(u),J.forEach(u),C=j(X),A=v(X,"DIV",{class:!0});var Ee=p(A);O=v(Ee,"SPAN",{class:!0});var Ie=p(O);$=P(Ie,y),Ie.forEach(u),Ee.forEach(u),X.forEach(u),V=j(D),g=v(D,"DIV",{class:!0});var ie=p(g);H=v(ie,"DIV",{class:!0});var fe=p(H);s=v(fe,"A",{href:!0});var Te=p(s);o=P(Te,b),Te.forEach(u),B=j(fe),M=v(fe,"A",{href:!0});var ke=p(M);Q=P(ke,K),ke.forEach(u),fe.forEach(u),L=j(ie),z=v(ie,"DIV",{class:!0});var ue=p(z);Y=v(ue,"SPAN",{});var Ce=p(Y);re=P(Ce,ee),Ce.forEach(u),_e=j(ue),te=v(ue,"SPAN",{});var De=p(te);oe=P(De,le),De.forEach(u),ue.forEach(u),ie.forEach(u),D.forEach(u),this.h()},h(){m(d,"href",T=`/club?id=${a[20].homeTeamId}`),m(i,"class","w-10 items-center justify-center"),m(w,"class","font-bold text-lg"),m(h,"href",I=`/club?id=${a[20].awayTeamId}`),m(f,"class","w-10 items-center justify-center"),m(t,"class","flex w-1/2 space-x-4 justify-center"),m(O,"class","text-sm md:text-lg ml-4 md:ml-0 text-left"),m(A,"class","flex w-1/2 lg:justify-center"),m(l,"class","flex items-center w-1/2 ml-4"),m(s,"href",S=`/club?id=${a[20].homeTeamId}`),m(M,"href",R=`/club?id=${a[20].awayTeamId}`),m(H,"class","flex flex-col min-w-[200px] lg:min-w-[120px] lg:min-w-[200px] text-xs md:text-base"),m(z,"class","flex flex-col min-w-[200px] lg:min-w-[120px] lg:min-w-[200px] text-xs md:text-base"),m(g,"class","flex items-center space-x-10 w-1/2 lg:justify-center"),m(e,"class",ne=`flex items-center justify-between py-2 border-b border-gray-700  ${a[20].status===0?"text-gray-400":"text-white"}`)},m(x,D){se(x,e,D),r(e,l),r(l,t),r(t,i),r(i,d),me(E,d,null),r(t,N),r(t,w),r(w,c),r(t,k),r(t,f),r(f,h),me(n,h,null),r(l,C),r(l,A),r(A,O),r(O,$),r(e,V),r(e,g),r(g,H),r(H,s),r(s,o),r(H,B),r(H,M),r(M,Q),r(g,L),r(g,z),r(z,Y),r(Y,re),r(z,_e),r(z,te),r(te,oe),U=!0},p(x,D){const X={};D&2&&(X.primaryColour=x[21]?x[21].primaryColourHex:""),D&2&&(X.secondaryColour=x[21]?x[21].secondaryColourHex:""),D&2&&(X.thirdColour=x[21]?x[21].thirdColourHex:""),E.$set(X),(!U||D&2&&T!==(T=`/club?id=${x[20].homeTeamId}`))&&m(d,"href",T);const J={};D&2&&(J.primaryColour=x[22]?x[22].primaryColourHex:""),D&2&&(J.secondaryColour=x[22]?x[22].secondaryColourHex:""),D&2&&(J.thirdColour=x[22]?x[22].thirdColourHex:""),n.$set(J),(!U||D&2&&I!==(I=`/club?id=${x[20].awayTeamId}`))&&m(h,"href",I),(!U||D&2)&&y!==(y=Ae(Number(x[20].kickOff))+"")&&Z($,y),(!U||D&2)&&b!==(b=(x[21]?x[21].friendlyName:"")+"")&&Z(o,b),(!U||D&2&&S!==(S=`/club?id=${x[20].homeTeamId}`))&&m(s,"href",S),(!U||D&2)&&K!==(K=(x[22]?x[22].friendlyName:"")+"")&&Z(Q,K),(!U||D&2&&R!==(R=`/club?id=${x[20].awayTeamId}`))&&m(M,"href",R),(!U||D&2)&&ee!==(ee=(x[20].status===0?"-":x[20].homeGoals)+"")&&Z(re,ee),(!U||D&2)&&le!==(le=(x[20].status===0?"-":x[20].awayGoals)+"")&&Z(oe,le),(!U||D&2&&ne!==(ne=`flex items-center justify-between py-2 border-b border-gray-700  ${x[20].status===0?"text-gray-400":"text-white"}`))&&m(e,"class",ne)},i(x){U||(q(E.$$.fragment,x),q(n.$$.fragment,x),U=!0)},o(x){W(E.$$.fragment,x),W(n.$$.fragment,x),U=!1},d(x){x&&u(e),he(E),he(n)}}}function Le(a){let e,l,t,i=a[17]+"",d,E,T,N,w=a[2],c=[];for(let f=0;f<w.length;f+=1)c[f]=Pe(je(a,w,f));const k=f=>W(c[f],1,1,()=>{c[f]=null});return{c(){e=_("div"),l=_("div"),t=_("h2"),d=G(i),E=F();for(let f=0;f<c.length;f+=1)c[f].c();T=F(),this.h()},l(f){e=v(f,"DIV",{});var h=p(e);l=v(h,"DIV",{class:!0});var n=p(l);t=v(n,"H2",{class:!0});var I=p(t);d=P(I,i),I.forEach(u),n.forEach(u),E=j(h);for(let C=0;C<c.length;C+=1)c[C].l(h);T=j(h),h.forEach(u),this.h()},h(){m(t,"class","date-header ml-4 text-xs md:text-base"),m(l,"class","flex items-center justify-between border border-gray-700 py-4 bg-light-gray")},m(f,h){se(f,e,h),r(e,l),r(l,t),r(t,d),r(e,E);for(let n=0;n<c.length;n+=1)c[n]&&c[n].m(e,null);r(e,T),N=!0},p(f,h){if((!N||h&2)&&i!==(i=f[17]+"")&&Z(d,i),h&2){w=f[2];let n;for(n=0;n<w.length;n+=1){const I=je(f,w,n);c[n]?(c[n].p(I,h),q(c[n],1)):(c[n]=Pe(I),c[n].c(),q(c[n],1),c[n].m(e,T))}for(pe(),n=w.length;n<c.length;n+=1)k(n);ge()}},i(f){if(!N){for(let h=0;h<w.length;h+=1)q(c[h]);N=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)W(c[h]);N=!1},d(f){f&&u(e),ve(c,f)}}}function tt(a){let e,l,t,i,d,E,T,N,w,c,k,f,h,n,I,C,A,O,y=a[3],$=[];for(let s=0;s<y.length;s+=1)$[s]=Ge(Be(a,y,s));let V=Object.entries(a[1]),g=[];for(let s=0;s<V.length;s+=1)g[s]=Le(Fe(a,V,s));const H=s=>W(g[s],1,1,()=>{g[s]=null});return{c(){e=_("div"),l=_("div"),t=_("div"),i=_("div"),d=_("button"),E=G("<"),N=F(),w=_("select");for(let s=0;s<$.length;s+=1)$[s].c();c=F(),k=_("button"),f=G(">"),n=F(),I=_("div");for(let s=0;s<g.length;s+=1)g[s].c();this.h()},l(s){e=v(s,"DIV",{class:!0});var b=p(e);l=v(b,"DIV",{class:!0});var o=p(l);t=v(o,"DIV",{class:!0});var S=p(t);i=v(S,"DIV",{class:!0});var B=p(i);d=v(B,"BUTTON",{class:!0});var M=p(d);E=P(M,"<"),M.forEach(u),N=j(B),w=v(B,"SELECT",{class:!0});var K=p(w);for(let L=0;L<$.length;L+=1)$[L].l(K);K.forEach(u),c=j(B),k=v(B,"BUTTON",{class:!0});var Q=p(k);f=P(Q,">"),Q.forEach(u),B.forEach(u),S.forEach(u),n=j(o),I=v(o,"DIV",{});var R=p(I);for(let L=0;L<g.length;L+=1)g[L].l(R);R.forEach(u),o.forEach(u),b.forEach(u),this.h()},h(){m(d,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1"),d.disabled=T=a[0]===1,m(w,"class","p-2 fpl-dropdown text-xs md:text-base text-center mx-0 md:mx-2 min-w-[150px] sm:min-w-[100px]"),a[0]===void 0&&Qe(()=>a[8].call(w)),m(k,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1 ml-1"),k.disabled=h=a[0]===38,m(i,"class","flex items-center space-x-2 ml-4"),m(t,"class","flex flex-col sm:flex-row gap-4 sm:gap-8"),m(l,"class","flex flex-col space-y-4"),m(e,"class","container-fluid mt-4 mb-4")},m(s,b){se(s,e,b),r(e,l),r(l,t),r(t,i),r(i,d),r(d,E),r(i,N),r(i,w);for(let o=0;o<$.length;o+=1)$[o]&&$[o].m(w,null);Se(w,a[0],!0),r(i,c),r(i,k),r(k,f),r(l,n),r(l,I);for(let o=0;o<g.length;o+=1)g[o]&&g[o].m(I,null);C=!0,A||(O=[ae(d,"click",a[7]),ae(w,"change",a[8]),ae(k,"click",a[9])],A=!0)},p(s,[b]){if((!C||b&9&&T!==(T=s[0]===1))&&(d.disabled=T),b&8){y=s[3];let o;for(o=0;o<y.length;o+=1){const S=Be(s,y,o);$[o]?$[o].p(S,b):($[o]=Ge(S),$[o].c(),$[o].m(w,null))}for(;o<$.length;o+=1)$[o].d(1);$.length=y.length}if(b&9&&Se(w,s[0]),(!C||b&9&&h!==(h=s[0]===38))&&(k.disabled=h),b&2){V=Object.entries(s[1]);let o;for(o=0;o<V.length;o+=1){const S=Fe(s,V,o);g[o]?(g[o].p(S,b),q(g[o],1)):(g[o]=Le(S),g[o].c(),q(g[o],1),g[o].m(I,null))}for(pe(),o=V.length;o<g.length;o+=1)H(o);ge()}},i(s){if(!C){for(let b=0;b<V.length;b+=1)q(g[b]);C=!0}},o(s){g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)W(g[b]);C=!1},d(s){s&&u(e),ve($,s),ve(g,s),A=!1,ze(O)}}}function lt(a,e,l){let t,i,d=[],E=[],T=[],N,w,c,k,f=1,h=Array.from({length:38},(y,$)=>$+1);Je(async()=>{try{await Ve.sync(),await Ne.sync(),await He.sync(),w=Ve.subscribe(y=>{d=y}),c=Ne.subscribe(y=>{l(2,E=y),l(5,T=E.map($=>({fixture:$,homeTeam:I($.homeTeamId),awayTeam:I($.awayTeamId)})))}),k=He.subscribe(y=>{N=y})}catch(y){et.show("Error fetching fixtures data.","error"),console.error("Error fetching fixtures data:",y)}finally{}}),Re(()=>{w?.(),c?.(),k?.()});const n=y=>{l(0,f=Math.max(1,Math.min(38,f+y)))};function I(y){return d.find($=>$.id===y)}const C=()=>n(-1);function A(){f=Xe(this),l(0,f),l(3,h)}const O=()=>n(1);return a.$$.update=()=>{a.$$.dirty&33&&l(6,t=T.filter(({fixture:y})=>y.gameweek===f)),a.$$.dirty&64&&l(1,i=t.reduce((y,$)=>{const V=new Date(Number($.fixture.kickOff)/1e6),H=new Intl.DateTimeFormat("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).format(V);return y[H]||(y[H]=[]),y[H].push($),y},{}))},[f,i,E,h,n,T,t,C,A,O]}class at extends Me{constructor(e){super(),qe(this,e,lt,tt,Ke,{})}}function Ue(a){let e,l;return e=new at({}),{c(){ce(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,i){me(e,t,i),l=!0},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){he(e,t)}}}function st(a){let e,l,t,i,d,E,T,N,w,c,k,f,h,n,I,C,A,O,y,$,V,g,H,s=a[0]==="fixtures"&&Ue();return{c(){e=_("div"),l=_("div"),t=_("div"),i=_("h1"),d=G("OpenFPL Admin"),E=F(),T=_("p"),N=G("This view is for testing purposes only."),w=F(),c=_("div"),k=_("button"),f=G("System Status"),h=F(),n=_("ul"),I=_("li"),C=_("button"),A=G("Fixtures"),$=F(),s&&s.c(),this.h()},l(b){e=v(b,"DIV",{class:!0});var o=p(e);l=v(o,"DIV",{class:!0});var S=p(l);t=v(S,"DIV",{class:!0});var B=p(t);i=v(B,"H1",{class:!0});var M=p(i);d=P(M,"OpenFPL Admin"),M.forEach(u),E=j(B),T=v(B,"P",{class:!0});var K=p(T);N=P(K,"This view is for testing purposes only."),K.forEach(u),B.forEach(u),w=j(S),c=v(S,"DIV",{class:!0});var Q=p(c);k=v(Q,"BUTTON",{class:!0});var R=p(k);f=P(R,"System Status"),R.forEach(u),Q.forEach(u),h=j(S),n=v(S,"UL",{class:!0});var L=p(n);I=v(L,"LI",{class:!0});var z=p(I);C=v(z,"BUTTON",{class:!0});var Y=p(C);A=P(Y,"Fixtures"),Y.forEach(u),z.forEach(u),L.forEach(u),$=j(S),s&&s.l(S),S.forEach(u),o.forEach(u),this.h()},h(){m(i,"class","text-xl"),m(T,"class","mt-2"),m(t,"class","flex flex-col p-4"),m(k,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1"),m(c,"class","flex flex-row p-4 space-x-4"),m(C,"class",O=`p-2 ${a[0]==="fixtures"?"text-white":"text-gray-400"}`),m(I,"class",y=`mr-4 text-xs md:text-base ${a[0]==="fixtures"?"active-tab":""}`),m(n,"class","flex rounded-t-lg bg-light-gray px-4 pt-2"),m(l,"class","bg-panel rounded-lg m-4"),m(e,"class","m-4")},m(b,o){se(b,e,o),r(e,l),r(l,t),r(t,i),r(i,d),r(t,E),r(t,T),r(T,N),r(l,w),r(l,c),r(c,k),r(k,f),r(l,h),r(l,n),r(n,I),r(I,C),r(C,A),r(l,$),s&&s.m(l,null),V=!0,g||(H=[ae(k,"click",a[1]),ae(C,"click",a[3])],g=!0)},p(b,o){(!V||o&1&&O!==(O=`p-2 ${b[0]==="fixtures"?"text-white":"text-gray-400"}`))&&m(C,"class",O),(!V||o&1&&y!==(y=`mr-4 text-xs md:text-base ${b[0]==="fixtures"?"active-tab":""}`))&&m(I,"class",y),b[0]==="fixtures"?s?o&1&&q(s,1):(s=Ue(),s.c(),q(s,1),s.m(l,null)):s&&(pe(),W(s,1,1,()=>{s=null}),ge())},i(b){V||(q(s),V=!0)},o(b){W(s),V=!1},d(b){b&&u(e),s&&s.d(),g=!1,ze(H)}}}function rt(a){let e,l;return e=new Ye({props:{$$slots:{default:[st]},$$scope:{ctx:a}}}),{c(){ce(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,i){me(e,t,i),l=!0},p(t,[i]){const d={};i&33&&(d.$$scope={dirty:i,ctx:t}),e.$set(d)},i(t){l||(q(e.$$.fragment,t),l=!0)},o(t){W(e.$$.fragment,t),l=!1},d(t){he(e,t)}}}function ot(a,e,l){let t="fixtures";Je(async()=>{Ze.set(!1)});function i(){}function d(T){l(0,t=T)}return[t,i,d,()=>d("fixtures")]}class ht extends Me{constructor(e){super(),qe(this,e,ot,rt,Ke,{})}}export{ht as component};
