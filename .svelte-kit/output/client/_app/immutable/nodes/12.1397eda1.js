import{s as ge,Q as He,R as Se,h as x,d as g,j as m,K as Ze,k as ue,i as j,x as c,C as K,y as me,f as h,a as P,l as le,g as b,I as R,c as D,m as se,G as ve,J as rt,O as ut,E as Le,o as Ae,F as ot,A as ft,B as Xe,D as dt,H as mt,n as xe,e as Ie,z as Te,N as $e,p as pt,P as et}from"../chunks/scheduler.2037d42e.js";import{S as he,i as be,b as Z,d as X,m as $,a as B,t as O,e as ee,g as Pe,c as De}from"../chunks/index.cd713282.js";import{B as Y,k as Ee,a as Ue,t as Me,e as tt,s as lt,L as _t,m as vt}from"../chunks/Layout.b983af79.js";import{M as gt}from"../chunks/manager-gameweeks.436f6390.js";import{w as ze}from"../chunks/singletons.4e632dcd.js";import{l as fe,L as it}from"../chunks/LoadingIcon.64dacd79.js";import{M as ct}from"../chunks/Modal.0b5343e4.js";function ht(s){let e,t,l,a,n,o;return{c(){e=He("svg"),t=He("path"),l=He("path"),this.h()},l(i){e=Se(i,"svg",{xmlns:!0,"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,style:!0});var r=x(e);t=Se(r,"path",{d:!0}),x(t).forEach(g),l=Se(r,"path",{d:!0}),x(l).forEach(g),r.forEach(g),this.h()},h(){m(t,"d","M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"),m(l,"d","M3.5 2a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5h-9zM2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v10a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 12.5v-10zm9.5 3A1.5 1.5 0 0 1 13 7h1.5V3.5a1.5 1.5 0 0 0-1.5-1.5H9V4a1.5 1.5 0 0 1 1.5 1.5v1zm0 1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"aria-hidden","true"),m(e,"class",a=Ze(s[0])+" svelte-1qbujws"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16"),ue(e,"--hover-color",s[3]),ue(e,"cursor","'pointer'")},m(i,r){j(i,e,r),c(e,t),c(e,l),n||(o=K(e,"click",s[4]),n=!0)},p(i,[r]){r&1&&a!==(a=Ze(i[0])+" svelte-1qbujws")&&m(e,"class",a),r&8&&ue(e,"--hover-color",i[3])},i:me,o:me,d(i){i&&g(e),n=!1,o()}}}function bt(s,e,t){let{className:l=""}=e,{principalId:a=""}=e,{onClick:n}=e,{hoverColor:o="red"}=e;const i=()=>n(a);return s.$$set=r=>{"className"in r&&t(0,l=r.className),"principalId"in r&&t(1,a=r.principalId),"onClick"in r&&t(2,n=r.onClick),"hoverColor"in r&&t(3,o=r.hoverColor)},[l,a,n,o,i]}class wt extends he{constructor(e){super(),be(this,e,bt,ht,ge,{className:0,principalId:1,onClick:2,hoverColor:3})}}function yt(s){let e,t,l="Update Display Name",a,n,o,i,r,_,u,f="Cancel",p,w,d,N,E,C;return{c(){e=h("div"),t=h("h3"),t.textContent=l,a=P(),n=h("form"),o=h("div"),i=h("input"),r=P(),_=h("div"),u=h("button"),u.textContent=f,p=P(),w=h("button"),d=le("Update"),this.h()},l(M){e=b(M,"DIV",{class:!0});var U=x(e);t=b(U,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-ymhaig"&&(t.textContent=l),a=D(U),n=b(U,"FORM",{});var F=x(n);o=b(F,"DIV",{class:!0});var G=x(o);i=b(G,"INPUT",{type:!0,class:!0,placeholder:!0}),G.forEach(g),r=D(F),_=b(F,"DIV",{class:!0});var I=x(_);u=b(I,"BUTTON",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-1wc3f18"&&(u.textContent=f),p=D(I),w=b(I,"BUTTON",{class:!0,type:!0});var L=x(w);d=se(L,"Update"),L.forEach(g),I.forEach(g),F.forEach(g),U.forEach(g),this.h()},h(){m(t,"class","text-lg leading-6 font-medium mb-2"),m(i,"type","text"),m(i,"class","w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black"),m(i,"placeholder","New Username"),m(o,"class","mt-4"),m(u,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),m(w,"class",N=`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`),m(w,"type","submit"),w.disabled=s[3],m(_,"class","items-center py-3 flex space-x-4"),m(e,"class","mt-3 text-center")},m(M,U){j(M,e,U),c(e,t),c(e,a),c(e,n),c(n,o),c(o,i),ve(i,s[0]),c(n,r),c(n,_),c(_,u),c(_,p),c(_,w),c(w,d),E||(C=[K(i,"input",s[7]),K(u,"click",function(){rt(s[2])&&s[2].apply(this,arguments)}),K(n,"submit",ut(s[4]))],E=!0)},p(M,U){s=M,U&1&&i.value!==s[0]&&ve(i,s[0]),U&8&&N!==(N=`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)&&m(w,"class",N),U&8&&(w.disabled=s[3])},d(M){M&&g(e),E=!1,Le(C)}}}function kt(s){let e,t;return e=new ct({props:{visible:s[1],$$slots:{default:[yt]},$$scope:{ctx:s}}}),e.$on("nnsClose",s[8]),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p(l,[a]){const n={};a&2&&(n.visible=l[1]),a&525&&(n.$$scope={dirty:a,ctx:l}),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ct(s){return s.length<3||s.length>20?!1:/^[a-zA-Z0-9 ]+$/.test(s)}function Tt(s,e,t){let l,{visible:a}=e,{closeModal:n}=e,{cancelModal:o}=e,{newUsername:i=""}=e,{isLoading:r}=e;async function _(){t(5,r=!0),fe.set("Updating Display Name");try{await Y.updateUsername(i),Y.sync(),await n(),Ee({text:"Display name updated.",level:"success",duration:2e3})}catch(p){Ue({msg:{text:"Error updating username."},err:p}),console.error("Error updating username:",p),o()}finally{t(5,r=!1),fe.set("Loading")}}function u(){i=this.value,t(0,i)}const f=()=>t(1,a=!1);return s.$$set=p=>{"visible"in p&&t(1,a=p.visible),"closeModal"in p&&t(6,n=p.closeModal),"cancelModal"in p&&t(2,o=p.cancelModal),"newUsername"in p&&t(0,i=p.newUsername),"isLoading"in p&&t(5,r=p.isLoading)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=!Ct(i))},[i,a,o,l,_,r,n,u,f]}class xt extends he{constructor(e){super(),be(this,e,Tt,kt,ge,{visible:1,closeModal:6,cancelModal:2,newUsername:0,isLoading:5})}}function st(s,e,t){const l=s.slice();return l[11]=e[t],l}function at(s){let e,t=s[11].friendlyName+"",l,a;return{c(){e=h("option"),l=le(t),this.h()},l(n){e=b(n,"OPTION",{});var o=x(e);l=se(o,t),o.forEach(g),this.h()},h(){e.__value=a=s[11].id,ve(e,e.__value)},m(n,o){j(n,e,o),c(e,l)},p(n,o){o&16&&t!==(t=n[11].friendlyName+"")&&xe(l,t),o&16&&a!==(a=n[11].id)&&(e.__value=a,ve(e,e.__value))},d(n){n&&g(e)}}}function It(s){let e,t,l="Update Favourite Team",a,n,o,i,r="Select Team",_,u,f='<p class="font-bold text-sm">Warning</p> <p class="font-bold text-xs">You can only set your favourite team once per season.</p>',p,w,d,N="Cancel",E,C,M,U,F,G,I=tt(s[4]),L=[];for(let v=0;v<I.length;v+=1)L[v]=at(st(s,I,v));return{c(){e=h("div"),t=h("h3"),t.textContent=l,a=P(),n=h("div"),o=h("select"),i=h("option"),i.textContent=r;for(let v=0;v<L.length;v+=1)L[v].c();_=P(),u=h("div"),u.innerHTML=f,p=P(),w=h("div"),d=h("button"),d.textContent=N,E=P(),C=h("button"),M=le("Update"),this.h()},l(v){e=b(v,"DIV",{class:!0});var y=x(e);t=b(y,"H3",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-hozuql"&&(t.textContent=l),a=D(y),n=b(y,"DIV",{class:!0});var T=x(n);o=b(T,"SELECT",{class:!0});var H=x(o);i=b(H,"OPTION",{"data-svelte-h":!0}),R(i)!=="svelte-qjujyf"&&(i.textContent=r);for(let W=0;W<L.length;W+=1)L[W].l(H);H.forEach(g),T.forEach(g),y.forEach(g),_=D(v),u=b(v,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),R(u)!=="svelte-rtlbo1"&&(u.innerHTML=f),p=D(v),w=b(v,"DIV",{class:!0});var A=x(w);d=b(A,"BUTTON",{class:!0,"data-svelte-h":!0}),R(d)!=="svelte-rawogs"&&(d.textContent=N),E=D(A),C=b(A,"BUTTON",{class:!0});var Q=x(C);M=se(Q,"Update"),Q.forEach(g),A.forEach(g),this.h()},h(){m(t,"class","text-lg leading-6 font-medium mb-2"),i.__value=0,ve(i,i.__value),m(o,"class","w-full p-2 rounded-md fpl-dropdown"),s[0]===void 0&&ft(()=>s[8].call(o)),m(n,"class","w-full border border-gray-500 mt-4 mb-2"),m(e,"class","mt-3 text-center"),m(u,"class","bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-1 mt-4"),m(u,"role","alert"),m(d,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),m(C,"class",U=`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`),C.disabled=s[3],m(w,"class","items-center py-3 flex space-x-4")},m(v,y){j(v,e,y),c(e,t),c(e,a),c(e,n),c(n,o),c(o,i);for(let T=0;T<L.length;T+=1)L[T]&&L[T].m(o,null);Xe(o,s[0],!0),j(v,_,y),j(v,u,y),j(v,p,y),j(v,w,y),c(w,d),c(w,E),c(w,C),c(C,M),F||(G=[K(o,"change",s[8]),K(d,"click",function(){rt(s[2])&&s[2].apply(this,arguments)}),K(C,"click",s[5])],F=!0)},p(v,y){if(s=v,y&16){I=tt(s[4]);let T;for(T=0;T<I.length;T+=1){const H=st(s,I,T);L[T]?L[T].p(H,y):(L[T]=at(H),L[T].c(),L[T].m(o,null))}for(;T<L.length;T+=1)L[T].d(1);L.length=I.length}y&17&&Xe(o,s[0]),y&8&&U!==(U=`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)&&m(C,"class",U),y&8&&(C.disabled=s[3])},d(v){v&&(g(e),g(_),g(u),g(p),g(w)),dt(L,v),F=!1,Le(G)}}}function Et(s){let e,t;return e=new ct({props:{visible:s[1],$$slots:{default:[It]},$$scope:{ctx:s}}}),e.$on("nnsClose",s[9]),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p(l,[a]){const n={};a&2&&(n.visible=l[1]),a&16413&&(n.$$scope={dirty:a,ctx:l}),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ut(s,e,t){let{visible:l}=e,{closeModal:a}=e,{cancelModal:n}=e,{newFavouriteTeam:o=0}=e,{isLoading:i}=e,r=!0,_,u;Ae(async()=>{await Y.sync(),await Me.sync(),u=Me.subscribe(d=>{t(4,_=d)})}),ot(()=>{u?.()});async function f(){t(6,i=!0),fe.set("Updating Favourite Club");try{await Y.updateFavouriteTeam(o),Y.sync(),await a(),Ee({text:"Favourite team updated.",level:"success",duration:2e3})}catch(d){Ue({msg:{text:"Error updating favourite team."},err:d}),console.error("Error updating favourite team:",d),n()}finally{t(6,i=!1),fe.set("Loading")}}function p(){o=mt(this),t(0,o),t(4,_)}const w=()=>t(1,l=!1);return s.$$set=d=>{"visible"in d&&t(1,l=d.visible),"closeModal"in d&&t(7,a=d.closeModal),"cancelModal"in d&&t(2,n=d.cancelModal),"newFavouriteTeam"in d&&t(0,o=d.newFavouriteTeam),"isLoading"in d&&t(6,i=d.isLoading)},s.$$.update=()=>{s.$$.dirty&1&&t(3,r=o<=0)},[o,l,n,r,_,f,i,a,p,w]}class Mt extends he{constructor(e){super(),be(this,e,Ut,Et,ge,{visible:1,closeModal:7,cancelModal:2,newFavouriteTeam:0,isLoading:6})}}function Lt(s){let e,t,l,a,n,o,i,r='<div class="w-full px-2 mb-4"><div class="mt-4 px-2"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="flex items-center p-4 rounded-lg shadow-md border border-gray-700"><img src="ICPCoin.png" alt="ICP" class="h-12 w-12"/> <div class="ml-4"><p class="font-bold">ICP</p> <p>0.00 ICP</p></div></div> <div class="flex items-center p-4 rounded-lg shadow-md border border-gray-700"><img src="FPLCoin.png" alt="FPL" class="h-12 w-12"/> <div class="ml-4"><p class="font-bold">FPL</p> <p>0.00 FPL</p></div></div> <div class="flex items-center p-4 rounded-lg shadow-md border border-gray-700"><img src="ckBTCCoin.png" alt="ICP" class="h-12 w-12"/> <div class="ml-4"><p class="font-bold">ckBTC</p> <p>0.00 ckBTC</p></div></div> <div class="flex items-center p-4 rounded-lg shadow-md border border-gray-700"><img src="ckETHCoin.png" alt="ICP" class="h-12 w-12"/> <div class="ml-4"><p class="font-bold">ckETH</p> <p>0.00 ckETH</p></div></div></div></div></div>',_;e=new xt({props:{newUsername:s[0]?s[0].displayName:"",visible:s[1],closeModal:s[12],cancelModal:s[13],isLoading:s[5]}}),l=new Mt({props:{newFavouriteTeam:s[0]?s[0].favouriteTeamId:0,visible:s[2],closeModal:s[15],cancelModal:s[16],isLoading:s[5]}});let u=s[0]&&nt(s);return{c(){Z(e.$$.fragment),t=P(),Z(l.$$.fragment),a=P(),n=h("div"),u&&u.c(),o=P(),i=h("div"),i.innerHTML=r,this.h()},l(f){X(e.$$.fragment,f),t=D(f),X(l.$$.fragment,f),a=D(f),n=b(f,"DIV",{class:!0});var p=x(n);u&&u.l(p),o=D(p),i=b(p,"DIV",{class:!0,"data-svelte-h":!0}),R(i)!=="svelte-51k72d"&&(i.innerHTML=r),p.forEach(g),this.h()},h(){m(i,"class","flex flex-wrap -mx-2 mt-4"),m(n,"class","container mx-auto p-4")},m(f,p){$(e,f,p),j(f,t,p),$(l,f,p),j(f,a,p),j(f,n,p),u&&u.m(n,null),c(n,o),c(n,i),_=!0},p(f,p){const w={};p&1&&(w.newUsername=f[0]?f[0].displayName:""),p&2&&(w.visible=f[1]),p&32&&(w.isLoading=f[5]),e.$set(w);const d={};p&1&&(d.newFavouriteTeam=f[0]?f[0].favouriteTeamId:0),p&4&&(d.visible=f[2]),p&32&&(d.isLoading=f[5]),l.$set(d),f[0]?u?(u.p(f,p),p&1&&B(u,1)):(u=nt(f),u.c(),B(u,1),u.m(n,o)):u&&(Pe(),O(u,1,1,()=>{u=null}),De())},i(f){_||(B(e.$$.fragment,f),B(l.$$.fragment,f),B(u),_=!0)},o(f){O(e.$$.fragment,f),O(l.$$.fragment,f),O(u),_=!1},d(f){f&&(g(t),g(a),g(n)),ee(e,f),ee(l,f),u&&u.d()}}}function Pt(s){let e,t;return e=new it({}),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p:me,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function nt(s){let e,t,l,a,n,o,i,r,_="Upload Photo",u,f,p,w,d,N,E="Display Name:",C,M,U=s[0]?.displayName+"",F,G,I,L="Update",v,y,T="Favourite Team:",H,A,Q,W,q,k,S,ae,oe,je="Joined:",Ne,ie,Ge="August 2023",Fe,ce,qe="Principal:",Ve,ne,de,pe=s[0]?.principalId+"",we,Be,re,te,Oe,Re;return re=new wt({props:{onClick:s[17],principalId:s[0]?.principalId,className:"ml-2 w-4 h-4"}}),{c(){e=h("div"),t=h("div"),l=h("div"),a=h("img"),o=P(),i=h("div"),r=h("button"),r.textContent=_,u=P(),f=h("input"),p=P(),w=h("div"),d=h("div"),N=h("p"),N.textContent=E,C=P(),M=h("h2"),F=le(U),G=P(),I=h("button"),I.textContent=L,v=P(),y=h("p"),y.textContent=T,H=P(),A=h("h2"),Q=le(s[7]),W=P(),q=h("button"),k=le("Update"),ae=P(),oe=h("p"),oe.textContent=je,Ne=P(),ie=h("h2"),ie.textContent=Ge,Fe=P(),ce=h("p"),ce.textContent=qe,Ve=P(),ne=h("div"),de=h("h2"),we=le(pe),Be=P(),Z(re.$$.fragment),this.h()},l(z){e=b(z,"DIV",{class:!0});var J=x(e);t=b(J,"DIV",{class:!0});var _e=x(t);l=b(_e,"DIV",{class:!0});var ye=x(l);a=b(ye,"IMG",{src:!0,alt:!0,class:!0}),o=D(ye),i=b(ye,"DIV",{class:!0});var ke=x(i);r=b(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-1xnc0lo"&&(r.textContent=_),u=D(ke),f=b(ke,"INPUT",{type:!0,id:!0,accept:!0,style:!0,class:!0}),ke.forEach(g),ye.forEach(g),_e.forEach(g),p=D(J),w=b(J,"DIV",{class:!0});var Je=x(w);d=b(Je,"DIV",{class:!0});var V=x(d);N=b(V,"P",{class:!0,"data-svelte-h":!0}),R(N)!=="svelte-143djhn"&&(N.textContent=E),C=D(V),M=b(V,"H2",{class:!0});var Ke=x(M);F=se(Ke,U),Ke.forEach(g),G=D(V),I=b(V,"BUTTON",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-dfb0cd"&&(I.textContent=L),v=D(V),y=b(V,"P",{class:!0,"data-svelte-h":!0}),R(y)!=="svelte-32zfwi"&&(y.textContent=T),H=D(V),A=b(V,"H2",{class:!0});var Qe=x(A);Q=se(Qe,s[7]),Qe.forEach(g),W=D(V),q=b(V,"BUTTON",{class:!0});var We=x(q);k=se(We,"Update"),We.forEach(g),ae=D(V),oe=b(V,"P",{class:!0,"data-svelte-h":!0}),R(oe)!=="svelte-11rwdu5"&&(oe.textContent=je),Ne=D(V),ie=b(V,"H2",{class:!0,"data-svelte-h":!0}),R(ie)!=="svelte-cgg5u6"&&(ie.textContent=Ge),Fe=D(V),ce=b(V,"P",{class:!0,"data-svelte-h":!0}),R(ce)!=="svelte-1vkhs3c"&&(ce.textContent=qe),Ve=D(V),ne=b(V,"DIV",{class:!0});var Ce=x(ne);de=b(Ce,"H2",{class:!0});var Ye=x(de);we=se(Ye,pe),Ye.forEach(g),Be=D(Ce),X(re.$$.fragment,Ce),Ce.forEach(g),V.forEach(g),Je.forEach(g),J.forEach(g),this.h()},h(){et(a.src,n=s[6])||m(a,"src",n),m(a,"alt","Profile"),m(a,"class","w-100 md:w-80 mb-1 rounded-lg"),m(r,"class","btn-file-upload fpl-button svelte-e6um5o"),m(f,"type","file"),m(f,"id","profile-image"),m(f,"accept","image/*"),ue(f,"opacity","0"),ue(f,"position","absolute"),ue(f,"left","0"),ue(f,"top","0"),m(f,"class","svelte-e6um5o"),m(i,"class","file-upload-wrapper mt-4 svelte-e6um5o"),m(l,"class","group"),m(t,"class","w-full md:w-auto px-2 ml-4 md:ml-0"),m(N,"class","text-xs mb-2"),m(M,"class","text-2xl font-bold mb-2"),m(I,"class","p-2 px-4 rounded fpl-button"),m(y,"class","text-xs mb-2 mt-4"),m(A,"class","text-2xl font-bold mb-2"),m(q,"class","p-2 px-4 rounded fpl-button"),q.disabled=S=s[4]>1&&(s[0]?.favouriteTeamId??0)>0,m(oe,"class","text-xs mb-2 mt-4"),m(ie,"class","text-2xl font-bold mb-2"),m(ce,"class","text-xs mb-2 mt-4"),m(de,"class","text-xs font-bold"),m(ne,"class","flex items-center"),m(d,"class","ml-4 p-4 rounded-lg"),m(w,"class","w-full md:w-3/4 px-2 mb-4"),m(e,"class","flex flex-wrap")},m(z,J){j(z,e,J),c(e,t),c(t,l),c(l,a),c(l,o),c(l,i),c(i,r),c(i,u),c(i,f),s[22](f),c(e,p),c(e,w),c(w,d),c(d,N),c(d,C),c(d,M),c(M,F),c(d,G),c(d,I),c(d,v),c(d,y),c(d,H),c(d,A),c(A,Q),c(d,W),c(d,q),c(q,k),c(d,ae),c(d,oe),c(d,Ne),c(d,ie),c(d,Fe),c(d,ce),c(d,Ve),c(d,ne),c(ne,de),c(de,we),c(ne,Be),$(re,ne,null),te=!0,Oe||(Re=[K(r,"click",s[18]),K(f,"change",s[19]),K(I,"click",s[11]),K(q,"click",s[14])],Oe=!0)},p(z,J){(!te||J&64&&!et(a.src,n=z[6]))&&m(a,"src",n),(!te||J&1)&&U!==(U=z[0]?.displayName+"")&&xe(F,U),(!te||J&128)&&xe(Q,z[7]),(!te||J&17&&S!==(S=z[4]>1&&(z[0]?.favouriteTeamId??0)>0))&&(q.disabled=S),(!te||J&1)&&pe!==(pe=z[0]?.principalId+"")&&xe(we,pe);const _e={};J&1&&(_e.principalId=z[0]?.principalId),re.$set(_e)},i(z){te||(B(re.$$.fragment,z),te=!0)},o(z){O(re.$$.fragment,z),te=!1},d(z){z&&g(e),s[22](null),ee(re),Oe=!1,Le(Re)}}}function Dt(s){let e,t,l,a;const n=[Pt,Lt],o=[];function i(r,_){return r[5]?0:1}return e=i(s),t=o[e]=n[e](s),{c(){t.c(),l=Ie()},l(r){t.l(r),l=Ie()},m(r,_){o[e].m(r,_),j(r,l,_),a=!0},p(r,[_]){let u=e;e=i(r),e===u?o[e].p(r,_):(Pe(),O(o[u],1,1,()=>{o[u]=null}),De(),t=o[e],t?t.p(r,_):(t=o[e]=n[e](r),t.c()),B(t,1),t.m(l.parentNode,l))},i(r){a||(B(t),a=!0)},o(r){O(t),a=!1},d(r){r&&g(l),o[e].d(r)}}}function Nt(s,e,t){let l,a,n,o,i,r;Te(s,fe,k=>t(26,n=k));let _=ze([]);Te(s,_,k=>t(20,i=k));let u=ze(null);Te(s,u,k=>t(21,r=k));let f=ze(null);Te(s,f,k=>t(0,o=k));let p=!1,w=!1,d,N=1,E,C,M,U=!0;Ae(async()=>{try{await Me.sync(),await lt.sync(),await Y.sync(),E=Me.subscribe(k=>{_.set(k)}),C=lt.subscribe(k=>{u.set(k)}),M=Y.subscribe(k=>{F(k)})}catch(k){Ue({msg:{text:"Error fetching profile detail."},err:k}),console.error("Error fetching profile detail:",k)}finally{t(5,U=!1)}}),ot(()=>{E?.(),C?.()});function F(k){k&&f.set(k)}function G(){t(1,p=!0)}async function I(){const k=await Y.getProfile();F(k),t(1,p=!1)}function L(){t(1,p=!1)}function v(){t(2,w=!0)}async function y(){const k=await Y.getProfile();F(k),t(2,w=!1)}function T(){t(2,w=!1)}function H(k){navigator.clipboard.writeText(k).then(()=>{Ee({text:"Copied to clipboard.",level:"success",duration:2e3})})}function A(){d.click()}function Q(k){const S=k.target;if(S.files&&S.files[0]){const ae=S.files[0];if(ae.size>1e3*1024){alert("File size exceeds 1000KB");return}W(ae)}}async function W(k){$e(fe,n="Uploading Profile Image",n),t(5,U=!0);try{await Y.updateProfilePicture(k),Y.sync();const S=await Y.getProfile();if(F(S),S&&S.profilePicture&&S.profilePicture.length>0){const ae=new Blob([new Uint8Array(S.profilePicture)]);t(6,l=URL.createObjectURL(ae))}Ee({text:"Profile image updated.",level:"success",duration:2e3})}catch(S){Ue({msg:{text:"Error updating profile image."},err:S}),console.error("Error updating profile image",S)}finally{t(5,U=!1),$e(fe,n="Loading",n)}}function q(k){pt[k?"unshift":"push"](()=>{d=k,t(3,d)})}return s.$$.update=()=>{s.$$.dirty&1&&t(6,l=o&&o?.profilePicture&&o?.profilePicture?.length>0?URL.createObjectURL(new Blob([new Uint8Array(o.profilePicture)])):"profile_placeholder.png"),s.$$.dirty&2097152&&t(4,N=r?.activeGameweek??1),s.$$.dirty&1048577&&t(7,a=i.find(k=>k.id==o?.favouriteTeamId)?.friendlyName??"Not Set")},[o,p,w,d,N,U,l,a,_,u,f,G,I,L,v,y,T,H,A,Q,i,r,q]}class Ft extends he{constructor(e){super(),be(this,e,Nt,Dt,ge,{})}}function Vt(s){let e,t,l,a,n,o,i,r,_,u,f,p,w,d,N,E,C,M,U,F;const G=[Ht,Ot],I=[];function L(v,y){return v[0]==="details"?0:v[0]==="gameweeks"?1:-1}return~(E=L(s))&&(C=I[E]=G[E](s)),{c(){e=h("div"),t=h("div"),l=h("ul"),a=h("li"),n=h("button"),o=le("Details"),_=P(),u=h("li"),f=h("button"),p=le("Gameweeks"),N=P(),C&&C.c(),this.h()},l(v){e=b(v,"DIV",{class:!0});var y=x(e);t=b(y,"DIV",{class:!0});var T=x(t);l=b(T,"UL",{class:!0});var H=x(l);a=b(H,"LI",{class:!0});var A=x(a);n=b(A,"BUTTON",{class:!0});var Q=x(n);o=se(Q,"Details"),Q.forEach(g),A.forEach(g),_=D(H),u=b(H,"LI",{class:!0});var W=x(u);f=b(W,"BUTTON",{class:!0});var q=x(f);p=se(q,"Gameweeks"),q.forEach(g),W.forEach(g),H.forEach(g),N=D(T),C&&C.l(T),T.forEach(g),y.forEach(g),this.h()},h(){m(n,"class",i=`p-2 ${s[0]==="details"?"text-white":"text-gray-400"}`),m(a,"class",r=`mr-4 text-xs md:text-base ${s[0]==="details"?"active-tab":""}`),m(f,"class",w=`p-2 ${s[0]==="gameweeks"?"text-white":"text-gray-400"}`),m(u,"class",d=`mr-4 text-xs md:text-base ${s[0]==="gameweeks"?"active-tab":""}`),m(l,"class","flex rounded-t-lg bg-light-gray px-4 pt-2"),m(t,"class","bg-panel rounded-lg m-4"),m(e,"class","m-4")},m(v,y){j(v,e,y),c(e,t),c(t,l),c(l,a),c(a,n),c(n,o),c(l,_),c(l,u),c(u,f),c(f,p),c(t,N),~E&&I[E].m(t,null),M=!0,U||(F=[K(n,"click",s[4]),K(f,"click",s[5])],U=!0)},p(v,y){(!M||y&1&&i!==(i=`p-2 ${v[0]==="details"?"text-white":"text-gray-400"}`))&&m(n,"class",i),(!M||y&1&&r!==(r=`mr-4 text-xs md:text-base ${v[0]==="details"?"active-tab":""}`))&&m(a,"class",r),(!M||y&1&&w!==(w=`p-2 ${v[0]==="gameweeks"?"text-white":"text-gray-400"}`))&&m(f,"class",w),(!M||y&1&&d!==(d=`mr-4 text-xs md:text-base ${v[0]==="gameweeks"?"active-tab":""}`))&&m(u,"class",d);let T=E;E=L(v),E===T?~E&&I[E].p(v,y):(C&&(Pe(),O(I[T],1,1,()=>{I[T]=null}),De()),~E?(C=I[E],C?C.p(v,y):(C=I[E]=G[E](v),C.c()),B(C,1),C.m(t,null)):C=null)},i(v){M||(B(C),M=!0)},o(v){O(C),M=!1},d(v){v&&g(e),~E&&I[E].d(),U=!1,Le(F)}}}function Bt(s){let e,t;return e=new it({}),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p:me,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ot(s){let e,t;return e=new gt({props:{viewGameweekDetail:s[3]}}),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p:me,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function Ht(s){let e,t;return e=new Ft({}),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p:me,i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function St(s){let e,t,l,a;const n=[Bt,Vt],o=[];function i(r,_){return r[1]?0:1}return e=i(s),t=o[e]=n[e](s),{c(){t.c(),l=Ie()},l(r){t.l(r),l=Ie()},m(r,_){o[e].m(r,_),j(r,l,_),a=!0},p(r,_){let u=e;e=i(r),e===u?o[e].p(r,_):(Pe(),O(o[u],1,1,()=>{o[u]=null}),De(),t=o[e],t?t.p(r,_):(t=o[e]=n[e](r),t.c()),B(t,1),t.m(l.parentNode,l))},i(r){a||(B(t),a=!0)},o(r){O(t),a=!1},d(r){r&&g(l),o[e].d(r)}}}function zt(s){let e,t;return e=new _t({props:{$$slots:{default:[St]},$$scope:{ctx:s}}}),{c(){Z(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){$(e,l,a),t=!0},p(l,[a]){const n={};a&67&&(n.$$scope={dirty:a,ctx:l}),e.$set(n)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function At(s,e,t){let l="details",a=!0;Ae(async()=>{t(1,a=!1)});function n(_){t(0,l=_)}function o(_,u){vt(`/manager?id=${_}&gw=${u}`)}return[l,a,n,o,()=>n("details"),()=>n("gameweeks")]}class Wt extends he{constructor(e){super(),be(this,e,At,zt,ge,{})}}export{Wt as component};
