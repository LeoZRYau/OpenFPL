import{S as Ge,i as Be,s as He,a0 as oa,a1 as ta,m as _,h as l,n as r,U as ke,p as Oe,b as ce,G as o,L as X,H as Ie,e as We,k as c,q as F,a as A,l as d,r as k,c as C,V as _a,Q as ea,a6 as Da,R as ha,N as sa,T as Ia,o as ra,O as Ea,J as Na,K as pa,M as Pa,u as Je,P as Ta,v as ia,d as le,f as la,g as oe,I as na,w as Aa,y as we,z as ye,$ as Fe,A as Le,B as Re}from"../chunks/index.c7b38e5e.js";import{l as Me,L as Ca,a as Oa,i as wa,g as ya}from"../chunks/Layout.a37f6ebe.js";import{M as La}from"../chunks/manager-gameweeks.583bd90d.js";import{a as Ye,t as Ee}from"../chunks/toast-store.ddf69d4c.js";import{w as $e}from"../chunks/index.8caf67b2.js";import{A as Ze,t as aa}from"../chunks/team-store.38ee0fd3.js";import{s as ua}from"../chunks/system-store.bc0743d8.js";function Ra(){const{subscribe:t,set:e,update:a}=$e(null);async function s(m){try{return await(await Ze.createIdentityActor(Ye,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateDisplayName(m)}catch(n){throw console.error("Error updating username:",n),n}}async function i(m){try{return await(await Ze.createIdentityActor(Ye,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateFavouriteTeam(m)}catch(n){throw console.error("Error updating favourite team:",n),n}}async function p(){try{const n=await(await Ze.createIdentityActor(Ye,"bboqb-jiaaa-aaaal-qb6ea-cai")).getProfileDTO();return e(n),n}catch(m){throw console.error("Error getting profile:",m),m}}async function f(m){try{if(m.size>1e3*1024)return null;const b=new FileReader;b.readAsArrayBuffer(m),b.onloadend=async()=>{const I=b.result,g=new Uint8Array(I);try{return await(await Ze.createIdentityActor(Ye,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateProfilePicture(g)}catch(D){console.error(D)}}}catch(n){throw console.error("Error updating username:",n),n}}return{subscribe:t,updateUsername:s,updateFavouriteTeam:i,getProfile:p,updateProfilePicture:f}}const Ce=Ra();function ja(t){let e,a,s,i,p,f;return{c(){e=oa("svg"),a=oa("path"),s=oa("path"),this.h()},l(m){e=ta(m,"svg",{xmlns:!0,"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,style:!0});var n=_(e);a=ta(n,"path",{d:!0}),_(a).forEach(l),s=ta(n,"path",{d:!0}),_(s).forEach(l),n.forEach(l),this.h()},h(){r(a,"d","M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"),r(s,"d","M3.5 2a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5h-9zM2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v10a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 12.5v-10zm9.5 3A1.5 1.5 0 0 1 13 7h1.5V3.5a1.5 1.5 0 0 0-1.5-1.5H9V4a1.5 1.5 0 0 1 1.5 1.5v1zm0 1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"aria-hidden","true"),r(e,"class",i=ke(t[0])+" svelte-1qbujws"),r(e,"fill","currentColor"),r(e,"viewBox","0 0 16 16"),Oe(e,"--hover-color",t[3]),Oe(e,"cursor","'pointer'")},m(m,n){ce(m,e,n),o(e,a),o(e,s),p||(f=X(e,"click",t[4]),p=!0)},p(m,[n]){n&1&&i!==(i=ke(m[0])+" svelte-1qbujws")&&r(e,"class",i),n&8&&Oe(e,"--hover-color",m[3])},i:Ie,o:Ie,d(m){m&&l(e),p=!1,f()}}}function Fa(t,e,a){let{className:s=""}=e,{principalId:i=""}=e,{onClick:p}=e,{hoverColor:f="red"}=e;const m=()=>p(i);return t.$$set=n=>{"className"in n&&a(0,s=n.className),"principalId"in n&&a(1,i=n.principalId),"onClick"in n&&a(2,p=n.onClick),"hoverColor"in n&&a(3,f=n.hoverColor)},[s,i,p,f,m]}class ka extends Ge{constructor(e){super(),Be(this,e,Fa,ja,He,{className:0,principalId:1,onClick:2,hoverColor:3})}}function fa(t){let e,a,s,i,p,f,m,n,b,I,g,D,h,S,v,N,O,M,V;return{c(){e=c("div"),a=c("div"),s=c("div"),i=c("h3"),p=F("Update Display Name"),f=A(),m=c("form"),n=c("div"),b=c("input"),I=A(),g=c("div"),D=c("button"),h=F("Cancel"),S=A(),v=c("button"),N=F("Use"),this.h()},l(q){e=d(q,"DIV",{class:!0});var U=_(e);a=d(U,"DIV",{class:!0});var L=_(a);s=d(L,"DIV",{class:!0});var j=_(s);i=d(j,"H3",{class:!0});var w=_(i);p=k(w,"Update Display Name"),w.forEach(l),f=C(j),m=d(j,"FORM",{});var y=_(m);n=d(y,"DIV",{class:!0});var W=_(n);b=d(W,"INPUT",{type:!0,class:!0,placeholder:!0}),W.forEach(l),I=C(y),g=d(y,"DIV",{class:!0});var K=_(g);D=d(K,"BUTTON",{class:!0});var G=_(D);h=k(G,"Cancel"),G.forEach(l),S=C(K),v=d(K,"BUTTON",{class:!0,type:!0});var u=_(v);N=k(u,"Use"),u.forEach(l),K.forEach(l),y.forEach(l),j.forEach(l),L.forEach(l),U.forEach(l),this.h()},h(){r(i,"class","text-lg leading-6 font-medium mb-2"),r(b,"type","text"),r(b,"class","w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black"),r(b,"placeholder","New Username"),r(n,"class","mt-4"),r(D,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),r(v,"class",O=ke(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),r(v,"type","submit"),v.disabled=t[3],r(g,"class","items-center py-3 flex space-x-4"),r(s,"class","mt-3 text-center"),r(a,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),r(e,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(q,U){ce(q,e,U),o(e,a),o(a,s),o(s,i),o(i,p),o(s,f),o(s,m),o(m,n),o(n,b),_a(b,t[0]),o(m,I),o(m,g),o(g,D),o(D,h),o(g,S),o(g,v),o(v,N),M||(V=[X(b,"input",t[9]),X(D,"click",function(){ea(t[2])&&t[2].apply(this,arguments)}),X(m,"submit",Da(t[4])),X(a,"click",ha(t[8])),X(a,"keydown",t[5]),X(e,"click",function(){ea(t[2])&&t[2].apply(this,arguments)}),X(e,"keydown",t[5])],M=!0)},p(q,U){t=q,U&1&&b.value!==t[0]&&_a(b,t[0]),U&8&&O!==(O=ke(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&r(v,"class",O),U&8&&(v.disabled=t[3])},d(q){q&&l(e),M=!1,sa(V)}}}function Wa(t){let e,a=t[1]&&fa(t);return{c(){a&&a.c(),e=We()},l(s){a&&a.l(s),e=We()},m(s,i){a&&a.m(s,i),ce(s,e,i)},p(s,[i]){s[1]?a?a.p(s,i):(a=fa(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:Ie,o:Ie,d(s){a&&a.d(s),s&&l(e)}}}function Ma(t){return t.length<3||t.length>20?!1:/^[a-zA-Z0-9 ]+$/.test(t)}function Va(t,e,a){let s,{showModal:i}=e,{closeModal:p}=e,{cancelModal:f}=e,{newUsername:m=""}=e,{isLoading:n}=e;async function b(){n.set(!0),Me.set("Updating Display Name");try{await Ce.updateUsername(m),await p(),Ee.show("Display name updated.","success")}catch(h){Ee.show("Error updating username.","error"),console.error("Error updating username:",h),f()}finally{n.set(!1),Me.set("Loading")}}function I(h){!(h.target instanceof HTMLInputElement)&&h.key==="Escape"&&p()}function g(h){Ia.call(this,t,h)}function D(){m=this.value,a(0,m)}return t.$$set=h=>{"showModal"in h&&a(1,i=h.showModal),"closeModal"in h&&a(6,p=h.closeModal),"cancelModal"in h&&a(2,f=h.cancelModal),"newUsername"in h&&a(0,m=h.newUsername),"isLoading"in h&&a(7,n=h.isLoading)},t.$$.update=()=>{t.$$.dirty&1&&a(3,s=!Ma(m))},[m,i,f,s,b,I,p,n,g,D]}class qa extends Ge{constructor(e){super(),Be(this,e,Va,Wa,He,{showModal:1,closeModal:6,cancelModal:2,newUsername:0,isLoading:7})}}function ba(t,e,a){const s=t.slice();return s[12]=e[a],s}function va(t){let e,a,s,i,p,f,m,n,b,I,g,D,h,S,v,N,O,M,V,q,U,L,j,w,y,W,K,G=t[4],u=[];for(let E=0;E<G.length;E+=1)u[E]=ga(ba(t,G,E));return{c(){e=c("div"),a=c("div"),s=c("div"),i=c("h3"),p=F("Update Favourite Team"),f=A(),m=c("div"),n=c("select"),b=c("option"),I=F("Select Team");for(let E=0;E<u.length;E+=1)u[E].c();g=A(),D=c("div"),h=c("p"),S=F("Warning"),v=A(),N=c("p"),O=F("You can only set your favourite team once per season."),M=A(),V=c("div"),q=c("button"),U=F("Cancel"),L=A(),j=c("button"),w=F("Use"),this.h()},l(E){e=d(E,"DIV",{class:!0});var z=_(e);a=d(z,"DIV",{class:!0});var T=_(a);s=d(T,"DIV",{class:!0});var Q=_(s);i=d(Q,"H3",{class:!0});var J=_(i);p=k(J,"Update Favourite Team"),J.forEach(l),f=C(Q),m=d(Q,"DIV",{class:!0});var fe=_(m);n=d(fe,"SELECT",{class:!0});var ae=_(n);b=d(ae,"OPTION",{});var $=_(b);I=k($,"Select Team"),$.forEach(l);for(let Y=0;Y<u.length;Y+=1)u[Y].l(ae);ae.forEach(l),fe.forEach(l),Q.forEach(l),g=C(T),D=d(T,"DIV",{class:!0,role:!0});var ee=_(D);h=d(ee,"P",{class:!0});var te=_(h);S=k(te,"Warning"),te.forEach(l),v=C(ee),N=d(ee,"P",{class:!0});var _e=_(N);O=k(_e,"You can only set your favourite team once per season."),_e.forEach(l),ee.forEach(l),M=C(T),V=d(T,"DIV",{class:!0});var se=_(V);q=d(se,"BUTTON",{class:!0});var ne=_(q);U=k(ne,"Cancel"),ne.forEach(l),L=C(se),j=d(se,"BUTTON",{class:!0});var pe=_(j);w=k(pe,"Use"),pe.forEach(l),se.forEach(l),T.forEach(l),z.forEach(l),this.h()},h(){r(i,"class","text-lg leading-6 font-medium mb-2"),b.__value=0,b.value=b.__value,r(n,"class","w-full p-2 rounded-md fpl-dropdown"),t[0]===void 0&&Na(()=>t[10].call(n)),r(m,"class","w-full border border-gray-500 mt-4 mb-2"),r(s,"class","mt-3 text-center"),r(h,"class","font-bold text-sm"),r(N,"class","font-bold text-xs"),r(D,"class","bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-1 mt-4"),r(D,"role","alert"),r(q,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),r(j,"class",y=ke(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),j.disabled=t[3],r(V,"class","items-center py-3 flex space-x-4"),r(a,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),r(e,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(E,z){ce(E,e,z),o(e,a),o(a,s),o(s,i),o(i,p),o(s,f),o(s,m),o(m,n),o(n,b),o(b,I);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(n,null);pa(n,t[0],!0),o(a,g),o(a,D),o(D,h),o(h,S),o(D,v),o(D,N),o(N,O),o(a,M),o(a,V),o(V,q),o(q,U),o(V,L),o(V,j),o(j,w),W||(K=[X(n,"change",t[10]),X(q,"click",function(){ea(t[2])&&t[2].apply(this,arguments)}),X(j,"click",t[5]),X(a,"click",ha(t[9])),X(a,"keydown",t[6]),X(e,"click",function(){ea(t[2])&&t[2].apply(this,arguments)}),X(e,"keydown",t[6])],W=!0)},p(E,z){if(t=E,z&16){G=t[4];let T;for(T=0;T<G.length;T+=1){const Q=ba(t,G,T);u[T]?u[T].p(Q,z):(u[T]=ga(Q),u[T].c(),u[T].m(n,null))}for(;T<u.length;T+=1)u[T].d(1);u.length=G.length}z&17&&pa(n,t[0]),z&8&&y!==(y=ke(`px-4 py-2 ${t[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&r(j,"class",y),z&8&&(j.disabled=t[3])},d(E){E&&l(e),Pa(u,E),W=!1,sa(K)}}}function ga(t){let e,a=t[12].friendlyName+"",s,i;return{c(){e=c("option"),s=F(a),this.h()},l(p){e=d(p,"OPTION",{});var f=_(e);s=k(f,a),f.forEach(l),this.h()},h(){e.__value=i=t[12].id,e.value=e.__value},m(p,f){ce(p,e,f),o(e,s)},p(p,f){f&16&&a!==(a=p[12].friendlyName+"")&&Je(s,a),f&16&&i!==(i=p[12].id)&&(e.__value=i,e.value=e.__value)},d(p){p&&l(e)}}}function xa(t){let e,a=t[1]&&va(t);return{c(){a&&a.c(),e=We()},l(s){a&&a.l(s),e=We()},m(s,i){a&&a.m(s,i),ce(s,e,i)},p(s,[i]){s[1]?a?a.p(s,i):(a=va(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:Ie,o:Ie,d(s){a&&a.d(s),s&&l(e)}}}function za(t,e,a){let{showModal:s}=e,{closeModal:i}=e,{cancelModal:p}=e,{newFavouriteTeam:f=0}=e,{isLoading:m}=e,n=!0,b,I;ra(async()=>{await aa.sync(),I=aa.subscribe(v=>{a(4,b=v)})}),Ea(()=>{I?.()});async function g(){m.set(!0),Me.set("Updating Favourite Club");try{await Ce.updateFavouriteTeam(f),await i(),Ee.show("Favourite team updated.","success")}catch(v){Ee.show("Error updating favourite team.","error"),console.error("Error updating favourite team:",v),p()}finally{m.set(!1),Me.set("Loading")}}function D(v){!(v.target instanceof HTMLInputElement)&&v.key==="Escape"&&i()}function h(v){Ia.call(this,t,v)}function S(){f=Ta(this),a(0,f),a(4,b)}return t.$$set=v=>{"showModal"in v&&a(1,s=v.showModal),"closeModal"in v&&a(7,i=v.closeModal),"cancelModal"in v&&a(2,p=v.cancelModal),"newFavouriteTeam"in v&&a(0,f=v.newFavouriteTeam),"isLoading"in v&&a(8,m=v.isLoading)},t.$$.update=()=>{t.$$.dirty&1&&a(3,n=f<=0)},[f,s,p,n,b,g,D,i,m,h,S]}class Ua extends Ge{constructor(e){super(),Be(this,e,za,xa,He,{showModal:1,closeModal:7,cancelModal:2,newFavouriteTeam:0,isLoading:8})}}function Ka(t){let e,a,s,i,p,f,m,n,b,I,g,D,h,S,v,N,O,M,V,q,U,L,j,w,y,W,K,G,u,E,z,T,Q,J,fe,ae,$,ee,te,_e,se,ne,pe,Y,Z,be,ve,re,ue,me,ie,ge,je,B;e=new qa({props:{newUsername:t[6]?t[6].displayName:"",showModal:t[1],closeModal:t[12],cancelModal:t[13],isLoading:t[10]}}),s=new Ua({props:{newFavouriteTeam:t[6]?t[6].favouriteTeamId:0,showModal:t[2],closeModal:t[15],cancelModal:t[16],isLoading:t[10]}});let R=t[6]&&Sa(t);return{c(){we(e.$$.fragment),a=A(),we(s.$$.fragment),i=A(),p=c("div"),R&&R.c(),f=A(),m=c("div"),n=c("div"),b=c("div"),I=c("div"),g=c("div"),D=c("img"),S=A(),v=c("div"),N=c("p"),O=F("ICP"),M=A(),V=c("p"),q=F("0.00 ICP"),U=A(),L=c("div"),j=c("img"),y=A(),W=c("div"),K=c("p"),G=F("FPL"),u=A(),E=c("p"),z=F("0.00 FPL"),T=A(),Q=c("div"),J=c("img"),ae=A(),$=c("div"),ee=c("p"),te=F("ckBTC"),_e=A(),se=c("p"),ne=F("0.00 ckBTC"),pe=A(),Y=c("div"),Z=c("img"),ve=A(),re=c("div"),ue=c("p"),me=F("ckETH"),ie=A(),ge=c("p"),je=F("0.00 ckETH"),this.h()},l(P){ye(e.$$.fragment,P),a=C(P),ye(s.$$.fragment,P),i=C(P),p=d(P,"DIV",{class:!0});var H=_(p);R&&R.l(H),f=C(H),m=d(H,"DIV",{class:!0});var de=_(m);n=d(de,"DIV",{class:!0});var Se=_(n);b=d(Se,"DIV",{class:!0});var Ve=_(b);I=d(Ve,"DIV",{class:!0});var x=_(I);g=d(x,"DIV",{class:!0});var De=_(g);D=d(De,"IMG",{src:!0,alt:!0,class:!0}),S=C(De),v=d(De,"DIV",{class:!0});var Ne=_(v);N=d(Ne,"P",{class:!0});var qe=_(N);O=k(qe,"ICP"),qe.forEach(l),M=C(Ne),V=d(Ne,"P",{});var xe=_(V);q=k(xe,"0.00 ICP"),xe.forEach(l),Ne.forEach(l),De.forEach(l),U=C(x),L=d(x,"DIV",{class:!0});var Pe=_(L);j=d(Pe,"IMG",{src:!0,alt:!0,class:!0}),y=C(Pe),W=d(Pe,"DIV",{class:!0});var Te=_(W);K=d(Te,"P",{class:!0});var ze=_(K);G=k(ze,"FPL"),ze.forEach(l),u=C(Te),E=d(Te,"P",{});var Ue=_(E);z=k(Ue,"0.00 FPL"),Ue.forEach(l),Te.forEach(l),Pe.forEach(l),T=C(x),Q=d(x,"DIV",{class:!0});var Ae=_(Q);J=d(Ae,"IMG",{src:!0,alt:!0,class:!0}),ae=C(Ae),$=d(Ae,"DIV",{class:!0});var he=_($);ee=d(he,"P",{class:!0});var Ke=_(ee);te=k(Ke,"ckBTC"),Ke.forEach(l),_e=C(he),se=d(he,"P",{});var ma=_(se);ne=k(ma,"0.00 ckBTC"),ma.forEach(l),he.forEach(l),Ae.forEach(l),pe=C(x),Y=d(x,"DIV",{class:!0});var Xe=_(Y);Z=d(Xe,"IMG",{src:!0,alt:!0,class:!0}),ve=C(Xe),re=d(Xe,"DIV",{class:!0});var Qe=_(re);ue=d(Qe,"P",{class:!0});var ca=_(ue);me=k(ca,"ckETH"),ca.forEach(l),ie=C(Qe),ge=d(Qe,"P",{});var da=_(ge);je=k(da,"0.00 ckETH"),da.forEach(l),Qe.forEach(l),Xe.forEach(l),x.forEach(l),Ve.forEach(l),Se.forEach(l),de.forEach(l),H.forEach(l),this.h()},h(){Fe(D.src,h="ICPCoin.png")||r(D,"src",h),r(D,"alt","ICP"),r(D,"class","h-12 w-12"),r(N,"class","font-bold"),r(v,"class","ml-4"),r(g,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Fe(j.src,w="FPLCoin.png")||r(j,"src",w),r(j,"alt","FPL"),r(j,"class","h-12 w-12"),r(K,"class","font-bold"),r(W,"class","ml-4"),r(L,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Fe(J.src,fe="ckBTCCoin.png")||r(J,"src",fe),r(J,"alt","ICP"),r(J,"class","h-12 w-12"),r(ee,"class","font-bold"),r($,"class","ml-4"),r(Q,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Fe(Z.src,be="ckETHCoin.png")||r(Z,"src",be),r(Z,"alt","ICP"),r(Z,"class","h-12 w-12"),r(ue,"class","font-bold"),r(re,"class","ml-4"),r(Y,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),r(I,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),r(b,"class","mt-4 px-2"),r(n,"class","w-full px-2 mb-4"),r(m,"class","flex flex-wrap -mx-2 mt-4"),r(p,"class","container mx-auto p-4")},m(P,H){Le(e,P,H),ce(P,a,H),Le(s,P,H),ce(P,i,H),ce(P,p,H),R&&R.m(p,null),o(p,f),o(p,m),o(m,n),o(n,b),o(b,I),o(I,g),o(g,D),o(g,S),o(g,v),o(v,N),o(N,O),o(v,M),o(v,V),o(V,q),o(I,U),o(I,L),o(L,j),o(L,y),o(L,W),o(W,K),o(K,G),o(W,u),o(W,E),o(E,z),o(I,T),o(I,Q),o(Q,J),o(Q,ae),o(Q,$),o($,ee),o(ee,te),o($,_e),o($,se),o(se,ne),o(I,pe),o(I,Y),o(Y,Z),o(Y,ve),o(Y,re),o(re,ue),o(ue,me),o(re,ie),o(re,ge),o(ge,je),B=!0},p(P,H){const de={};H&64&&(de.newUsername=P[6]?P[6].displayName:""),H&2&&(de.showModal=P[1]),e.$set(de);const Se={};H&64&&(Se.newFavouriteTeam=P[6]?P[6].favouriteTeamId:0),H&4&&(Se.showModal=P[2]),s.$set(Se),P[6]?R?(R.p(P,H),H&64&&oe(R,1)):(R=Sa(P),R.c(),oe(R,1),R.m(p,f)):R&&(ia(),le(R,1,1,()=>{R=null}),la())},i(P){B||(oe(e.$$.fragment,P),oe(s.$$.fragment,P),oe(R),B=!0)},o(P){le(e.$$.fragment,P),le(s.$$.fragment,P),le(R),B=!1},d(P){Re(e,P),P&&l(a),Re(s,P),P&&l(i),P&&l(p),R&&R.d()}}}function Ga(t){let e,a;return e=new Ca({}),{c(){we(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,i){Le(e,s,i),a=!0},p:Ie,i(s){a||(oe(e.$$.fragment,s),a=!0)},o(s){le(e.$$.fragment,s),a=!1},d(s){Re(e,s)}}}function Sa(t){let e,a,s,i,p,f,m,n,b,I,g,D,h,S,v,N,O,M,V=t[6]?.displayName+"",q,U,L,j,w,y,W,K,G,u=t[0].find(t[21])?.friendlyName+"",E,z,T,Q,J,fe,ae,$,ee,te,_e,se,ne,pe,Y,Z,be,ve=t[6]?.principalName+"",re,ue,me,ie,ge,je;return me=new ka({props:{onClick:t[17],principalId:t[6]?.principalName,className:"ml-2 w-4 h-4"}}),{c(){e=c("div"),a=c("div"),s=c("div"),i=c("img"),f=A(),m=c("div"),n=c("button"),b=F("Upload Photo"),I=A(),g=c("input"),D=A(),h=c("div"),S=c("div"),v=c("p"),N=F("Display Name:"),O=A(),M=c("h2"),q=F(V),U=A(),L=c("button"),j=F("Update"),w=A(),y=c("p"),W=F("Favourite Team:"),K=A(),G=c("h2"),E=F(u),z=A(),T=c("button"),Q=F("Update"),fe=A(),ae=c("p"),$=F("Joined:"),ee=A(),te=c("h2"),_e=F("August 2023"),se=A(),ne=c("p"),pe=F("Principal:"),Y=A(),Z=c("div"),be=c("h2"),re=F(ve),ue=A(),we(me.$$.fragment),this.h()},l(B){e=d(B,"DIV",{class:!0});var R=_(e);a=d(R,"DIV",{class:!0});var P=_(a);s=d(P,"DIV",{class:!0});var H=_(s);i=d(H,"IMG",{src:!0,alt:!0,class:!0}),f=C(H),m=d(H,"DIV",{class:!0});var de=_(m);n=d(de,"BUTTON",{class:!0});var Se=_(n);b=k(Se,"Upload Photo"),Se.forEach(l),I=C(de),g=d(de,"INPUT",{type:!0,id:!0,accept:!0,style:!0,class:!0}),de.forEach(l),H.forEach(l),P.forEach(l),D=C(R),h=d(R,"DIV",{class:!0});var Ve=_(h);S=d(Ve,"DIV",{class:!0});var x=_(S);v=d(x,"P",{class:!0});var De=_(v);N=k(De,"Display Name:"),De.forEach(l),O=C(x),M=d(x,"H2",{class:!0});var Ne=_(M);q=k(Ne,V),Ne.forEach(l),U=C(x),L=d(x,"BUTTON",{class:!0});var qe=_(L);j=k(qe,"Update"),qe.forEach(l),w=C(x),y=d(x,"P",{class:!0});var xe=_(y);W=k(xe,"Favourite Team:"),xe.forEach(l),K=C(x),G=d(x,"H2",{class:!0});var Pe=_(G);E=k(Pe,u),Pe.forEach(l),z=C(x),T=d(x,"BUTTON",{class:!0});var Te=_(T);Q=k(Te,"Update"),Te.forEach(l),fe=C(x),ae=d(x,"P",{class:!0});var ze=_(ae);$=k(ze,"Joined:"),ze.forEach(l),ee=C(x),te=d(x,"H2",{class:!0});var Ue=_(te);_e=k(Ue,"August 2023"),Ue.forEach(l),se=C(x),ne=d(x,"P",{class:!0});var Ae=_(ne);pe=k(Ae,"Principal:"),Ae.forEach(l),Y=C(x),Z=d(x,"DIV",{class:!0});var he=_(Z);be=d(he,"H2",{class:!0});var Ke=_(be);re=k(Ke,ve),Ke.forEach(l),ue=C(he),ye(me.$$.fragment,he),he.forEach(l),x.forEach(l),Ve.forEach(l),R.forEach(l),this.h()},h(){Fe(i.src,p=t[7])||r(i,"src",p),r(i,"alt","Profile"),r(i,"class","w-48 md:w-80 mb-1 rounded-lg"),r(n,"class","btn-file-upload fpl-button svelte-e6um5o"),r(g,"type","file"),r(g,"id","profile-image"),r(g,"accept","image/*"),Oe(g,"opacity","0"),Oe(g,"position","absolute"),Oe(g,"left","0"),Oe(g,"top","0"),r(g,"class","svelte-e6um5o"),r(m,"class","file-upload-wrapper mt-4 svelte-e6um5o"),r(s,"class","group"),r(a,"class","w-full md:w-auto px-2 ml-4 md:ml-0"),r(v,"class","text-xs mb-2"),r(M,"class","text-2xl font-bold mb-2"),r(L,"class","p-2 px-4 rounded fpl-button"),r(y,"class","text-xs mb-2 mt-4"),r(G,"class","text-2xl font-bold mb-2"),r(T,"class","p-2 px-4 rounded fpl-button"),T.disabled=J=t[4]>1&&(t[6]?.favouriteTeamId??0)>0,r(ae,"class","text-xs mb-2 mt-4"),r(te,"class","text-2xl font-bold mb-2"),r(ne,"class","text-xs mb-2 mt-4"),r(be,"class","text-xs font-bold"),r(Z,"class","flex items-center"),r(S,"class","ml-4 p-4 rounded-lg"),r(h,"class","w-full md:w-3/4 px-2 mb-4"),r(e,"class","flex flex-wrap")},m(B,R){ce(B,e,R),o(e,a),o(a,s),o(s,i),o(s,f),o(s,m),o(m,n),o(n,b),o(m,I),o(m,g),t[20](g),o(e,D),o(e,h),o(h,S),o(S,v),o(v,N),o(S,O),o(S,M),o(M,q),o(S,U),o(S,L),o(L,j),o(S,w),o(S,y),o(y,W),o(S,K),o(S,G),o(G,E),o(S,z),o(S,T),o(T,Q),o(S,fe),o(S,ae),o(ae,$),o(S,ee),o(S,te),o(te,_e),o(S,se),o(S,ne),o(ne,pe),o(S,Y),o(S,Z),o(Z,be),o(be,re),o(Z,ue),Le(me,Z,null),ie=!0,ge||(je=[X(n,"click",t[18]),X(g,"change",t[19]),X(L,"click",t[11]),X(T,"click",t[14])],ge=!0)},p(B,R){(!ie||R&128&&!Fe(i.src,p=B[7]))&&r(i,"src",p),(!ie||R&64)&&V!==(V=B[6]?.displayName+"")&&Je(q,V),(!ie||R&65)&&u!==(u=B[0].find(B[21])?.friendlyName+"")&&Je(E,u),(!ie||R&80&&J!==(J=B[4]>1&&(B[6]?.favouriteTeamId??0)>0))&&(T.disabled=J),(!ie||R&64)&&ve!==(ve=B[6]?.principalName+"")&&Je(re,ve);const P={};R&64&&(P.principalId=B[6]?.principalName),me.$set(P)},i(B){ie||(oe(me.$$.fragment,B),ie=!0)},o(B){le(me.$$.fragment,B),ie=!1},d(B){B&&l(e),t[20](null),Re(me),ge=!1,sa(je)}}}function Ba(t){let e,a,s,i;const p=[Ga,Ka],f=[];function m(n,b){return n[5]?0:1}return e=m(t),a=f[e]=p[e](t),{c(){a.c(),s=We()},l(n){a.l(n),s=We()},m(n,b){f[e].m(n,b),ce(n,s,b),i=!0},p(n,[b]){let I=e;e=m(n),e===I?f[e].p(n,b):(ia(),le(f[I],1,1,()=>{f[I]=null}),la(),a=f[e],a?a.p(n,b):(a=f[e]=p[e](n),a.c()),oe(a,1),a.m(s.parentNode,s))},i(n){i||(oe(a),i=!0)},o(n){le(a),i=!1},d(n){f[e].d(n),n&&l(s)}}}function Ha(t,e,a){let s,i,p,f,m,n=$e(null);na(t,n,u=>a(6,i=u));let b=$e("profile_placeholder.png");na(t,b,u=>a(7,p=u));let I=!1,g=!1,D,h=1,S=$e(!1);na(t,S,u=>a(5,s=u));let v,N;ra(async()=>{S.set(!0);try{await aa.sync(),await ua.sync(),v=aa.subscribe(E=>{a(0,f=E)}),N=ua.subscribe(E=>{m=E});const u=await Ce.getProfile();if(n.set(u),u&&u.profilePicture.length>0){const E=new Blob([new Uint8Array(u.profilePicture)]);b.set(URL.createObjectURL(E))}a(4,h=m?.activeGameweek??1)}catch(u){Ee.show("Error fetching profile detail.","error"),console.error("Error fetching profile detail:",u)}finally{S.set(!1)}}),Ea(()=>{v?.(),N?.()});function O(){a(1,I=!0)}async function M(){const u=await Ce.getProfile();n.set(u),a(1,I=!1)}function V(){a(1,I=!1)}function q(){a(2,g=!0)}async function U(){const u=await Ce.getProfile();n.set(u),a(2,g=!1)}function L(){a(2,g=!1)}function j(u){navigator.clipboard.writeText(u).then(()=>{Ee.show("Copied!","success")})}function w(){D.click()}function y(u){const E=u.target;if(E.files&&E.files[0]){const z=E.files[0];if(z.size>1e3*1024){alert("File size exceeds 1000KB");return}W(z)}}async function W(u){S.set(!0),Me.set("Updating Profile Picture");try{await Ce.updateProfilePicture(u);const E=await Ce.getProfile();if(n.set(E),E&&E.profilePicture.length>0){const z=new Blob([new Uint8Array(E.profilePicture)]);b.set(URL.createObjectURL(z))}Ee.show("Profile image updated.","success")}catch(E){Ee.show("Error updating profile image","error"),console.error("Error updating profile image",E)}finally{S.set(!1),Me.set("Loading")}}function K(u){Aa[u?"unshift":"push"](()=>{D=u,a(3,D)})}return[f,I,g,D,h,s,i,p,n,b,S,O,M,V,q,U,L,j,w,y,K,u=>u.id===i?.favouriteTeamId]}class Xa extends Ge{constructor(e){super(),Be(this,e,Ha,Ba,He,{})}}function Qa(t){let e,a;return e=new La({props:{viewGameweekDetail:t[2]}}),{c(){we(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,i){Le(e,s,i),a=!0},p:Ie,i(s){a||(oe(e.$$.fragment,s),a=!0)},o(s){le(e.$$.fragment,s),a=!1},d(s){Re(e,s)}}}function Ya(t){let e,a;return e=new Xa({}),{c(){we(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,i){Le(e,s,i),a=!0},p:Ie,i(s){a||(oe(e.$$.fragment,s),a=!0)},o(s){le(e.$$.fragment,s),a=!1},d(s){Re(e,s)}}}function Za(t){let e,a,s,i,p,f,m,n,b,I,g,D,h,S,v,N,O,M,V,q;const U=[Ya,Qa],L=[];function j(w,y){return w[0]==="details"?0:w[0]==="gameweeks"?1:-1}return~(N=j(t))&&(O=L[N]=U[N](t)),{c(){e=c("div"),a=c("div"),s=c("ul"),i=c("li"),p=c("button"),f=F("Details"),b=A(),I=c("li"),g=c("button"),D=F("Gameweeks"),v=A(),O&&O.c(),this.h()},l(w){e=d(w,"DIV",{class:!0});var y=_(e);a=d(y,"DIV",{class:!0});var W=_(a);s=d(W,"UL",{class:!0});var K=_(s);i=d(K,"LI",{class:!0});var G=_(i);p=d(G,"BUTTON",{class:!0});var u=_(p);f=k(u,"Details"),u.forEach(l),G.forEach(l),b=C(K),I=d(K,"LI",{class:!0});var E=_(I);g=d(E,"BUTTON",{class:!0});var z=_(g);D=k(z,"Gameweeks"),z.forEach(l),E.forEach(l),K.forEach(l),v=C(W),O&&O.l(W),W.forEach(l),y.forEach(l),this.h()},h(){r(p,"class",m=`p-2 ${t[0]==="details"?"text-white":"text-gray-400"}`),r(i,"class",n=`mr-4 text-xs md:text-base ${t[0]==="details"?"active-tab":""}`),r(g,"class",h=`p-2 ${t[0]==="gameweeks"?"text-white":"text-gray-400"}`),r(I,"class",S=`mr-4 text-xs md:text-base ${t[0]==="gameweeks"?"active-tab":""}`),r(s,"class","flex rounded-t-lg bg-light-gray px-4 pt-2"),r(a,"class","bg-panel rounded-lg m-4"),r(e,"class","m-4")},m(w,y){ce(w,e,y),o(e,a),o(a,s),o(s,i),o(i,p),o(p,f),o(s,b),o(s,I),o(I,g),o(g,D),o(a,v),~N&&L[N].m(a,null),M=!0,V||(q=[X(p,"click",t[3]),X(g,"click",t[4])],V=!0)},p(w,y){(!M||y&1&&m!==(m=`p-2 ${w[0]==="details"?"text-white":"text-gray-400"}`))&&r(p,"class",m),(!M||y&1&&n!==(n=`mr-4 text-xs md:text-base ${w[0]==="details"?"active-tab":""}`))&&r(i,"class",n),(!M||y&1&&h!==(h=`p-2 ${w[0]==="gameweeks"?"text-white":"text-gray-400"}`))&&r(g,"class",h),(!M||y&1&&S!==(S=`mr-4 text-xs md:text-base ${w[0]==="gameweeks"?"active-tab":""}`))&&r(I,"class",S);let W=N;N=j(w),N===W?~N&&L[N].p(w,y):(O&&(ia(),le(L[W],1,1,()=>{L[W]=null}),la()),~N?(O=L[N],O?O.p(w,y):(O=L[N]=U[N](w),O.c()),oe(O,1),O.m(a,null)):O=null)},i(w){M||(oe(O),M=!0)},o(w){le(O),M=!1},d(w){w&&l(e),~N&&L[N].d(),V=!1,sa(q)}}}function Ja(t){let e,a;return e=new Oa({props:{$$slots:{default:[Za]},$$scope:{ctx:t}}}),{c(){we(e.$$.fragment)},l(s){ye(e.$$.fragment,s)},m(s,i){Le(e,s,i),a=!0},p(s,[i]){const p={};i&33&&(p.$$scope={dirty:i,ctx:s}),e.$set(p)},i(s){a||(oe(e.$$.fragment,s),a=!0)},o(s){le(e.$$.fragment,s),a=!1},d(s){Re(e,s)}}}function $a(t,e,a){let s="details";ra(async()=>{wa.set(!1)});function i(n){a(0,s=n)}function p(n,b){ya(`/manager?id=${n}&gw=${b}`)}return[s,i,p,()=>i("details"),()=>i("gameweeks")]}class is extends Ge{constructor(e){super(),Be(this,e,$a,Ja,He,{})}}export{is as component};
