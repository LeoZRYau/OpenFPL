import{S as Ms,i as Ls,s as Os,k as n,q as m,a as u,l as o,m as i,r as _,h as r,c as v,n as a,J as Fs,b as Ct,G as e,K as bs,L as Nt,g as ve,v as Gt,f as At,d as Ge,M as ys,N as Bs,o as Us,O as js,H as Tt,x as xs,y as bt,z as $t,A as yt,u as O,B as xt,X as zt,P as Rs,I as qs,e as Es,a0 as Is,p as gt}from"../chunks/index.a8c54947.js";import{p as Ks}from"../chunks/stores.61650043.js";import{s as Xt,t as Qt}from"../chunks/team-store.b38566f6.js";import{m as Ys}from"../chunks/manager-store.2eabe04b.js";import{t as as,b as ks,g as Ds,c as zs,d as Ps}from"../chunks/Layout.ca043cdb.js";import{p as ls}from"../chunks/player-store.7033c4f0.js";import{w as Wt}from"../chunks/singletons.3dcb92f8.js";import{B as Js}from"../chunks/BadgeIcon.ac2d82f5.js";import{M as Ws}from"../chunks/manager-gameweeks.fec23022.js";function Vs(t,l,d){const s=t.slice();s[21]=l[d];const f=s[8](s[21].player.id);s[22]=f;const p=s[9](s[21].player.teamId);return s[23]=p,s}function Ss(t,l,d){const s=t.slice();return s[26]=l[d],s}function $s(t){let l,d,s=t[26]+"",f;return{c(){l=n("option"),d=m("Gameweek "),f=m(s),this.h()},l(p){l=o(p,"OPTION",{});var I=i(l);d=_(I,"Gameweek "),f=_(I,s),I.forEach(r),this.h()},h(){l.__value=t[26],l.value=l.__value},m(p,I){Ct(p,l,I),e(l,d),e(l,f)},p:Tt,d(p){p&&r(l)}}}function Cs(t){let l,d,s=ks(t[21].player.position)+"",f,p,I,k,S,B=t[22]&&t[22].firstName.length>2?t[22].firstName.substring(0,1)+"."+t[22].lastName:"",U,J,G,Y,Z,T=t[23]?.friendlyName+"",P,F,E,R,ee=t[21].appearance+"",me,q,$,K,L=(t[21].highestScoringPlayerId===t[22]?.id?1:0)+"",x,z,Je,X,W=t[21].goals+"",Ae,b,te,Ee,we=t[21].assists+"",pe,Fe,tt,A,le=t[21].penaltySaves+"",Ie,ke,st,ae,_e=t[21].cleanSheets+"",Re,Ye,ce,De,Pe=t[21].saves+"",be,ze,lt,se,qe=t[21].yellowCards+"",We,de,at,Q,fe=t[21].ownGoals+"",He,Ke,Me,re,Ve=t[21].goalsConceded+"",ye,Xe,Se,he,H=t[21].redCards+"",ge,V,ut,g,C=t[21].bonusPoints+"",y,j,ot,ne,$e=t[21].points+"",rt,Qe,w;var Ce=Ds(t[22]?.nationality??"");function it(h){return{props:{class:"w-4 h-4 mr-1",size:"100"}}}return Ce&&(k=xs(Ce,it())),Y=new Js({props:{primaryColour:t[23]?.primaryColourHex,secondaryColour:t[23]?.secondaryColourHex,thirdColour:t[23]?.thirdColourHex,className:"w-6 h-6 mr-2"}}),{c(){l=n("div"),d=n("div"),f=m(s),p=u(),I=n("div"),k&&bt(k.$$.fragment),S=u(),U=m(B),J=u(),G=n("div"),bt(Y.$$.fragment),Z=u(),P=m(T),F=u(),E=n("div"),R=n("div"),me=m(ee),$=u(),K=n("div"),x=m(L),Je=u(),X=n("div"),Ae=m(W),te=u(),Ee=n("div"),pe=m(we),tt=u(),A=n("div"),Ie=m(le),st=u(),ae=n("div"),Re=m(_e),ce=u(),De=n("div"),be=m(Pe),lt=u(),se=n("div"),We=m(qe),at=u(),Q=n("div"),He=m(fe),Me=u(),re=n("div"),ye=m(Ve),Se=u(),he=n("div"),ge=m(H),ut=u(),g=n("div"),y=m(C),ot=u(),ne=n("div"),rt=m($e),Qe=u(),this.h()},l(h){l=o(h,"DIV",{class:!0});var c=i(l);d=o(c,"DIV",{class:!0});var Le=i(d);f=_(Le,s),Le.forEach(r),p=v(c),I=o(c,"DIV",{class:!0});var xe=i(I);k&&$t(k.$$.fragment,xe),S=v(xe),U=_(xe,B),xe.forEach(r),J=v(c),G=o(c,"DIV",{class:!0});var Ze=i(G);$t(Y.$$.fragment,Ze),Z=v(Ze),P=_(Ze,T),Ze.forEach(r),F=v(c),E=o(c,"DIV",{class:!0});var N=i(E);R=o(N,"DIV",{class:!0});var vt=i(R);me=_(vt,ee),vt.forEach(r),$=v(N),K=o(N,"DIV",{class:!0});var et=i(K);x=_(et,L),et.forEach(r),Je=v(N),X=o(N,"DIV",{class:!0});var mt=i(X);Ae=_(mt,W),mt.forEach(r),te=v(N),Ee=o(N,"DIV",{class:!0});var _t=i(Ee);pe=_(_t,we),_t.forEach(r),tt=v(N),A=o(N,"DIV",{class:!0});var Oe=i(A);Ie=_(Oe,le),Oe.forEach(r),st=v(N),ae=o(N,"DIV",{class:!0});var Be=i(ae);Re=_(Be,_e),Be.forEach(r),ce=v(N),De=o(N,"DIV",{class:!0});var Ue=i(De);be=_(Ue,Pe),Ue.forEach(r),lt=v(N),se=o(N,"DIV",{class:!0});var je=i(se);We=_(je,qe),je.forEach(r),at=v(N),Q=o(N,"DIV",{class:!0});var ht=i(Q);He=_(ht,fe),ht.forEach(r),Me=v(N),re=o(N,"DIV",{class:!0});var Te=i(re);ye=_(Te,Ve),Te.forEach(r),Se=v(N),he=o(N,"DIV",{class:!0});var Et=i(he);ge=_(Et,H),Et.forEach(r),ut=v(N),g=o(N,"DIV",{class:!0});var nt=i(g);y=_(nt,C),nt.forEach(r),N.forEach(r),ot=v(c),ne=o(c,"DIV",{class:!0});var It=i(ne);rt=_(It,$e),It.forEach(r),Qe=v(c),c.forEach(r),this.h()},h(){a(d,"class","w-1/12 text-center mx-4"),a(I,"class","w-2/12"),a(G,"class","w-2/12 text-center flex items-center"),a(R,"class",q=`w-1/12 text-center ${t[21].appearance>0?"":"text-gray-500"}`),a(K,"class",z=`w-1/12 text-center ${t[21].highestScoringPlayerId===t[22]?.id?"":"text-gray-500"}`),a(X,"class",b=`w-1/12 text-center ${t[21].goals>0?"":"text-gray-500"}`),a(Ee,"class",Fe=`w-1/12 text-center ${t[21].assists>0?"":"text-gray-500"}`),a(A,"class",ke=`w-1/12 text-center ${t[21].penaltySaves>0?"":"text-gray-500"}`),a(ae,"class",Ye=`w-1/12 text-center ${t[21].cleanSheets>0?"":"text-gray-500"}`),a(De,"class",ze=`w-1/12 text-center ${t[21].saves>0?"":"text-gray-500"}`),a(se,"class",de=`w-1/12 text-center ${t[21].yellowCards>0?"":"text-gray-500"}`),a(Q,"class",Ke=`w-1/12 text-center ${t[21].ownGoals>0?"":"text-gray-500"}`),a(re,"class",Xe=`w-1/12 text-center ${t[21].goalsConceded>0?"":"text-gray-500"}`),a(he,"class",V=`w-1/12 text-center ${t[21].redCards>0?"":"text-gray-500"}`),a(g,"class",j=`w-1/12 text-center ${t[21].bonusPoints>0?"":"text-gray-500"}`),a(E,"class","w-1/2 flex"),a(ne,"class","w-1/12 text-center"),a(l,"class","flex items-center justify-between py-4 border-b border-gray-700 cursor-pointer")},m(h,c){Ct(h,l,c),e(l,d),e(d,f),e(l,p),e(l,I),k&&yt(k,I,null),e(I,S),e(I,U),e(l,J),e(l,G),yt(Y,G,null),e(G,Z),e(G,P),e(l,F),e(l,E),e(E,R),e(R,me),e(E,$),e(E,K),e(K,x),e(E,Je),e(E,X),e(X,Ae),e(E,te),e(E,Ee),e(Ee,pe),e(E,tt),e(E,A),e(A,Ie),e(E,st),e(E,ae),e(ae,Re),e(E,ce),e(E,De),e(De,be),e(E,lt),e(E,se),e(se,We),e(E,at),e(E,Q),e(Q,He),e(E,Me),e(E,re),e(re,ye),e(E,Se),e(E,he),e(he,ge),e(E,ut),e(E,g),e(g,y),e(l,ot),e(l,ne),e(ne,rt),e(l,Qe),w=!0},p(h,c){if((!w||c&32)&&s!==(s=ks(h[21].player.position)+"")&&O(f,s),c&32&&Ce!==(Ce=Ds(h[22]?.nationality??""))){if(k){Gt();const xe=k;Ge(xe.$$.fragment,1,0,()=>{xt(xe,1)}),At()}Ce?(k=xs(Ce,it()),bt(k.$$.fragment),ve(k.$$.fragment,1),yt(k,I,S)):k=null}(!w||c&32)&&B!==(B=h[22]&&h[22].firstName.length>2?h[22].firstName.substring(0,1)+"."+h[22].lastName:"")&&O(U,B);const Le={};c&32&&(Le.primaryColour=h[23]?.primaryColourHex),c&32&&(Le.secondaryColour=h[23]?.secondaryColourHex),c&32&&(Le.thirdColour=h[23]?.thirdColourHex),Y.$set(Le),(!w||c&32)&&T!==(T=h[23]?.friendlyName+"")&&O(P,T),(!w||c&32)&&ee!==(ee=h[21].appearance+"")&&O(me,ee),(!w||c&32&&q!==(q=`w-1/12 text-center ${h[21].appearance>0?"":"text-gray-500"}`))&&a(R,"class",q),(!w||c&32)&&L!==(L=(h[21].highestScoringPlayerId===h[22]?.id?1:0)+"")&&O(x,L),(!w||c&32&&z!==(z=`w-1/12 text-center ${h[21].highestScoringPlayerId===h[22]?.id?"":"text-gray-500"}`))&&a(K,"class",z),(!w||c&32)&&W!==(W=h[21].goals+"")&&O(Ae,W),(!w||c&32&&b!==(b=`w-1/12 text-center ${h[21].goals>0?"":"text-gray-500"}`))&&a(X,"class",b),(!w||c&32)&&we!==(we=h[21].assists+"")&&O(pe,we),(!w||c&32&&Fe!==(Fe=`w-1/12 text-center ${h[21].assists>0?"":"text-gray-500"}`))&&a(Ee,"class",Fe),(!w||c&32)&&le!==(le=h[21].penaltySaves+"")&&O(Ie,le),(!w||c&32&&ke!==(ke=`w-1/12 text-center ${h[21].penaltySaves>0?"":"text-gray-500"}`))&&a(A,"class",ke),(!w||c&32)&&_e!==(_e=h[21].cleanSheets+"")&&O(Re,_e),(!w||c&32&&Ye!==(Ye=`w-1/12 text-center ${h[21].cleanSheets>0?"":"text-gray-500"}`))&&a(ae,"class",Ye),(!w||c&32)&&Pe!==(Pe=h[21].saves+"")&&O(be,Pe),(!w||c&32&&ze!==(ze=`w-1/12 text-center ${h[21].saves>0?"":"text-gray-500"}`))&&a(De,"class",ze),(!w||c&32)&&qe!==(qe=h[21].yellowCards+"")&&O(We,qe),(!w||c&32&&de!==(de=`w-1/12 text-center ${h[21].yellowCards>0?"":"text-gray-500"}`))&&a(se,"class",de),(!w||c&32)&&fe!==(fe=h[21].ownGoals+"")&&O(He,fe),(!w||c&32&&Ke!==(Ke=`w-1/12 text-center ${h[21].ownGoals>0?"":"text-gray-500"}`))&&a(Q,"class",Ke),(!w||c&32)&&Ve!==(Ve=h[21].goalsConceded+"")&&O(ye,Ve),(!w||c&32&&Xe!==(Xe=`w-1/12 text-center ${h[21].goalsConceded>0?"":"text-gray-500"}`))&&a(re,"class",Xe),(!w||c&32)&&H!==(H=h[21].redCards+"")&&O(ge,H),(!w||c&32&&V!==(V=`w-1/12 text-center ${h[21].redCards>0?"":"text-gray-500"}`))&&a(he,"class",V),(!w||c&32)&&C!==(C=h[21].bonusPoints+"")&&O(y,C),(!w||c&32&&j!==(j=`w-1/12 text-center ${h[21].bonusPoints>0?"":"text-gray-500"}`))&&a(g,"class",j),(!w||c&32)&&$e!==($e=h[21].points+"")&&O(rt,$e)},i(h){w||(k&&ve(k.$$.fragment,h),ve(Y.$$.fragment,h),w=!0)},o(h){k&&Ge(k.$$.fragment,h),Ge(Y.$$.fragment,h),w=!1},d(h){h&&r(l),k&&xt(k),xt(Y)}}}function Xs(t){let l,d,s,f,p,I,k,S,B,U,J,G,Y,Z,T,P,F,E,R,ee,me,q,$,K,L,x,z,Je,X,W,Ae,b,te,Ee,we,pe,Fe,tt,A,le,Ie,ke,st,ae,_e,Re,Ye,ce,De,Pe,be,ze,lt,se,qe,We,de,at,Q,fe,He,Ke,Me,re,Ve,ye,Xe,Se,he=t[6],H=[];for(let g=0;g<he.length;g+=1)H[g]=$s(Ss(t,he,g));let ge=t[5],V=[];for(let g=0;g<ge.length;g+=1)V[g]=Cs(Vs(t,ge,g));const ut=g=>Ge(V[g],1,1,()=>{V[g]=null});return{c(){l=n("div"),d=n("div"),s=n("div"),f=n("button"),p=m("<"),k=u(),S=n("select");for(let g=0;g<H.length;g+=1)H[g].c();B=u(),U=n("button"),J=m(">"),Y=u(),Z=n("div"),T=n("div"),P=n("div"),F=n("div"),E=m("Position"),R=u(),ee=n("div"),me=m("Player"),q=u(),$=n("div"),K=m("Team"),L=u(),x=n("div"),z=n("div"),Je=m("A"),X=u(),W=n("div"),Ae=m("HSP"),b=u(),te=n("div"),Ee=m("GS"),we=u(),pe=n("div"),Fe=m("GA"),tt=u(),A=n("div"),le=m("PS"),Ie=u(),ke=n("div"),st=m("CS"),ae=u(),_e=n("div"),Re=m("KS"),Ye=u(),ce=n("div"),De=m("YC"),Pe=u(),be=n("div"),ze=m("OG"),lt=u(),se=n("div"),qe=m("GC"),We=u(),de=n("div"),at=m("RC"),Q=u(),fe=n("div"),He=m("B"),Ke=u(),Me=n("div"),re=m("PTS"),Ve=u();for(let g=0;g<V.length;g+=1)V[g].c();this.h()},l(g){l=o(g,"DIV",{class:!0});var C=i(l);d=o(C,"DIV",{class:!0});var y=i(d);s=o(y,"DIV",{class:!0});var j=i(s);f=o(j,"BUTTON",{class:!0});var ot=i(f);p=_(ot,"<"),ot.forEach(r),k=v(j),S=o(j,"SELECT",{class:!0});var ne=i(S);for(let Te=0;Te<H.length;Te+=1)H[Te].l(ne);ne.forEach(r),B=v(j),U=o(j,"BUTTON",{class:!0});var $e=i(U);J=_($e,">"),$e.forEach(r),j.forEach(r),y.forEach(r),Y=v(C),Z=o(C,"DIV",{class:!0});var rt=i(Z);T=o(rt,"DIV",{class:!0});var Qe=i(T);P=o(Qe,"DIV",{class:!0});var w=i(P);F=o(w,"DIV",{class:!0});var Ce=i(F);E=_(Ce,"Position"),Ce.forEach(r),R=v(w),ee=o(w,"DIV",{class:!0});var it=i(ee);me=_(it,"Player"),it.forEach(r),q=v(w),$=o(w,"DIV",{class:!0});var h=i($);K=_(h,"Team"),h.forEach(r),L=v(w),x=o(w,"DIV",{class:!0});var c=i(x);z=o(c,"DIV",{class:!0});var Le=i(z);Je=_(Le,"A"),Le.forEach(r),X=v(c),W=o(c,"DIV",{class:!0});var xe=i(W);Ae=_(xe,"HSP"),xe.forEach(r),b=v(c),te=o(c,"DIV",{class:!0});var Ze=i(te);Ee=_(Ze,"GS"),Ze.forEach(r),we=v(c),pe=o(c,"DIV",{class:!0});var N=i(pe);Fe=_(N,"GA"),N.forEach(r),tt=v(c),A=o(c,"DIV",{class:!0});var vt=i(A);le=_(vt,"PS"),vt.forEach(r),Ie=v(c),ke=o(c,"DIV",{class:!0});var et=i(ke);st=_(et,"CS"),et.forEach(r),ae=v(c),_e=o(c,"DIV",{class:!0});var mt=i(_e);Re=_(mt,"KS"),mt.forEach(r),Ye=v(c),ce=o(c,"DIV",{class:!0});var _t=i(ce);De=_(_t,"YC"),_t.forEach(r),Pe=v(c),be=o(c,"DIV",{class:!0});var Oe=i(be);ze=_(Oe,"OG"),Oe.forEach(r),lt=v(c),se=o(c,"DIV",{class:!0});var Be=i(se);qe=_(Be,"GC"),Be.forEach(r),We=v(c),de=o(c,"DIV",{class:!0});var Ue=i(de);at=_(Ue,"RC"),Ue.forEach(r),Q=v(c),fe=o(c,"DIV",{class:!0});var je=i(fe);He=_(je,"B"),je.forEach(r),c.forEach(r),Ke=v(w),Me=o(w,"DIV",{class:!0});var ht=i(Me);re=_(ht,"PTS"),ht.forEach(r),w.forEach(r),Ve=v(Qe);for(let Te=0;Te<V.length;Te+=1)V[Te].l(Qe);Qe.forEach(r),rt.forEach(r),C.forEach(r),this.h()},h(){a(f,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1"),f.disabled=I=t[0]===1,a(S,"class","p-2 fpl-dropdown text-xs md:text-base text-center mx-0 md:mx-2 min-w-[150px] sm:min-w-[100px]"),t[0]===void 0&&Fs(()=>t[13].call(S)),a(U,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1 ml-1"),U.disabled=G=t[0]===38,a(s,"class","flex items-center space-x-2"),a(d,"class","flex flex-col sm:flex-row gap-4 sm:gap-8"),a(F,"class","w-1/12 text-center mx-4"),a(ee,"class","w-2/12"),a($,"class","w-2/12 text-center"),a(z,"class","w-1/12 text-center"),a(W,"class","w-1/12 text-center"),a(te,"class","w-1/12 text-center"),a(pe,"class","w-1/12 text-center"),a(A,"class","w-1/12 text-center"),a(ke,"class","w-1/12 text-center"),a(_e,"class","w-1/12 text-center"),a(ce,"class","w-1/12 text-center"),a(be,"class","w-1/12 text-center"),a(se,"class","w-1/12 text-center"),a(de,"class","w-1/12 text-center"),a(fe,"class","w-1/12 text-center"),a(x,"class","w-1/2 flex"),a(Me,"class","w-1/12 text-center"),a(P,"class","flex justify-between p-2 border border-gray-700 py-4 bg-light-gray"),a(T,"class","overflow-x-auto flex-1"),a(Z,"class","flex flex-col space-y-4 mt-4 text-lg"),a(l,"class","mx-5 my-4")},m(g,C){Ct(g,l,C),e(l,d),e(d,s),e(s,f),e(f,p),e(s,k),e(s,S);for(let y=0;y<H.length;y+=1)H[y]&&H[y].m(S,null);bs(S,t[0],!0),e(s,B),e(s,U),e(U,J),e(l,Y),e(l,Z),e(Z,T),e(T,P),e(P,F),e(F,E),e(P,R),e(P,ee),e(ee,me),e(P,q),e(P,$),e($,K),e(P,L),e(P,x),e(x,z),e(z,Je),e(x,X),e(x,W),e(W,Ae),e(x,b),e(x,te),e(te,Ee),e(x,we),e(x,pe),e(pe,Fe),e(x,tt),e(x,A),e(A,le),e(x,Ie),e(x,ke),e(ke,st),e(x,ae),e(x,_e),e(_e,Re),e(x,Ye),e(x,ce),e(ce,De),e(x,Pe),e(x,be),e(be,ze),e(x,lt),e(x,se),e(se,qe),e(x,We),e(x,de),e(de,at),e(x,Q),e(x,fe),e(fe,He),e(P,Ke),e(P,Me),e(Me,re),e(T,Ve);for(let y=0;y<V.length;y+=1)V[y]&&V[y].m(T,null);ye=!0,Xe||(Se=[Nt(f,"click",t[12]),Nt(S,"change",t[13]),Nt(U,"click",t[14])],Xe=!0)},p(g,[C]){if((!ye||C&65&&I!==(I=g[0]===1))&&(f.disabled=I),C&64){he=g[6];let y;for(y=0;y<he.length;y+=1){const j=Ss(g,he,y);H[y]?H[y].p(j,C):(H[y]=$s(j),H[y].c(),H[y].m(S,null))}for(;y<H.length;y+=1)H[y].d(1);H.length=he.length}if(C&65&&bs(S,g[0]),(!ye||C&65&&G!==(G=g[0]===38))&&(U.disabled=G),C&800){ge=g[5];let y;for(y=0;y<ge.length;y+=1){const j=Vs(g,ge,y);V[y]?(V[y].p(j,C),ve(V[y],1)):(V[y]=Cs(j),V[y].c(),ve(V[y],1),V[y].m(T,null))}for(Gt(),y=ge.length;y<V.length;y+=1)ut(y);At()}},i(g){if(!ye){for(let C=0;C<ge.length;C+=1)ve(V[C]);ye=!0}},o(g){V=V.filter(Boolean);for(let C=0;C<V.length;C+=1)Ge(V[C]);ye=!1},d(g){g&&r(l),ys(H,g),ys(V,g),Xe=!1,Bs(Se)}}}function Qs(t,l,d){let s,f=Tt,p=()=>(f(),f=zt(T,b=>d(18,s=b)),T),I,k=Tt,S=()=>(k(),k=zt(P,b=>d(19,I=b)),P),B,U=Tt,J=()=>(U(),U=zt(K,b=>d(10,B=b)),K),G,Y=Tt,Z=()=>(Y(),Y=zt(F,b=>d(11,G=b)),F);t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>k()),t.$$.on_destroy.push(()=>U()),t.$$.on_destroy.push(()=>Y());let{teams:T=Wt([])}=l;p();let{players:P=Wt([])}=l;S();let{systemState:F=Wt(null)}=l;Z();let E,R,ee,me=[],q=Array.from({length:38},(b,te)=>te+1),{selectedGameweek:$}=l,{fantasyTeam:K}=l;J(),Us(async()=>{try{await Xt.sync(),await Qt.sync(),await ls.sync(),E=Xt.subscribe(b=>{F.set(b)}),R=Qt.subscribe(b=>{T.set(b)}),ee=ls.subscribe(b=>{P.set(b)})}catch(b){as.show("Error fetching manager gameweek detail.","error"),console.error("Error fetching manager gameweek detail:",b)}});async function L(){try{d(5,me=await ls.getGameweekPlayers(B,$))}catch(b){as.show("Error updating gameweek players.","error"),console.error("Error updating gameweek players:",b)}}js(()=>{R?.(),ee?.(),E?.()});const x=b=>{d(0,$=Math.max(1,Math.min(38,$+b)))};function z(b){return I.find(te=>te.id===b)??null}function Je(b){return s.find(te=>te.id===b)??null}const X=()=>x(-1);function W(){$=Rs(this),d(0,$),d(11,G),d(6,q)}const Ae=()=>x(1);return t.$$set=b=>{"teams"in b&&p(d(1,T=b.teams)),"players"in b&&S(d(2,P=b.players)),"systemState"in b&&Z(d(3,F=b.systemState)),"selectedGameweek"in b&&d(0,$=b.selectedGameweek),"fantasyTeam"in b&&J(d(4,K=b.fantasyTeam))},t.$$.update=()=>{t.$$.dirty&2049&&G&&d(0,$=G?.activeGameweek??$),t.$$.dirty&1024&&B&&L()},[$,T,P,F,K,me,q,x,z,Je,B,G,X,W,Ae]}class Zs extends Ms{constructor(l){super(),Ls(this,l,Qs,Xs,Os,{teams:1,players:2,systemState:3,selectedGameweek:0,fantasyTeam:4})}}function Ts(t){let l,d,s,f,p,I,k,S,B,U,J,G,Y,Z,T,P=t[1].displayName+"",F,E,R,ee,me,q,$,K,L,x,z,Je,X,W,Ae,b=t[4]?.abbreviatedName+"",te,Ee,we,pe=t[4]?.name+"",Fe,tt,A,le,Ie,ke,st,ae,_e=t[1].weeklyPositionText+"",Re,Ye,ce,De,Pe=t[1].weeklyPoints.toLocaleString()+"",be,ze,lt,se,qe,We,de,at,Q,fe,He=t[4]?.friendlyName+"",Ke,Me,re,Ve=t[1].monthlyPositionText+"",ye,Xe,Se,he,H=t[1].monthlyPoints.toLocaleString()+"",ge,V,ut,g,C,y,j,ot,ne,$e,rt,Qe,w,Ce=t[1].seasonPositionText+"",it,h,c,Le,xe=t[1].seasonPoints.toLocaleString()+"",Ze,N,vt,et,mt,_t,Oe,Be,Ue,je,ht,Te,Et,nt,It,Ht,Zt,wt,es,ct,Mt,ue,ts,rs;W=new Js({props:{className:"w-7 mr-2",primaryColour:t[4]?.primaryColourHex,secondaryColour:t[4]?.secondaryColourHex,thirdColour:t[4]?.thirdColourHex}});let Ne=t[0]==="details"&&Ns(),oe=t[0]==="details"&&Gs(t),ie=t[0]==="gameweeks"&&As(t);return{c(){l=n("div"),d=n("div"),s=n("div"),f=n("div"),p=n("img"),S=u(),B=n("div"),U=u(),J=n("div"),G=n("p"),Y=m("Manager"),Z=u(),T=n("p"),F=m(P),E=u(),R=n("p"),ee=m("Joined: "),me=m(t[2]),q=u(),$=n("div"),K=u(),L=n("div"),x=n("p"),z=m("Favourite Team"),Je=u(),X=n("p"),bt(W.$$.fragment),Ae=u(),te=m(b),Ee=u(),we=n("p"),Fe=m(pe),tt=u(),A=n("div"),le=n("div"),Ie=n("p"),ke=m("Leaderboards"),st=u(),ae=n("p"),Re=m(_e),Ye=u(),ce=n("span"),De=m("("),be=m(Pe),ze=m(")"),lt=u(),se=n("p"),qe=m("Weekly"),We=u(),de=n("div"),at=u(),Q=n("div"),fe=n("p"),Ke=m(He),Me=u(),re=n("p"),ye=m(Ve),Xe=u(),Se=n("span"),he=m("("),ge=m(H),V=m(")"),ut=u(),g=n("p"),C=m("Club"),y=u(),j=n("div"),ot=u(),ne=n("div"),$e=n("p"),rt=m(Hs),Qe=u(),w=n("p"),it=m(Ce),h=u(),c=n("span"),Le=m("("),Ze=m(xe),N=m(")"),vt=u(),et=n("p"),mt=m("Season"),_t=u(),Oe=n("div"),Be=n("div"),Ue=n("div"),je=n("button"),ht=m("Details"),Et=u(),nt=n("button"),It=m("Gameweeks"),Zt=u(),wt=n("div"),Ne&&Ne.c(),es=u(),ct=n("div"),oe&&oe.c(),Mt=u(),ie&&ie.c(),this.h()},l(D){l=o(D,"DIV",{class:!0});var M=i(l);d=o(M,"DIV",{class:!0});var pt=i(d);s=o(pt,"DIV",{class:!0});var dt=i(s);f=o(dt,"DIV",{class:!0});var ns=i(f);p=o(ns,"IMG",{class:!0,src:!0,alt:!0}),ns.forEach(r),S=v(dt),B=o(dt,"DIV",{class:!0,style:!0}),i(B).forEach(r),U=v(dt),J=o(dt,"DIV",{class:!0});var kt=i(J);G=o(kt,"P",{class:!0});var os=i(G);Y=_(os,"Manager"),os.forEach(r),Z=v(kt),T=o(kt,"P",{class:!0});var is=i(T);F=_(is,P),is.forEach(r),E=v(kt),R=o(kt,"P",{class:!0});var ss=i(R);ee=_(ss,"Joined: "),me=_(ss,t[2]),ss.forEach(r),kt.forEach(r),q=v(dt),$=o(dt,"DIV",{class:!0,style:!0}),i($).forEach(r),K=v(dt),L=o(dt,"DIV",{class:!0});var Dt=i(L);x=o(Dt,"P",{class:!0});var cs=i(x);z=_(cs,"Favourite Team"),cs.forEach(r),Je=v(Dt),X=o(Dt,"P",{class:!0});var Lt=i(X);$t(W.$$.fragment,Lt),Ae=v(Lt),te=_(Lt,b),Lt.forEach(r),Ee=v(Dt),we=o(Dt,"P",{class:!0});var ds=i(we);Fe=_(ds,pe),ds.forEach(r),Dt.forEach(r),dt.forEach(r),tt=v(pt),A=o(pt,"DIV",{class:!0});var ft=i(A);le=o(ft,"DIV",{class:!0});var Pt=i(le);Ie=o(Pt,"P",{class:!0});var fs=i(Ie);ke=_(fs,"Leaderboards"),fs.forEach(r),st=v(Pt),ae=o(Pt,"P",{class:!0});var Ot=i(ae);Re=_(Ot,_e),Ye=v(Ot),ce=o(Ot,"SPAN",{class:!0});var Bt=i(ce);De=_(Bt,"("),be=_(Bt,Pe),ze=_(Bt,")"),Bt.forEach(r),Ot.forEach(r),lt=v(Pt),se=o(Pt,"P",{class:!0});var us=i(se);qe=_(us,"Weekly"),us.forEach(r),Pt.forEach(r),We=v(ft),de=o(ft,"DIV",{class:!0,style:!0}),i(de).forEach(r),at=v(ft),Q=o(ft,"DIV",{class:!0});var Vt=i(Q);fe=o(Vt,"P",{class:!0});var vs=i(fe);Ke=_(vs,He),vs.forEach(r),Me=v(Vt),re=o(Vt,"P",{class:!0});var Ut=i(re);ye=_(Ut,Ve),Xe=v(Ut),Se=o(Ut,"SPAN",{class:!0});var jt=i(Se);he=_(jt,"("),ge=_(jt,H),V=_(jt,")"),jt.forEach(r),Ut.forEach(r),ut=v(Vt),g=o(Vt,"P",{class:!0});var ms=i(g);C=_(ms,"Club"),ms.forEach(r),Vt.forEach(r),y=v(ft),j=o(ft,"DIV",{class:!0,style:!0}),i(j).forEach(r),ot=v(ft),ne=o(ft,"DIV",{class:!0});var St=i(ne);$e=o(St,"P",{class:!0});var _s=i($e);rt=_(_s,Hs),_s.forEach(r),Qe=v(St),w=o(St,"P",{class:!0});var Jt=i(w);it=_(Jt,Ce),h=v(Jt),c=o(Jt,"SPAN",{class:!0});var Ft=i(c);Le=_(Ft,"("),Ze=_(Ft,xe),N=_(Ft,")"),Ft.forEach(r),Jt.forEach(r),vt=v(St),et=o(St,"P",{class:!0});var hs=i(et);mt=_(hs,"Season"),hs.forEach(r),St.forEach(r),ft.forEach(r),pt.forEach(r),_t=v(M),Oe=o(M,"DIV",{class:!0});var Rt=i(Oe);Be=o(Rt,"DIV",{class:!0});var qt=i(Be);Ue=o(qt,"DIV",{class:!0});var Kt=i(Ue);je=o(Kt,"BUTTON",{class:!0});var ps=i(je);ht=_(ps,"Details"),ps.forEach(r),Et=v(Kt),nt=o(Kt,"BUTTON",{class:!0});var gs=i(nt);It=_(gs,"Gameweeks"),gs.forEach(r),Kt.forEach(r),Zt=v(qt),wt=o(qt,"DIV",{class:!0});var ws=i(wt);Ne&&Ne.l(ws),ws.forEach(r),qt.forEach(r),es=v(Rt),ct=o(Rt,"DIV",{class:!0});var Yt=i(ct);oe&&oe.l(Yt),Mt=v(Yt),ie&&ie.l(Yt),Yt.forEach(r),Rt.forEach(r),M.forEach(r),this.h()},h(){a(p,"class","w-20"),Is(p.src,I=t[3])||a(p,"src",I),a(p,"alt",k=t[1].displayName),a(f,"class","flex"),a(B,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(B,"min-width","2px"),gt(B,"min-height","50px"),a(G,"class","text-gray-300 text-xs"),a(T,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),a(R,"class","text-gray-300 text-xs"),a(J,"class","flex-grow"),a($,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt($,"min-width","2px"),gt($,"min-height","50px"),a(x,"class","text-gray-300 text-xs"),a(X,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold flex items-center"),a(we,"class","text-gray-300 text-xs"),a(L,"class","flex-grow"),a(s,"class","flex justify-start items-center text-white space-x-4 flex-grow m-4 bg-panel p-4 rounded-md"),a(Ie,"class","text-gray-300 text-xs"),a(ce,"class","text-xs"),a(ae,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),a(se,"class","text-gray-300 text-xs"),a(le,"class","flex-grow"),a(de,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(de,"min-width","2px"),gt(de,"min-height","50px"),a(fe,"class","text-gray-300 text-xs"),a(Se,"class","text-xs"),a(re,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),a(g,"class","text-gray-300 text-xs"),a(Q,"class","flex-grow"),a(j,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(j,"min-width","2px"),gt(j,"min-height","50px"),a($e,"class","text-gray-300 text-xs"),a(c,"class","text-xs"),a(w,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),a(et,"class","text-gray-300 text-xs"),a(ne,"class","flex-grow"),a(A,"class","flex justify-start items-center text-white space-x-4 flex-grow m-4 bg-panel p-4 rounded-md"),a(d,"class","flex flex-col md:flex-row"),a(je,"class",Te=`btn ${t[0]==="details"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-l-md font-bold text-md min-w-[125px]`),a(nt,"class",Ht=`btn ${t[0]==="gameweeks"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-r-md font-bold text-md min-w-[125px]`),a(Ue,"class","flex"),a(wt,"class","px-4"),a(Be,"class","flex justify-between items-center text-white px-4 pt-4 rounded-md w-full"),a(ct,"class","w-full"),a(Oe,"class","flex flex-col bg-panel m-4 rounded-md"),a(l,"class","m-4")},m(D,M){Ct(D,l,M),e(l,d),e(d,s),e(s,f),e(f,p),e(s,S),e(s,B),e(s,U),e(s,J),e(J,G),e(G,Y),e(J,Z),e(J,T),e(T,F),e(J,E),e(J,R),e(R,ee),e(R,me),e(s,q),e(s,$),e(s,K),e(s,L),e(L,x),e(x,z),e(L,Je),e(L,X),yt(W,X,null),e(X,Ae),e(X,te),e(L,Ee),e(L,we),e(we,Fe),e(d,tt),e(d,A),e(A,le),e(le,Ie),e(Ie,ke),e(le,st),e(le,ae),e(ae,Re),e(ae,Ye),e(ae,ce),e(ce,De),e(ce,be),e(ce,ze),e(le,lt),e(le,se),e(se,qe),e(A,We),e(A,de),e(A,at),e(A,Q),e(Q,fe),e(fe,Ke),e(Q,Me),e(Q,re),e(re,ye),e(re,Xe),e(re,Se),e(Se,he),e(Se,ge),e(Se,V),e(Q,ut),e(Q,g),e(g,C),e(A,y),e(A,j),e(A,ot),e(A,ne),e(ne,$e),e($e,rt),e(ne,Qe),e(ne,w),e(w,it),e(w,h),e(w,c),e(c,Le),e(c,Ze),e(c,N),e(ne,vt),e(ne,et),e(et,mt),e(l,_t),e(l,Oe),e(Oe,Be),e(Be,Ue),e(Ue,je),e(je,ht),e(Ue,Et),e(Ue,nt),e(nt,It),e(Be,Zt),e(Be,wt),Ne&&Ne.m(wt,null),e(Oe,es),e(Oe,ct),oe&&oe.m(ct,null),e(ct,Mt),ie&&ie.m(ct,null),ue=!0,ts||(rs=[Nt(je,"click",t[11]),Nt(nt,"click",t[12])],ts=!0)},p(D,M){(!ue||M&8&&!Is(p.src,I=D[3]))&&a(p,"src",I),(!ue||M&2&&k!==(k=D[1].displayName))&&a(p,"alt",k),(!ue||M&2)&&P!==(P=D[1].displayName+"")&&O(F,P),(!ue||M&4)&&O(me,D[2]);const pt={};M&16&&(pt.primaryColour=D[4]?.primaryColourHex),M&16&&(pt.secondaryColour=D[4]?.secondaryColourHex),M&16&&(pt.thirdColour=D[4]?.thirdColourHex),W.$set(pt),(!ue||M&16)&&b!==(b=D[4]?.abbreviatedName+"")&&O(te,b),(!ue||M&16)&&pe!==(pe=D[4]?.name+"")&&O(Fe,pe),(!ue||M&2)&&_e!==(_e=D[1].weeklyPositionText+"")&&O(Re,_e),(!ue||M&2)&&Pe!==(Pe=D[1].weeklyPoints.toLocaleString()+"")&&O(be,Pe),(!ue||M&16)&&He!==(He=D[4]?.friendlyName+"")&&O(Ke,He),(!ue||M&2)&&Ve!==(Ve=D[1].monthlyPositionText+"")&&O(ye,Ve),(!ue||M&2)&&H!==(H=D[1].monthlyPoints.toLocaleString()+"")&&O(ge,H),(!ue||M&2)&&Ce!==(Ce=D[1].seasonPositionText+"")&&O(it,Ce),(!ue||M&2)&&xe!==(xe=D[1].seasonPoints.toLocaleString()+"")&&O(Ze,xe),(!ue||M&1&&Te!==(Te=`btn ${D[0]==="details"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-l-md font-bold text-md min-w-[125px]`))&&a(je,"class",Te),(!ue||M&1&&Ht!==(Ht=`btn ${D[0]==="gameweeks"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-r-md font-bold text-md min-w-[125px]`))&&a(nt,"class",Ht),D[0]==="details"?Ne||(Ne=Ns(),Ne.c(),Ne.m(wt,null)):Ne&&(Ne.d(1),Ne=null),D[0]==="details"?oe?(oe.p(D,M),M&1&&ve(oe,1)):(oe=Gs(D),oe.c(),ve(oe,1),oe.m(ct,Mt)):oe&&(Gt(),Ge(oe,1,1,()=>{oe=null}),At()),D[0]==="gameweeks"?ie?(ie.p(D,M),M&1&&ve(ie,1)):(ie=As(D),ie.c(),ve(ie,1),ie.m(ct,null)):ie&&(Gt(),Ge(ie,1,1,()=>{ie=null}),At())},i(D){ue||(ve(W.$$.fragment,D),ve(oe),ve(ie),ue=!0)},o(D){Ge(W.$$.fragment,D),Ge(oe),Ge(ie),ue=!1},d(D){D&&r(l),xt(W),Ne&&Ne.d(),oe&&oe.d(),ie&&ie.d(),ts=!1,Bs(rs)}}}function Ns(t){let l,d,s="0",f;return{c(){l=n("span"),d=m("Total Points: "),f=m(s),this.h()},l(p){l=o(p,"SPAN",{class:!0});var I=i(l);d=_(I,"Total Points: "),f=_(I,s),I.forEach(r),this.h()},h(){a(l,"class","text-2xl")},m(p,I){Ct(p,l,I),e(l,d),e(l,f)},d(p){p&&r(l)}}}function Gs(t){let l,d;return l=new Zs({props:{selectedGameweek:t[6],fantasyTeam:t[7]}}),{c(){bt(l.$$.fragment)},l(s){$t(l.$$.fragment,s)},m(s,f){yt(l,s,f),d=!0},p(s,f){const p={};f&64&&(p.selectedGameweek=s[6]),l.$set(p)},i(s){d||(ve(l.$$.fragment,s),d=!0)},o(s){Ge(l.$$.fragment,s),d=!1},d(s){xt(l,s)}}}function As(t){let l,d;return l=new Ws({props:{viewGameweekDetail:t[9],principalId:t[1].principalId}}),{c(){bt(l.$$.fragment)},l(s){$t(l.$$.fragment,s)},m(s,f){yt(l,s,f),d=!0},p(s,f){const p={};f&2&&(p.principalId=s[1].principalId),l.$set(p)},i(s){d||(ve(l.$$.fragment,s),d=!0)},o(s){Ge(l.$$.fragment,s),d=!1},d(s){xt(l,s)}}}function el(t){let l,d,s=t[5]&&Ts(t);return{c(){s&&s.c(),l=Es()},l(f){s&&s.l(f),l=Es()},m(f,p){s&&s.m(f,p),Ct(f,l,p),d=!0},p(f,p){f[5]?s?(s.p(f,p),p&32&&ve(s,1)):(s=Ts(f),s.c(),ve(s,1),s.m(l.parentNode,l)):s&&(Gt(),Ge(s,1,1,()=>{s=null}),At())},i(f){d||(ve(s),d=!0)},o(f){Ge(s),d=!1},d(f){s&&s.d(f),f&&r(l)}}}function tl(t){let l,d;return l=new zs({props:{$$slots:{default:[el]},$$scope:{ctx:t}}}),{c(){bt(l.$$.fragment)},l(s){$t(l.$$.fragment,s)},m(s,f){yt(l,s,f),d=!0},p(s,[f]){const p={};f&524415&&(p.$$scope={dirty:f,ctx:s}),l.$set(p)},i(s){d||(ve(l.$$.fragment,s),d=!0)},o(s){Ge(l.$$.fragment,s),d=!1},d(s){xt(l,s)}}}let Hs="";function sl(t,l,d){let s,f,p,I;qs(t,Ks,q=>d(10,I=q));let k="details",S,B="",U,J,G=null,Y=Wt(null),Z,T,P,F=!1;Us(async()=>{Ps.set(!0);try{await Xt.sync(),await Qt.sync(),T=Xt.subscribe(z=>{Z=z}),P=Qt.subscribe(z=>{J=z}),d(1,S=await Ys.getManager(f??"",Z?.activeSeason.id??1,p&&p>0?p:Z?.activeGameweek??1));const q=new Blob([new Uint8Array(S.profilePicture)]),$=S.profilePicture.length>0?URL.createObjectURL(q):"profile_placeholder.png";d(3,U=$);const K=Number(S.createDate/1000000n),L=new Date(K);d(2,B=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][L.getUTCMonth()]} ${L.getUTCFullYear()}`),d(4,G=S.favouriteTeamId>0?J.find(z=>z.id==S.favouriteTeamId)??null:null)}catch(q){as.show("Error fetching manager details.","error"),console.error("Error fetching manager details:",q)}finally{Ps.set(!1),d(5,F=!0)}}),js(()=>{P?.(),T?.()});function E(q){d(0,k=q)}function R(q,$){let K=S.gameweeks.find(L=>L.gameweek===$);Y.set(K),E("details")}const ee=()=>E("details"),me=()=>E("gameweeks");return t.$$.update=()=>{t.$$.dirty&1024&&(f=I.url.searchParams.get("id")),t.$$.dirty&1024&&(p=Number(I.url.searchParams.get("gw"))??0)},d(6,s=1),[k,S,B,U,G,F,s,Y,E,R,I,ee,me]}class ul extends Ms{constructor(l){super(),Ls(this,l,sl,tl,Os,{})}}export{ul as component};
