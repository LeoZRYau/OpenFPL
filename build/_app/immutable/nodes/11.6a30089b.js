import{S as Ge,i as je,s as We,a0 as lt,a1 as st,m as f,h as n,n as o,U as Re,p as Ce,b as ue,G as l,L as Y,H as Ee,e as Oe,k as u,q as S,a as D,l as d,r as R,c as P,V as ft,Q as et,a6 as It,R as wt,N as at,T as Et,o as ot,O as yt,J as Tt,K as mt,M as Nt,u as Ze,P as kt,v as it,d as ne,f as nt,g as le,I as rt,w as Dt,y as Ae,z as Me,$ as Se,A as Ue,B as Le}from"../chunks/index.c7b38e5e.js";import{l as qe,L as Pt,a as Ct,i as At,g as Mt}from"../chunks/Layout.b02e4571.js";import{M as Ut}from"../chunks/manager-gameweeks.cee1372f.js";import{a as Je,t as ye}from"../chunks/toast-store.d087d6cb.js";import{w as $e}from"../chunks/index.8caf67b2.js";import{A as Qe,t as tt}from"../chunks/team-store.ca59477e.js";import{s as _t}from"../chunks/system-store.bab4432e.js";function Lt(){const{subscribe:s,set:e,update:t}=$e(null);async function a(c){try{return await(await Qe.createIdentityActor(Je,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateDisplayName(c)}catch(r){throw console.error("Error updating username:",r),r}}async function i(c){try{return await(await Qe.createIdentityActor(Je,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateFavouriteTeam(c)}catch(r){throw console.error("Error updating favourite team:",r),r}}async function m(){try{const r=await(await Qe.createIdentityActor(Je,"bboqb-jiaaa-aaaal-qb6ea-cai")).getProfileDTO();return e(r),r}catch(c){throw console.error("Error getting profile:",c),c}}async function p(c){try{if(c.size>1e3*1024)return null;const h=new FileReader;h.readAsArrayBuffer(c),h.onloadend=async()=>{const E=h.result,b=new Uint8Array(E);try{return await(await Qe.createIdentityActor(Je,"bboqb-jiaaa-aaaal-qb6ea-cai")).updateProfilePicture(b)}catch(I){console.error(I)}}}catch(r){throw console.error("Error updating username:",r),r}}return{subscribe:s,updateUsername:a,updateFavouriteTeam:i,getProfile:m,updateProfilePicture:p}}const Pe=Lt();function Ft(s){let e,t,a,i,m,p;return{c(){e=lt("svg"),t=lt("path"),a=lt("path"),this.h()},l(c){e=st(c,"svg",{xmlns:!0,"aria-hidden":!0,class:!0,fill:!0,viewBox:!0,style:!0});var r=f(e);t=st(r,"path",{d:!0}),f(t).forEach(n),a=st(r,"path",{d:!0}),f(a).forEach(n),r.forEach(n),this.h()},h(){o(t,"d","M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499L12.136.326zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484L5.562 3zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"),o(a,"d","M3.5 2a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5h-9zM2 2.5A1.5 1.5 0 0 1 3.5 1h9A1.5 1.5 0 0 1 14 2.5v10a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 12.5v-10zm9.5 3A1.5 1.5 0 0 1 13 7h1.5V3.5a1.5 1.5 0 0 0-1.5-1.5H9V4a1.5 1.5 0 0 1 1.5 1.5v1zm0 1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"aria-hidden","true"),o(e,"class",i=Re(s[0])+" svelte-1qbujws"),o(e,"fill","currentColor"),o(e,"viewBox","0 0 16 16"),Ce(e,"--hover-color",s[3]),Ce(e,"cursor","'pointer'")},m(c,r){ue(c,e,r),l(e,t),l(e,a),m||(p=Y(e,"click",s[4]),m=!0)},p(c,[r]){r&1&&i!==(i=Re(c[0])+" svelte-1qbujws")&&o(e,"class",i),r&8&&Ce(e,"--hover-color",c[3])},i:Ee,o:Ee,d(c){c&&n(e),m=!1,p()}}}function St(s,e,t){let{className:a=""}=e,{principalId:i=""}=e,{onClick:m}=e,{hoverColor:p="red"}=e;const c=()=>m(i);return s.$$set=r=>{"className"in r&&t(0,a=r.className),"principalId"in r&&t(1,i=r.principalId),"onClick"in r&&t(2,m=r.onClick),"hoverColor"in r&&t(3,p=r.hoverColor)},[a,i,m,p,c]}class Rt extends Ge{constructor(e){super(),je(this,e,St,Ft,We,{className:0,principalId:1,onClick:2,hoverColor:3})}}function pt(s){let e,t,a,i,m,p,c,r,h,E,b,I,w,g,v,T,C,q,V;return{c(){e=u("div"),t=u("div"),a=u("div"),i=u("h3"),m=S("Update Display Name"),p=D(),c=u("form"),r=u("div"),h=u("input"),E=D(),b=u("div"),I=u("button"),w=S("Cancel"),g=D(),v=u("button"),T=S("Use"),this.h()},l(B){e=d(B,"DIV",{class:!0});var z=f(e);t=d(z,"DIV",{class:!0});var U=f(t);a=d(U,"DIV",{class:!0});var F=f(a);i=d(F,"H3",{class:!0});var A=f(i);m=R(A,"Update Display Name"),A.forEach(n),p=P(F),c=d(F,"FORM",{});var M=f(c);r=d(M,"DIV",{class:!0});var O=f(r);h=d(O,"INPUT",{type:!0,class:!0,placeholder:!0}),O.forEach(n),E=P(M),b=d(M,"DIV",{class:!0});var x=f(b);I=d(x,"BUTTON",{class:!0});var G=f(I);w=R(G,"Cancel"),G.forEach(n),g=P(x),v=d(x,"BUTTON",{class:!0,type:!0});var _=f(v);T=R(_,"Use"),_.forEach(n),x.forEach(n),M.forEach(n),F.forEach(n),U.forEach(n),z.forEach(n),this.h()},h(){o(i,"class","text-lg leading-6 font-medium mb-2"),o(h,"type","text"),o(h,"class","w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black"),o(h,"placeholder","New Username"),o(r,"class","mt-4"),o(I,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),o(v,"class",C=Re(`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),o(v,"type","submit"),v.disabled=s[3],o(b,"class","items-center py-3 flex space-x-4"),o(a,"class","mt-3 text-center"),o(t,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),o(e,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(B,z){ue(B,e,z),l(e,t),l(t,a),l(a,i),l(i,m),l(a,p),l(a,c),l(c,r),l(r,h),ft(h,s[0]),l(c,E),l(c,b),l(b,I),l(I,w),l(b,g),l(b,v),l(v,T),q||(V=[Y(h,"input",s[9]),Y(I,"click",function(){et(s[2])&&s[2].apply(this,arguments)}),Y(c,"submit",It(s[4])),Y(t,"click",wt(s[8])),Y(t,"keydown",s[5]),Y(e,"click",function(){et(s[2])&&s[2].apply(this,arguments)}),Y(e,"keydown",s[5])],q=!0)},p(B,z){s=B,z&1&&h.value!==s[0]&&ft(h,s[0]),z&8&&C!==(C=Re(`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&o(v,"class",C),z&8&&(v.disabled=s[3])},d(B){B&&n(e),q=!1,at(V)}}}function Ot(s){let e,t=s[1]&&pt(s);return{c(){t&&t.c(),e=Oe()},l(a){t&&t.l(a),e=Oe()},m(a,i){t&&t.m(a,i),ue(a,e,i)},p(a,[i]){a[1]?t?t.p(a,i):(t=pt(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(a){t&&t.d(a),a&&n(e)}}}function qt(s){return s.length<3||s.length>20?!1:/^[a-zA-Z0-9 ]+$/.test(s)}function Vt(s,e,t){let a,{showModal:i}=e,{closeModal:m}=e,{cancelModal:p}=e,{newUsername:c=""}=e,{isLoading:r}=e;async function h(){r.set(!0),qe.set("Updating Display Name");try{await Pe.updateUsername(c),await m(),ye.show("Display name updated.","success")}catch(w){ye.show("Error updating username.","error"),console.error("Error updating username:",w),p()}finally{r.set(!1),qe.set("Loading")}}function E(w){!(w.target instanceof HTMLInputElement)&&w.key==="Escape"&&m()}function b(w){Et.call(this,s,w)}function I(){c=this.value,t(0,c)}return s.$$set=w=>{"showModal"in w&&t(1,i=w.showModal),"closeModal"in w&&t(6,m=w.closeModal),"cancelModal"in w&&t(2,p=w.cancelModal),"newUsername"in w&&t(0,c=w.newUsername),"isLoading"in w&&t(7,r=w.isLoading)},s.$$.update=()=>{s.$$.dirty&1&&t(3,a=!qt(c))},[c,i,p,a,h,E,m,r,b,I]}class Bt extends Ge{constructor(e){super(),je(this,e,Vt,Ot,We,{showModal:1,closeModal:6,cancelModal:2,newUsername:0,isLoading:7})}}function ht(s,e,t){const a=s.slice();return a[12]=e[t],a}function vt(s){let e,t,a,i,m,p,c,r,h,E,b,I,w,g,v,T,C,q,V,B,z,U,F,A,M,O,x,G=s[4],_=[];for(let y=0;y<G.length;y+=1)_[y]=bt(ht(s,G,y));return{c(){e=u("div"),t=u("div"),a=u("div"),i=u("h3"),m=S("Update Favourite Team"),p=D(),c=u("div"),r=u("select"),h=u("option"),E=S("Select Team");for(let y=0;y<_.length;y+=1)_[y].c();b=D(),I=u("div"),w=u("p"),g=S("Warning"),v=D(),T=u("p"),C=S("You can only set your favourite team once per season."),q=D(),V=u("div"),B=u("button"),z=S("Cancel"),U=D(),F=u("button"),A=S("Use"),this.h()},l(y){e=d(y,"DIV",{class:!0});var H=f(e);t=d(H,"DIV",{class:!0});var k=f(t);a=d(k,"DIV",{class:!0});var X=f(a);i=d(X,"H3",{class:!0});var Z=f(i);m=R(Z,"Update Favourite Team"),Z.forEach(n),p=P(X),c=d(X,"DIV",{class:!0});var pe=f(c);r=d(pe,"SELECT",{class:!0});var te=f(r);h=d(te,"OPTION",{});var $=f(h);E=R($,"Select Team"),$.forEach(n);for(let J=0;J<_.length;J+=1)_[J].l(te);te.forEach(n),pe.forEach(n),X.forEach(n),b=P(k),I=d(k,"DIV",{class:!0,role:!0});var ee=f(I);w=d(ee,"P",{class:!0});var se=f(w);g=R(se,"Warning"),se.forEach(n),v=P(ee),T=d(ee,"P",{class:!0});var fe=f(T);C=R(fe,"You can only set your favourite team once per season."),fe.forEach(n),ee.forEach(n),q=P(k),V=d(k,"DIV",{class:!0});var ae=f(V);B=d(ae,"BUTTON",{class:!0});var re=f(B);z=R(re,"Cancel"),re.forEach(n),U=P(ae),F=d(ae,"BUTTON",{class:!0});var me=f(F);A=R(me,"Use"),me.forEach(n),ae.forEach(n),k.forEach(n),H.forEach(n),this.h()},h(){o(i,"class","text-lg leading-6 font-medium mb-2"),h.__value=0,h.value=h.__value,o(r,"class","w-full p-2 rounded-md fpl-dropdown"),s[0]===void 0&&Tt(()=>s[10].call(r)),o(c,"class","w-full border border-gray-500 mt-4 mb-2"),o(a,"class","mt-3 text-center"),o(w,"class","font-bold text-sm"),o(T,"class","font-bold text-xs"),o(I,"class","bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 mb-1 mt-4"),o(I,"role","alert"),o(B,"class","px-4 py-2 fpl-cancel-btn text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300"),o(F,"class",M=Re(`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u"),F.disabled=s[3],o(V,"class","items-center py-3 flex space-x-4"),o(t,"class","relative top-20 mx-auto p-5 border border-gray-700 w-96 shadow-lg rounded-md bg-panel text-white"),o(e,"class","fixed inset-0 bg-gray-900 bg-opacity-80 overflow-y-auto h-full w-full modal-backdrop svelte-1fl295u")},m(y,H){ue(y,e,H),l(e,t),l(t,a),l(a,i),l(i,m),l(a,p),l(a,c),l(c,r),l(r,h),l(h,E);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(r,null);mt(r,s[0],!0),l(t,b),l(t,I),l(I,w),l(w,g),l(I,v),l(I,T),l(T,C),l(t,q),l(t,V),l(V,B),l(B,z),l(V,U),l(V,F),l(F,A),O||(x=[Y(r,"change",s[10]),Y(B,"click",function(){et(s[2])&&s[2].apply(this,arguments)}),Y(F,"click",s[5]),Y(t,"click",wt(s[9])),Y(t,"keydown",s[6]),Y(e,"click",function(){et(s[2])&&s[2].apply(this,arguments)}),Y(e,"keydown",s[6])],O=!0)},p(y,H){if(s=y,H&16){G=s[4];let k;for(k=0;k<G.length;k+=1){const X=ht(s,G,k);_[k]?_[k].p(X,H):(_[k]=bt(X),_[k].c(),_[k].m(r,null))}for(;k<_.length;k+=1)_[k].d(1);_.length=G.length}H&17&&mt(r,s[0]),H&8&&M!==(M=Re(`px-4 py-2 ${s[3]?"bg-gray-500":"fpl-purple-btn"} text-white text-base font-medium rounded-md w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300`)+" svelte-1fl295u")&&o(F,"class",M),H&8&&(F.disabled=s[3])},d(y){y&&n(e),Nt(_,y),O=!1,at(x)}}}function bt(s){let e,t=s[12].friendlyName+"",a,i;return{c(){e=u("option"),a=S(t),this.h()},l(m){e=d(m,"OPTION",{});var p=f(e);a=R(p,t),p.forEach(n),this.h()},h(){e.__value=i=s[12].id,e.value=e.__value},m(m,p){ue(m,e,p),l(e,a)},p(m,p){p&16&&t!==(t=m[12].friendlyName+"")&&Ze(a,t),p&16&&i!==(i=m[12].id)&&(e.__value=i,e.value=e.__value)},d(m){m&&n(e)}}}function Kt(s){let e,t=s[1]&&vt(s);return{c(){t&&t.c(),e=Oe()},l(a){t&&t.l(a),e=Oe()},m(a,i){t&&t.m(a,i),ue(a,e,i)},p(a,[i]){a[1]?t?t.p(a,i):(t=vt(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ee,o:Ee,d(a){t&&t.d(a),a&&n(e)}}}function Ht(s,e,t){let{showModal:a}=e,{closeModal:i}=e,{cancelModal:m}=e,{newFavouriteTeam:p=0}=e,{isLoading:c}=e,r=!0,h,E;ot(async()=>{await tt.sync(),E=tt.subscribe(v=>{t(4,h=v)})}),yt(()=>{E?.()});async function b(){c.set(!0),qe.set("Updating Favourite Club");try{await Pe.updateFavouriteTeam(p),await i(),ye.show("Favourite team updated.","success")}catch(v){ye.show("Error updating favourite team.","error"),console.error("Error updating favourite team:",v),m()}finally{c.set(!1),qe.set("Loading")}}function I(v){!(v.target instanceof HTMLInputElement)&&v.key==="Escape"&&i()}function w(v){Et.call(this,s,v)}function g(){p=kt(this),t(0,p),t(4,h)}return s.$$set=v=>{"showModal"in v&&t(1,a=v.showModal),"closeModal"in v&&t(7,i=v.closeModal),"cancelModal"in v&&t(2,m=v.cancelModal),"newFavouriteTeam"in v&&t(0,p=v.newFavouriteTeam),"isLoading"in v&&t(8,c=v.isLoading)},s.$$.update=()=>{s.$$.dirty&1&&t(3,r=p<=0)},[p,a,m,r,h,b,I,i,c,w,g]}class zt extends Ge{constructor(e){super(),je(this,e,Ht,Kt,We,{showModal:1,closeModal:7,cancelModal:2,newFavouriteTeam:0,isLoading:8})}}function xt(s){let e,t,a,i,m,p,c,r,h,E,b,I,w,g,v,T,C,q,V,B,z,U,F,A,M,O,x,G,_,y,H,k,X,Z,pe,te,$,ee,se,fe,ae,re,me,J,Q,he,ve,oe,_e,ce,ie,be,Fe,j;e=new Bt({props:{newUsername:s[6]?s[6].displayName:"",showModal:s[1],closeModal:s[12],cancelModal:s[13],isLoading:s[10]}}),a=new zt({props:{newFavouriteTeam:s[6]?s[6].favouriteTeamId:0,showModal:s[2],closeModal:s[15],cancelModal:s[16],isLoading:s[10]}});let L=s[6]&&gt(s);return{c(){Ae(e.$$.fragment),t=D(),Ae(a.$$.fragment),i=D(),m=u("div"),L&&L.c(),p=D(),c=u("div"),r=u("div"),h=u("div"),E=u("div"),b=u("div"),I=u("img"),g=D(),v=u("div"),T=u("p"),C=S("ICP"),q=D(),V=u("p"),B=S("0.00 ICP"),z=D(),U=u("div"),F=u("img"),M=D(),O=u("div"),x=u("p"),G=S("FPL"),_=D(),y=u("p"),H=S("0.00 FPL"),k=D(),X=u("div"),Z=u("img"),te=D(),$=u("div"),ee=u("p"),se=S("ckBTC"),fe=D(),ae=u("p"),re=S("0.00 ckBTC"),me=D(),J=u("div"),Q=u("img"),ve=D(),oe=u("div"),_e=u("p"),ce=S("ckETH"),ie=D(),be=u("p"),Fe=S("0.00 ckETH"),this.h()},l(N){Me(e.$$.fragment,N),t=P(N),Me(a.$$.fragment,N),i=P(N),m=d(N,"DIV",{class:!0});var W=f(m);L&&L.l(W),p=P(W),c=d(W,"DIV",{class:!0});var de=f(c);r=d(de,"DIV",{class:!0});var ge=f(r);h=d(ge,"DIV",{class:!0});var Ve=f(h);E=d(Ve,"DIV",{class:!0});var K=f(E);b=d(K,"DIV",{class:!0});var Ie=f(b);I=d(Ie,"IMG",{src:!0,alt:!0,class:!0}),g=P(Ie),v=d(Ie,"DIV",{class:!0});var Te=f(v);T=d(Te,"P",{class:!0});var Be=f(T);C=R(Be,"ICP"),Be.forEach(n),q=P(Te),V=d(Te,"P",{});var Ke=f(V);B=R(Ke,"0.00 ICP"),Ke.forEach(n),Te.forEach(n),Ie.forEach(n),z=P(K),U=d(K,"DIV",{class:!0});var Ne=f(U);F=d(Ne,"IMG",{src:!0,alt:!0,class:!0}),M=P(Ne),O=d(Ne,"DIV",{class:!0});var ke=f(O);x=d(ke,"P",{class:!0});var He=f(x);G=R(He,"FPL"),He.forEach(n),_=P(ke),y=d(ke,"P",{});var ze=f(y);H=R(ze,"0.00 FPL"),ze.forEach(n),ke.forEach(n),Ne.forEach(n),k=P(K),X=d(K,"DIV",{class:!0});var De=f(X);Z=d(De,"IMG",{src:!0,alt:!0,class:!0}),te=P(De),$=d(De,"DIV",{class:!0});var we=f($);ee=d(we,"P",{class:!0});var xe=f(ee);se=R(xe,"ckBTC"),xe.forEach(n),fe=P(we),ae=d(we,"P",{});var ct=f(ae);re=R(ct,"0.00 ckBTC"),ct.forEach(n),we.forEach(n),De.forEach(n),me=P(K),J=d(K,"DIV",{class:!0});var Ye=f(J);Q=d(Ye,"IMG",{src:!0,alt:!0,class:!0}),ve=P(Ye),oe=d(Ye,"DIV",{class:!0});var Xe=f(oe);_e=d(Xe,"P",{class:!0});var ut=f(_e);ce=R(ut,"ckETH"),ut.forEach(n),ie=P(Xe),be=d(Xe,"P",{});var dt=f(be);Fe=R(dt,"0.00 ckETH"),dt.forEach(n),Xe.forEach(n),Ye.forEach(n),K.forEach(n),Ve.forEach(n),ge.forEach(n),de.forEach(n),W.forEach(n),this.h()},h(){Se(I.src,w="ICPCoin.png")||o(I,"src",w),o(I,"alt","ICP"),o(I,"class","h-12 w-12"),o(T,"class","font-bold"),o(v,"class","ml-4"),o(b,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Se(F.src,A="FPLCoin.png")||o(F,"src",A),o(F,"alt","FPL"),o(F,"class","h-12 w-12"),o(x,"class","font-bold"),o(O,"class","ml-4"),o(U,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Se(Z.src,pe="ckBTCCoin.png")||o(Z,"src",pe),o(Z,"alt","ICP"),o(Z,"class","h-12 w-12"),o(ee,"class","font-bold"),o($,"class","ml-4"),o(X,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),Se(Q.src,he="ckETHCoin.png")||o(Q,"src",he),o(Q,"alt","ICP"),o(Q,"class","h-12 w-12"),o(_e,"class","font-bold"),o(oe,"class","ml-4"),o(J,"class","flex items-center p-4 rounded-lg shadow-md border border-gray-700"),o(E,"class","grid grid-cols-1 md:grid-cols-4 gap-4"),o(h,"class","mt-4 px-2"),o(r,"class","w-full px-2 mb-4"),o(c,"class","flex flex-wrap -mx-2 mt-4"),o(m,"class","container mx-auto p-4")},m(N,W){Ue(e,N,W),ue(N,t,W),Ue(a,N,W),ue(N,i,W),ue(N,m,W),L&&L.m(m,null),l(m,p),l(m,c),l(c,r),l(r,h),l(h,E),l(E,b),l(b,I),l(b,g),l(b,v),l(v,T),l(T,C),l(v,q),l(v,V),l(V,B),l(E,z),l(E,U),l(U,F),l(U,M),l(U,O),l(O,x),l(x,G),l(O,_),l(O,y),l(y,H),l(E,k),l(E,X),l(X,Z),l(X,te),l(X,$),l($,ee),l(ee,se),l($,fe),l($,ae),l(ae,re),l(E,me),l(E,J),l(J,Q),l(J,ve),l(J,oe),l(oe,_e),l(_e,ce),l(oe,ie),l(oe,be),l(be,Fe),j=!0},p(N,W){const de={};W&64&&(de.newUsername=N[6]?N[6].displayName:""),W&2&&(de.showModal=N[1]),e.$set(de);const ge={};W&64&&(ge.newFavouriteTeam=N[6]?N[6].favouriteTeamId:0),W&4&&(ge.showModal=N[2]),a.$set(ge),N[6]?L?(L.p(N,W),W&64&&le(L,1)):(L=gt(N),L.c(),le(L,1),L.m(m,p)):L&&(it(),ne(L,1,1,()=>{L=null}),nt())},i(N){j||(le(e.$$.fragment,N),le(a.$$.fragment,N),le(L),j=!0)},o(N){ne(e.$$.fragment,N),ne(a.$$.fragment,N),ne(L),j=!1},d(N){Le(e,N),N&&n(t),Le(a,N),N&&n(i),N&&n(m),L&&L.d()}}}function Gt(s){let e,t;return e=new Pt({}),{c(){Ae(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,i){Ue(e,a,i),t=!0},p:Ee,i(a){t||(le(e.$$.fragment,a),t=!0)},o(a){ne(e.$$.fragment,a),t=!1},d(a){Le(e,a)}}}function gt(s){let e,t,a,i,m,p,c,r,h,E,b,I,w,g,v,T,C,q,V=s[6]?.displayName+"",B,z,U,F,A,M,O,x,G,_=s[0].find(s[21])?.friendlyName+"",y,H,k,X,Z,pe,te,$,ee,se,fe,ae,re,me,J,Q,he,ve=s[6]?.principalName+"",oe,_e,ce,ie,be,Fe;return ce=new Rt({props:{onClick:s[17],principalId:s[6]?.principalName,className:"ml-2 w-4 h-4"}}),{c(){e=u("div"),t=u("div"),a=u("div"),i=u("img"),p=D(),c=u("div"),r=u("button"),h=S("Upload Photo"),E=D(),b=u("input"),I=D(),w=u("div"),g=u("div"),v=u("p"),T=S("Display Name:"),C=D(),q=u("h2"),B=S(V),z=D(),U=u("button"),F=S("Update"),A=D(),M=u("p"),O=S("Favourite Team:"),x=D(),G=u("h2"),y=S(_),H=D(),k=u("button"),X=S("Update"),pe=D(),te=u("p"),$=S("Joined:"),ee=D(),se=u("h2"),fe=S("August 2023"),ae=D(),re=u("p"),me=S("Principal:"),J=D(),Q=u("div"),he=u("h2"),oe=S(ve),_e=D(),Ae(ce.$$.fragment),this.h()},l(j){e=d(j,"DIV",{class:!0});var L=f(e);t=d(L,"DIV",{class:!0});var N=f(t);a=d(N,"DIV",{class:!0});var W=f(a);i=d(W,"IMG",{src:!0,alt:!0,class:!0}),p=P(W),c=d(W,"DIV",{class:!0});var de=f(c);r=d(de,"BUTTON",{class:!0});var ge=f(r);h=R(ge,"Upload Photo"),ge.forEach(n),E=P(de),b=d(de,"INPUT",{type:!0,id:!0,accept:!0,style:!0,class:!0}),de.forEach(n),W.forEach(n),N.forEach(n),I=P(L),w=d(L,"DIV",{class:!0});var Ve=f(w);g=d(Ve,"DIV",{class:!0});var K=f(g);v=d(K,"P",{class:!0});var Ie=f(v);T=R(Ie,"Display Name:"),Ie.forEach(n),C=P(K),q=d(K,"H2",{class:!0});var Te=f(q);B=R(Te,V),Te.forEach(n),z=P(K),U=d(K,"BUTTON",{class:!0});var Be=f(U);F=R(Be,"Update"),Be.forEach(n),A=P(K),M=d(K,"P",{class:!0});var Ke=f(M);O=R(Ke,"Favourite Team:"),Ke.forEach(n),x=P(K),G=d(K,"H2",{class:!0});var Ne=f(G);y=R(Ne,_),Ne.forEach(n),H=P(K),k=d(K,"BUTTON",{class:!0});var ke=f(k);X=R(ke,"Update"),ke.forEach(n),pe=P(K),te=d(K,"P",{class:!0});var He=f(te);$=R(He,"Joined:"),He.forEach(n),ee=P(K),se=d(K,"H2",{class:!0});var ze=f(se);fe=R(ze,"August 2023"),ze.forEach(n),ae=P(K),re=d(K,"P",{class:!0});var De=f(re);me=R(De,"Principal:"),De.forEach(n),J=P(K),Q=d(K,"DIV",{class:!0});var we=f(Q);he=d(we,"H2",{class:!0});var xe=f(he);oe=R(xe,ve),xe.forEach(n),_e=P(we),Me(ce.$$.fragment,we),we.forEach(n),K.forEach(n),Ve.forEach(n),L.forEach(n),this.h()},h(){Se(i.src,m=s[7])||o(i,"src",m),o(i,"alt","Profile"),o(i,"class","w-48 md:w-80 mb-1 rounded-lg"),o(r,"class","btn-file-upload fpl-button svelte-e6um5o"),o(b,"type","file"),o(b,"id","profile-image"),o(b,"accept","image/*"),Ce(b,"opacity","0"),Ce(b,"position","absolute"),Ce(b,"left","0"),Ce(b,"top","0"),o(b,"class","svelte-e6um5o"),o(c,"class","file-upload-wrapper mt-4 svelte-e6um5o"),o(a,"class","group"),o(t,"class","w-full md:w-auto px-2 ml-4 md:ml-0"),o(v,"class","text-xs mb-2"),o(q,"class","text-2xl font-bold mb-2"),o(U,"class","p-2 px-4 rounded fpl-button"),o(M,"class","text-xs mb-2 mt-4"),o(G,"class","text-2xl font-bold mb-2"),o(k,"class","p-2 px-4 rounded fpl-button"),k.disabled=Z=s[4]>1&&(s[6]?.favouriteTeamId??0)>0,o(te,"class","text-xs mb-2 mt-4"),o(se,"class","text-2xl font-bold mb-2"),o(re,"class","text-xs mb-2 mt-4"),o(he,"class","text-xs font-bold"),o(Q,"class","flex items-center"),o(g,"class","ml-4 p-4 rounded-lg"),o(w,"class","w-full md:w-3/4 px-2 mb-4"),o(e,"class","flex flex-wrap")},m(j,L){ue(j,e,L),l(e,t),l(t,a),l(a,i),l(a,p),l(a,c),l(c,r),l(r,h),l(c,E),l(c,b),s[20](b),l(e,I),l(e,w),l(w,g),l(g,v),l(v,T),l(g,C),l(g,q),l(q,B),l(g,z),l(g,U),l(U,F),l(g,A),l(g,M),l(M,O),l(g,x),l(g,G),l(G,y),l(g,H),l(g,k),l(k,X),l(g,pe),l(g,te),l(te,$),l(g,ee),l(g,se),l(se,fe),l(g,ae),l(g,re),l(re,me),l(g,J),l(g,Q),l(Q,he),l(he,oe),l(Q,_e),Ue(ce,Q,null),ie=!0,be||(Fe=[Y(r,"click",s[18]),Y(b,"change",s[19]),Y(U,"click",s[11]),Y(k,"click",s[14])],be=!0)},p(j,L){(!ie||L&128&&!Se(i.src,m=j[7]))&&o(i,"src",m),(!ie||L&64)&&V!==(V=j[6]?.displayName+"")&&Ze(B,V),(!ie||L&65)&&_!==(_=j[0].find(j[21])?.friendlyName+"")&&Ze(y,_),(!ie||L&80&&Z!==(Z=j[4]>1&&(j[6]?.favouriteTeamId??0)>0))&&(k.disabled=Z),(!ie||L&64)&&ve!==(ve=j[6]?.principalName+"")&&Ze(oe,ve);const N={};L&64&&(N.principalId=j[6]?.principalName),ce.$set(N)},i(j){ie||(le(ce.$$.fragment,j),ie=!0)},o(j){ne(ce.$$.fragment,j),ie=!1},d(j){j&&n(e),s[20](null),Le(ce),be=!1,at(Fe)}}}function jt(s){let e,t,a,i;const m=[Gt,xt],p=[];function c(r,h){return r[5]?0:1}return e=c(s),t=p[e]=m[e](s),{c(){t.c(),a=Oe()},l(r){t.l(r),a=Oe()},m(r,h){p[e].m(r,h),ue(r,a,h),i=!0},p(r,[h]){let E=e;e=c(r),e===E?p[e].p(r,h):(it(),ne(p[E],1,1,()=>{p[E]=null}),nt(),t=p[e],t?t.p(r,h):(t=p[e]=m[e](r),t.c()),le(t,1),t.m(a.parentNode,a))},i(r){i||(le(t),i=!0)},o(r){ne(t),i=!1},d(r){p[e].d(r),r&&n(a)}}}function Wt(s,e,t){let a,i,m,p,c,r=$e(null);rt(s,r,_=>t(6,i=_));let h=$e("profile_placeholder.png");rt(s,h,_=>t(7,m=_));let E=!1,b=!1,I,w=1,g=$e(!1);rt(s,g,_=>t(5,a=_));let v,T;ot(async()=>{g.set(!0);try{await tt.sync(),await _t.sync(),v=tt.subscribe(y=>{t(0,p=y)}),T=_t.subscribe(y=>{c=y});const _=await Pe.getProfile();if(r.set(_),_&&_.profilePicture.length>0){const y=new Blob([new Uint8Array(_.profilePicture)]);h.set(URL.createObjectURL(y))}t(4,w=c?.activeGameweek??1)}catch(_){ye.show("Error fetching profile detail.","error"),console.error("Error fetching profile detail:",_)}finally{g.set(!1)}}),yt(()=>{v?.(),T?.()});function C(){t(1,E=!0)}async function q(){const _=await Pe.getProfile();r.set(_),t(1,E=!1)}function V(){t(1,E=!1)}function B(){t(2,b=!0)}async function z(){const _=await Pe.getProfile();r.set(_),t(2,b=!1)}function U(){t(2,b=!1)}function F(_){navigator.clipboard.writeText(_).then(()=>{ye.show("Copied!","success")})}function A(){I.click()}function M(_){const y=_.target;if(y.files&&y.files[0]){const H=y.files[0];if(H.size>1e3*1024){alert("File size exceeds 1000KB");return}O(H)}}async function O(_){g.set(!0),qe.set("Updating Profile Picture");try{await Pe.updateProfilePicture(_);const y=await Pe.getProfile();if(r.set(y),y&&y.profilePicture.length>0){const H=new Blob([new Uint8Array(y.profilePicture)]);h.set(URL.createObjectURL(H))}ye.show("Profile image updated.","success")}catch(y){ye.show("Error updating profile image","error"),console.error("Error updating profile image",y)}finally{g.set(!1),qe.set("Loading")}}function x(_){Dt[_?"unshift":"push"](()=>{I=_,t(3,I)})}return[p,E,b,I,w,a,i,m,r,h,g,C,q,V,B,z,U,F,A,M,x,_=>_.id===i?.favouriteTeamId]}class Yt extends Ge{constructor(e){super(),je(this,e,Wt,jt,We,{})}}function Xt(s){let e,t;return e=new Ut({props:{viewGameweekDetail:s[2]}}),{c(){Ae(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,i){Ue(e,a,i),t=!0},p:Ee,i(a){t||(le(e.$$.fragment,a),t=!0)},o(a){ne(e.$$.fragment,a),t=!1},d(a){Le(e,a)}}}function Jt(s){let e,t;return e=new Yt({}),{c(){Ae(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,i){Ue(e,a,i),t=!0},p:Ee,i(a){t||(le(e.$$.fragment,a),t=!0)},o(a){ne(e.$$.fragment,a),t=!1},d(a){Le(e,a)}}}function Qt(s){let e,t,a,i,m,p,c,r,h,E,b,I,w,g,v,T,C,q,V,B;const z=[Jt,Xt],U=[];function F(A,M){return A[0]==="details"?0:A[0]==="gameweeks"?1:-1}return~(T=F(s))&&(C=U[T]=z[T](s)),{c(){e=u("div"),t=u("div"),a=u("ul"),i=u("li"),m=u("button"),p=S("Details"),h=D(),E=u("li"),b=u("button"),I=S("Gameweeks"),v=D(),C&&C.c(),this.h()},l(A){e=d(A,"DIV",{class:!0});var M=f(e);t=d(M,"DIV",{class:!0});var O=f(t);a=d(O,"UL",{class:!0});var x=f(a);i=d(x,"LI",{class:!0});var G=f(i);m=d(G,"BUTTON",{class:!0});var _=f(m);p=R(_,"Details"),_.forEach(n),G.forEach(n),h=P(x),E=d(x,"LI",{class:!0});var y=f(E);b=d(y,"BUTTON",{class:!0});var H=f(b);I=R(H,"Gameweeks"),H.forEach(n),y.forEach(n),x.forEach(n),v=P(O),C&&C.l(O),O.forEach(n),M.forEach(n),this.h()},h(){o(m,"class",c=`p-2 ${s[0]==="details"?"text-white":"text-gray-400"}`),o(i,"class",r=`mr-4 text-xs md:text-base ${s[0]==="details"?"active-tab":""}`),o(b,"class",w=`p-2 ${s[0]==="gameweeks"?"text-white":"text-gray-400"}`),o(E,"class",g=`mr-4 text-xs md:text-base ${s[0]==="gameweeks"?"active-tab":""}`),o(a,"class","flex rounded-t-lg bg-light-gray px-4 pt-2"),o(t,"class","bg-panel rounded-lg m-4"),o(e,"class","m-4")},m(A,M){ue(A,e,M),l(e,t),l(t,a),l(a,i),l(i,m),l(m,p),l(a,h),l(a,E),l(E,b),l(b,I),l(t,v),~T&&U[T].m(t,null),q=!0,V||(B=[Y(m,"click",s[3]),Y(b,"click",s[4])],V=!0)},p(A,M){(!q||M&1&&c!==(c=`p-2 ${A[0]==="details"?"text-white":"text-gray-400"}`))&&o(m,"class",c),(!q||M&1&&r!==(r=`mr-4 text-xs md:text-base ${A[0]==="details"?"active-tab":""}`))&&o(i,"class",r),(!q||M&1&&w!==(w=`p-2 ${A[0]==="gameweeks"?"text-white":"text-gray-400"}`))&&o(b,"class",w),(!q||M&1&&g!==(g=`mr-4 text-xs md:text-base ${A[0]==="gameweeks"?"active-tab":""}`))&&o(E,"class",g);let O=T;T=F(A),T===O?~T&&U[T].p(A,M):(C&&(it(),ne(U[O],1,1,()=>{U[O]=null}),nt()),~T?(C=U[T],C?C.p(A,M):(C=U[T]=z[T](A),C.c()),le(C,1),C.m(t,null)):C=null)},i(A){q||(le(C),q=!0)},o(A){ne(C),q=!1},d(A){A&&n(e),~T&&U[T].d(),V=!1,at(B)}}}function Zt(s){let e,t;return e=new Ct({props:{$$slots:{default:[Qt]},$$scope:{ctx:s}}}),{c(){Ae(e.$$.fragment)},l(a){Me(e.$$.fragment,a)},m(a,i){Ue(e,a,i),t=!0},p(a,[i]){const m={};i&33&&(m.$$scope={dirty:i,ctx:a}),e.$set(m)},i(a){t||(le(e.$$.fragment,a),t=!0)},o(a){ne(e.$$.fragment,a),t=!1},d(a){Le(e,a)}}}function $t(s,e,t){let a="details";ot(async()=>{At.set(!1)});function i(r){t(0,a=r)}function m(r,h){Mt(`/manager?id=${r}&gw=${h}`)}return[a,i,m,()=>i("details"),()=>i("gameweeks")]}class ia extends Ge{constructor(e){super(),je(this,e,$t,Zt,We,{})}}export{ia as component};
