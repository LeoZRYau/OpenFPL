import{S as As,i as Fs,s as Hs,k as n,q as v,a as f,l as o,m as i,r as m,h as r,c as u,n as s,J as Us,b as Nt,G as e,K as bs,L as Tt,g as xe,v as zt,f as Wt,d as Ke,M as ys,N as Ms,o as Ls,O as Os,H as Ct,x as xs,y as bt,z as $t,A as yt,u as M,B as xt,X as Kt,P as js,I as Js,a0 as Es,p as gt}from"../chunks/index.a8c54947.js";import{p as Rs}from"../chunks/stores.fa259919.js";import{s as Xt,t as Qt}from"../chunks/team-store.2ca3943b.js";import{m as qs}from"../chunks/manager-store.1954da10.js";import{t as ls,b as Is,g as Ds,c as Ks,d as ks}from"../chunks/Layout.37f8df07.js";import{p as as}from"../chunks/player-store.8a60313a.js";import{w as Yt}from"../chunks/singletons.7a3c8e4c.js";import{B as Bs}from"../chunks/BadgeIcon.ac2d82f5.js";import{M as Ys}from"../chunks/manager-gameweeks.203db381.js";function Ps(t,a,d){const l=t.slice();l[21]=a[d];const h=l[8](l[21].player.id);l[22]=h;const x=l[9](l[21].player.teamId);return l[23]=x,l}function Ss(t,a,d){const l=t.slice();return l[26]=a[d],l}function Vs(t){let a,d,l=t[26]+"",h;return{c(){a=n("option"),d=v("Gameweek "),h=v(l),this.h()},l(x){a=o(x,"OPTION",{});var I=i(a);d=m(I,"Gameweek "),h=m(I,l),I.forEach(r),this.h()},h(){a.__value=t[26],a.value=a.__value},m(x,I){Nt(x,a,I),e(a,d),e(a,h)},p:Ct,d(x){x&&r(a)}}}function $s(t){let a,d,l=Is(t[21].player.position)+"",h,x,I,D,L,U=t[22]&&t[22].firstName.length>2?t[22].firstName.substring(0,1)+"."+t[22].lastName:"",O,q,N,G,te,C=t[23]?.friendlyName+"",P,B,E,K,Q=t[21].appearance+"",j,ie,V,J,Y=(t[21].highestScoringPlayerId===t[22]?.id?1:0)+"",w,_e,Ue,W,z=t[21].goals+"",Ge,b,Z,Ee,ge=t[21].assists+"",he,je,tt,A,se=t[21].penaltySaves+"",Ie,De,st,ae,ve=t[21].cleanSheets+"",Je,Ye,ce,ke,Pe=t[21].saves+"",we,ze,at,ee,Re=t[21].yellowCards+"",We,de,lt,X,fe=t[21].ownGoals+"",Ae,qe,Fe,le,Se=t[21].goalsConceded+"",be,Xe,Ve,me,F=t[21].redCards+"",pe,S,ut,p,$=t[21].bonusPoints+"",y,R,ot,re,$e=t[21].points+"",rt,Qe,g;var Ce=Ds(t[22]?.nationality??"");function it(_){return{props:{class:"w-4 h-4 mr-1",size:"100"}}}return Ce&&(D=xs(Ce,it())),G=new Bs({props:{primaryColour:t[23]?.primaryColourHex,secondaryColour:t[23]?.secondaryColourHex,thirdColour:t[23]?.thirdColourHex,className:"w-6 h-6 mr-2"}}),{c(){a=n("div"),d=n("div"),h=v(l),x=f(),I=n("div"),D&&bt(D.$$.fragment),L=f(),O=v(U),q=f(),N=n("div"),bt(G.$$.fragment),te=f(),P=v(C),B=f(),E=n("div"),K=n("div"),j=v(Q),V=f(),J=n("div"),w=v(Y),Ue=f(),W=n("div"),Ge=v(z),Z=f(),Ee=n("div"),he=v(ge),tt=f(),A=n("div"),Ie=v(se),st=f(),ae=n("div"),Je=v(ve),ce=f(),ke=n("div"),we=v(Pe),at=f(),ee=n("div"),We=v(Re),lt=f(),X=n("div"),Ae=v(fe),Fe=f(),le=n("div"),be=v(Se),Ve=f(),me=n("div"),pe=v(F),ut=f(),p=n("div"),y=v($),ot=f(),re=n("div"),rt=v($e),Qe=f(),this.h()},l(_){a=o(_,"DIV",{class:!0});var c=i(a);d=o(c,"DIV",{class:!0});var He=i(d);h=m(He,l),He.forEach(r),x=u(c),I=o(c,"DIV",{class:!0});var ye=i(I);D&&$t(D.$$.fragment,ye),L=u(ye),O=m(ye,U),ye.forEach(r),q=u(c),N=o(c,"DIV",{class:!0});var Ze=i(N);$t(G.$$.fragment,Ze),te=u(Ze),P=m(Ze,C),Ze.forEach(r),B=u(c),E=o(c,"DIV",{class:!0});var T=i(E);K=o(T,"DIV",{class:!0});var vt=i(K);j=m(vt,Q),vt.forEach(r),V=u(T),J=o(T,"DIV",{class:!0});var et=i(J);w=m(et,Y),et.forEach(r),Ue=u(T),W=o(T,"DIV",{class:!0});var mt=i(W);Ge=m(mt,z),mt.forEach(r),Z=u(T),Ee=o(T,"DIV",{class:!0});var _t=i(Ee);he=m(_t,ge),_t.forEach(r),tt=u(T),A=o(T,"DIV",{class:!0});var Me=i(A);Ie=m(Me,se),Me.forEach(r),st=u(T),ae=o(T,"DIV",{class:!0});var Le=i(ae);Je=m(Le,ve),Le.forEach(r),ce=u(T),ke=o(T,"DIV",{class:!0});var Oe=i(ke);we=m(Oe,Pe),Oe.forEach(r),at=u(T),ee=o(T,"DIV",{class:!0});var Be=i(ee);We=m(Be,Re),Be.forEach(r),lt=u(T),X=o(T,"DIV",{class:!0});var ht=i(X);Ae=m(ht,fe),ht.forEach(r),Fe=u(T),le=o(T,"DIV",{class:!0});var Te=i(le);be=m(Te,Se),Te.forEach(r),Ve=u(T),me=o(T,"DIV",{class:!0});var Et=i(me);pe=m(Et,F),Et.forEach(r),ut=u(T),p=o(T,"DIV",{class:!0});var nt=i(p);y=m(nt,$),nt.forEach(r),T.forEach(r),ot=u(c),re=o(c,"DIV",{class:!0});var It=i(re);rt=m(It,$e),It.forEach(r),Qe=u(c),c.forEach(r),this.h()},h(){s(d,"class","w-1/12 text-center mx-4"),s(I,"class","w-2/12"),s(N,"class","w-2/12 text-center flex items-center"),s(K,"class",ie=`w-1/12 text-center ${t[21].appearance>0?"":"text-gray-500"}`),s(J,"class",_e=`w-1/12 text-center ${t[21].highestScoringPlayerId===t[22]?.id?"":"text-gray-500"}`),s(W,"class",b=`w-1/12 text-center ${t[21].goals>0?"":"text-gray-500"}`),s(Ee,"class",je=`w-1/12 text-center ${t[21].assists>0?"":"text-gray-500"}`),s(A,"class",De=`w-1/12 text-center ${t[21].penaltySaves>0?"":"text-gray-500"}`),s(ae,"class",Ye=`w-1/12 text-center ${t[21].cleanSheets>0?"":"text-gray-500"}`),s(ke,"class",ze=`w-1/12 text-center ${t[21].saves>0?"":"text-gray-500"}`),s(ee,"class",de=`w-1/12 text-center ${t[21].yellowCards>0?"":"text-gray-500"}`),s(X,"class",qe=`w-1/12 text-center ${t[21].ownGoals>0?"":"text-gray-500"}`),s(le,"class",Xe=`w-1/12 text-center ${t[21].goalsConceded>0?"":"text-gray-500"}`),s(me,"class",S=`w-1/12 text-center ${t[21].redCards>0?"":"text-gray-500"}`),s(p,"class",R=`w-1/12 text-center ${t[21].bonusPoints>0?"":"text-gray-500"}`),s(E,"class","w-1/2 flex"),s(re,"class","w-1/12 text-center"),s(a,"class","flex items-center justify-between py-4 border-b border-gray-700 cursor-pointer")},m(_,c){Nt(_,a,c),e(a,d),e(d,h),e(a,x),e(a,I),D&&yt(D,I,null),e(I,L),e(I,O),e(a,q),e(a,N),yt(G,N,null),e(N,te),e(N,P),e(a,B),e(a,E),e(E,K),e(K,j),e(E,V),e(E,J),e(J,w),e(E,Ue),e(E,W),e(W,Ge),e(E,Z),e(E,Ee),e(Ee,he),e(E,tt),e(E,A),e(A,Ie),e(E,st),e(E,ae),e(ae,Je),e(E,ce),e(E,ke),e(ke,we),e(E,at),e(E,ee),e(ee,We),e(E,lt),e(E,X),e(X,Ae),e(E,Fe),e(E,le),e(le,be),e(E,Ve),e(E,me),e(me,pe),e(E,ut),e(E,p),e(p,y),e(a,ot),e(a,re),e(re,rt),e(a,Qe),g=!0},p(_,c){if((!g||c&32)&&l!==(l=Is(_[21].player.position)+"")&&M(h,l),c&32&&Ce!==(Ce=Ds(_[22]?.nationality??""))){if(D){zt();const ye=D;Ke(ye.$$.fragment,1,0,()=>{xt(ye,1)}),Wt()}Ce?(D=xs(Ce,it()),bt(D.$$.fragment),xe(D.$$.fragment,1),yt(D,I,L)):D=null}(!g||c&32)&&U!==(U=_[22]&&_[22].firstName.length>2?_[22].firstName.substring(0,1)+"."+_[22].lastName:"")&&M(O,U);const He={};c&32&&(He.primaryColour=_[23]?.primaryColourHex),c&32&&(He.secondaryColour=_[23]?.secondaryColourHex),c&32&&(He.thirdColour=_[23]?.thirdColourHex),G.$set(He),(!g||c&32)&&C!==(C=_[23]?.friendlyName+"")&&M(P,C),(!g||c&32)&&Q!==(Q=_[21].appearance+"")&&M(j,Q),(!g||c&32&&ie!==(ie=`w-1/12 text-center ${_[21].appearance>0?"":"text-gray-500"}`))&&s(K,"class",ie),(!g||c&32)&&Y!==(Y=(_[21].highestScoringPlayerId===_[22]?.id?1:0)+"")&&M(w,Y),(!g||c&32&&_e!==(_e=`w-1/12 text-center ${_[21].highestScoringPlayerId===_[22]?.id?"":"text-gray-500"}`))&&s(J,"class",_e),(!g||c&32)&&z!==(z=_[21].goals+"")&&M(Ge,z),(!g||c&32&&b!==(b=`w-1/12 text-center ${_[21].goals>0?"":"text-gray-500"}`))&&s(W,"class",b),(!g||c&32)&&ge!==(ge=_[21].assists+"")&&M(he,ge),(!g||c&32&&je!==(je=`w-1/12 text-center ${_[21].assists>0?"":"text-gray-500"}`))&&s(Ee,"class",je),(!g||c&32)&&se!==(se=_[21].penaltySaves+"")&&M(Ie,se),(!g||c&32&&De!==(De=`w-1/12 text-center ${_[21].penaltySaves>0?"":"text-gray-500"}`))&&s(A,"class",De),(!g||c&32)&&ve!==(ve=_[21].cleanSheets+"")&&M(Je,ve),(!g||c&32&&Ye!==(Ye=`w-1/12 text-center ${_[21].cleanSheets>0?"":"text-gray-500"}`))&&s(ae,"class",Ye),(!g||c&32)&&Pe!==(Pe=_[21].saves+"")&&M(we,Pe),(!g||c&32&&ze!==(ze=`w-1/12 text-center ${_[21].saves>0?"":"text-gray-500"}`))&&s(ke,"class",ze),(!g||c&32)&&Re!==(Re=_[21].yellowCards+"")&&M(We,Re),(!g||c&32&&de!==(de=`w-1/12 text-center ${_[21].yellowCards>0?"":"text-gray-500"}`))&&s(ee,"class",de),(!g||c&32)&&fe!==(fe=_[21].ownGoals+"")&&M(Ae,fe),(!g||c&32&&qe!==(qe=`w-1/12 text-center ${_[21].ownGoals>0?"":"text-gray-500"}`))&&s(X,"class",qe),(!g||c&32)&&Se!==(Se=_[21].goalsConceded+"")&&M(be,Se),(!g||c&32&&Xe!==(Xe=`w-1/12 text-center ${_[21].goalsConceded>0?"":"text-gray-500"}`))&&s(le,"class",Xe),(!g||c&32)&&F!==(F=_[21].redCards+"")&&M(pe,F),(!g||c&32&&S!==(S=`w-1/12 text-center ${_[21].redCards>0?"":"text-gray-500"}`))&&s(me,"class",S),(!g||c&32)&&$!==($=_[21].bonusPoints+"")&&M(y,$),(!g||c&32&&R!==(R=`w-1/12 text-center ${_[21].bonusPoints>0?"":"text-gray-500"}`))&&s(p,"class",R),(!g||c&32)&&$e!==($e=_[21].points+"")&&M(rt,$e)},i(_){g||(D&&xe(D.$$.fragment,_),xe(G.$$.fragment,_),g=!0)},o(_){D&&Ke(D.$$.fragment,_),Ke(G.$$.fragment,_),g=!1},d(_){_&&r(a),D&&xt(D),xt(G)}}}function zs(t){let a,d,l,h,x,I,D,L,U,O,q,N,G,te,C,P,B,E,K,Q,j,ie,V,J,Y,w,_e,Ue,W,z,Ge,b,Z,Ee,ge,he,je,tt,A,se,Ie,De,st,ae,ve,Je,Ye,ce,ke,Pe,we,ze,at,ee,Re,We,de,lt,X,fe,Ae,qe,Fe,le,Se,be,Xe,Ve,me=t[6],F=[];for(let p=0;p<me.length;p+=1)F[p]=Vs(Ss(t,me,p));let pe=t[5],S=[];for(let p=0;p<pe.length;p+=1)S[p]=$s(Ps(t,pe,p));const ut=p=>Ke(S[p],1,1,()=>{S[p]=null});return{c(){a=n("div"),d=n("div"),l=n("div"),h=n("button"),x=v("<"),D=f(),L=n("select");for(let p=0;p<F.length;p+=1)F[p].c();U=f(),O=n("button"),q=v(">"),G=f(),te=n("div"),C=n("div"),P=n("div"),B=n("div"),E=v("Position"),K=f(),Q=n("div"),j=v("Player"),ie=f(),V=n("div"),J=v("Team"),Y=f(),w=n("div"),_e=n("div"),Ue=v("A"),W=f(),z=n("div"),Ge=v("HSP"),b=f(),Z=n("div"),Ee=v("GS"),ge=f(),he=n("div"),je=v("GA"),tt=f(),A=n("div"),se=v("PS"),Ie=f(),De=n("div"),st=v("CS"),ae=f(),ve=n("div"),Je=v("KS"),Ye=f(),ce=n("div"),ke=v("YC"),Pe=f(),we=n("div"),ze=v("OG"),at=f(),ee=n("div"),Re=v("GC"),We=f(),de=n("div"),lt=v("RC"),X=f(),fe=n("div"),Ae=v("B"),qe=f(),Fe=n("div"),le=v("PTS"),Se=f();for(let p=0;p<S.length;p+=1)S[p].c();this.h()},l(p){a=o(p,"DIV",{class:!0});var $=i(a);d=o($,"DIV",{class:!0});var y=i(d);l=o(y,"DIV",{class:!0});var R=i(l);h=o(R,"BUTTON",{class:!0});var ot=i(h);x=m(ot,"<"),ot.forEach(r),D=u(R),L=o(R,"SELECT",{class:!0});var re=i(L);for(let Te=0;Te<F.length;Te+=1)F[Te].l(re);re.forEach(r),U=u(R),O=o(R,"BUTTON",{class:!0});var $e=i(O);q=m($e,">"),$e.forEach(r),R.forEach(r),y.forEach(r),G=u($),te=o($,"DIV",{class:!0});var rt=i(te);C=o(rt,"DIV",{class:!0});var Qe=i(C);P=o(Qe,"DIV",{class:!0});var g=i(P);B=o(g,"DIV",{class:!0});var Ce=i(B);E=m(Ce,"Position"),Ce.forEach(r),K=u(g),Q=o(g,"DIV",{class:!0});var it=i(Q);j=m(it,"Player"),it.forEach(r),ie=u(g),V=o(g,"DIV",{class:!0});var _=i(V);J=m(_,"Team"),_.forEach(r),Y=u(g),w=o(g,"DIV",{class:!0});var c=i(w);_e=o(c,"DIV",{class:!0});var He=i(_e);Ue=m(He,"A"),He.forEach(r),W=u(c),z=o(c,"DIV",{class:!0});var ye=i(z);Ge=m(ye,"HSP"),ye.forEach(r),b=u(c),Z=o(c,"DIV",{class:!0});var Ze=i(Z);Ee=m(Ze,"GS"),Ze.forEach(r),ge=u(c),he=o(c,"DIV",{class:!0});var T=i(he);je=m(T,"GA"),T.forEach(r),tt=u(c),A=o(c,"DIV",{class:!0});var vt=i(A);se=m(vt,"PS"),vt.forEach(r),Ie=u(c),De=o(c,"DIV",{class:!0});var et=i(De);st=m(et,"CS"),et.forEach(r),ae=u(c),ve=o(c,"DIV",{class:!0});var mt=i(ve);Je=m(mt,"KS"),mt.forEach(r),Ye=u(c),ce=o(c,"DIV",{class:!0});var _t=i(ce);ke=m(_t,"YC"),_t.forEach(r),Pe=u(c),we=o(c,"DIV",{class:!0});var Me=i(we);ze=m(Me,"OG"),Me.forEach(r),at=u(c),ee=o(c,"DIV",{class:!0});var Le=i(ee);Re=m(Le,"GC"),Le.forEach(r),We=u(c),de=o(c,"DIV",{class:!0});var Oe=i(de);lt=m(Oe,"RC"),Oe.forEach(r),X=u(c),fe=o(c,"DIV",{class:!0});var Be=i(fe);Ae=m(Be,"B"),Be.forEach(r),c.forEach(r),qe=u(g),Fe=o(g,"DIV",{class:!0});var ht=i(Fe);le=m(ht,"PTS"),ht.forEach(r),g.forEach(r),Se=u(Qe);for(let Te=0;Te<S.length;Te+=1)S[Te].l(Qe);Qe.forEach(r),rt.forEach(r),$.forEach(r),this.h()},h(){s(h,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1"),h.disabled=I=t[0]===1,s(L,"class","p-2 fpl-dropdown text-xs md:text-base text-center mx-0 md:mx-2 min-w-[150px] sm:min-w-[100px]"),t[0]===void 0&&Us(()=>t[13].call(L)),s(O,"class","text-base sm:text-xs md:text-base rounded fpl-button px-3 sm:px-2 px-3 py-1 ml-1"),O.disabled=N=t[0]===38,s(l,"class","flex items-center space-x-2"),s(d,"class","flex flex-col sm:flex-row gap-4 sm:gap-8"),s(B,"class","w-1/12 text-center mx-4"),s(Q,"class","w-2/12"),s(V,"class","w-2/12 text-center"),s(_e,"class","w-1/12 text-center"),s(z,"class","w-1/12 text-center"),s(Z,"class","w-1/12 text-center"),s(he,"class","w-1/12 text-center"),s(A,"class","w-1/12 text-center"),s(De,"class","w-1/12 text-center"),s(ve,"class","w-1/12 text-center"),s(ce,"class","w-1/12 text-center"),s(we,"class","w-1/12 text-center"),s(ee,"class","w-1/12 text-center"),s(de,"class","w-1/12 text-center"),s(fe,"class","w-1/12 text-center"),s(w,"class","w-1/2 flex"),s(Fe,"class","w-1/12 text-center"),s(P,"class","flex justify-between p-2 border border-gray-700 py-4 bg-light-gray"),s(C,"class","overflow-x-auto flex-1"),s(te,"class","flex flex-col space-y-4 mt-4 text-lg"),s(a,"class","mx-5 my-4")},m(p,$){Nt(p,a,$),e(a,d),e(d,l),e(l,h),e(h,x),e(l,D),e(l,L);for(let y=0;y<F.length;y+=1)F[y]&&F[y].m(L,null);bs(L,t[0],!0),e(l,U),e(l,O),e(O,q),e(a,G),e(a,te),e(te,C),e(C,P),e(P,B),e(B,E),e(P,K),e(P,Q),e(Q,j),e(P,ie),e(P,V),e(V,J),e(P,Y),e(P,w),e(w,_e),e(_e,Ue),e(w,W),e(w,z),e(z,Ge),e(w,b),e(w,Z),e(Z,Ee),e(w,ge),e(w,he),e(he,je),e(w,tt),e(w,A),e(A,se),e(w,Ie),e(w,De),e(De,st),e(w,ae),e(w,ve),e(ve,Je),e(w,Ye),e(w,ce),e(ce,ke),e(w,Pe),e(w,we),e(we,ze),e(w,at),e(w,ee),e(ee,Re),e(w,We),e(w,de),e(de,lt),e(w,X),e(w,fe),e(fe,Ae),e(P,qe),e(P,Fe),e(Fe,le),e(C,Se);for(let y=0;y<S.length;y+=1)S[y]&&S[y].m(C,null);be=!0,Xe||(Ve=[Tt(h,"click",t[12]),Tt(L,"change",t[13]),Tt(O,"click",t[14])],Xe=!0)},p(p,[$]){if((!be||$&65&&I!==(I=p[0]===1))&&(h.disabled=I),$&64){me=p[6];let y;for(y=0;y<me.length;y+=1){const R=Ss(p,me,y);F[y]?F[y].p(R,$):(F[y]=Vs(R),F[y].c(),F[y].m(L,null))}for(;y<F.length;y+=1)F[y].d(1);F.length=me.length}if($&65&&bs(L,p[0]),(!be||$&65&&N!==(N=p[0]===38))&&(O.disabled=N),$&800){pe=p[5];let y;for(y=0;y<pe.length;y+=1){const R=Ps(p,pe,y);S[y]?(S[y].p(R,$),xe(S[y],1)):(S[y]=$s(R),S[y].c(),xe(S[y],1),S[y].m(C,null))}for(zt(),y=pe.length;y<S.length;y+=1)ut(y);Wt()}},i(p){if(!be){for(let $=0;$<pe.length;$+=1)xe(S[$]);be=!0}},o(p){S=S.filter(Boolean);for(let $=0;$<S.length;$+=1)Ke(S[$]);be=!1},d(p){p&&r(a),ys(F,p),ys(S,p),Xe=!1,Ms(Ve)}}}function Ws(t,a,d){let l,h=Ct,x=()=>(h(),h=Kt(C,b=>d(18,l=b)),C),I,D=Ct,L=()=>(D(),D=Kt(P,b=>d(19,I=b)),P),U,O=Ct,q=()=>(O(),O=Kt(J,b=>d(10,U=b)),J),N,G=Ct,te=()=>(G(),G=Kt(B,b=>d(11,N=b)),B);t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>D()),t.$$.on_destroy.push(()=>O()),t.$$.on_destroy.push(()=>G());let{teams:C=Yt([])}=a;x();let{players:P=Yt([])}=a;L();let{systemState:B=Yt(null)}=a;te();let E,K,Q,j=[],ie=Array.from({length:38},(b,Z)=>Z+1),{selectedGameweek:V}=a,{fantasyTeam:J}=a;q(),Ls(async()=>{try{await Xt.sync(),await Qt.sync(),await as.sync(),E=Xt.subscribe(b=>{B.set(b)}),K=Qt.subscribe(b=>{C.set(b)}),Q=as.subscribe(b=>{P.set(b)})}catch(b){ls.show("Error fetching manager gameweek detail.","error"),console.error("Error fetching manager gameweek detail:",b)}});async function Y(){try{d(5,j=await as.getGameweekPlayers(U,V))}catch(b){ls.show("Error updating gameweek players.","error"),console.error("Error updating gameweek players:",b)}}Os(()=>{K?.(),Q?.(),E?.()});const w=b=>{d(0,V=Math.max(1,Math.min(38,V+b)))};function _e(b){return I.find(Z=>Z.id===b)??null}function Ue(b){return l.find(Z=>Z.id===b)??null}const W=()=>w(-1);function z(){V=js(this),d(0,V),d(11,N),d(6,ie)}const Ge=()=>w(1);return t.$$set=b=>{"teams"in b&&x(d(1,C=b.teams)),"players"in b&&L(d(2,P=b.players)),"systemState"in b&&te(d(3,B=b.systemState)),"selectedGameweek"in b&&d(0,V=b.selectedGameweek),"fantasyTeam"in b&&q(d(4,J=b.fantasyTeam))},t.$$.update=()=>{t.$$.dirty&2049&&N&&d(0,V=N?.activeGameweek??V),t.$$.dirty&1024&&U&&Y()},[V,C,P,B,J,j,ie,w,_e,Ue,U,N,W,z,Ge]}class Xs extends As{constructor(a){super(),Fs(this,a,Ws,zs,Hs,{teams:1,players:2,systemState:3,selectedGameweek:0,fantasyTeam:4})}}function Cs(t){let a,d,l="0",h;return{c(){a=n("span"),d=v("Total Points: "),h=v(l),this.h()},l(x){a=o(x,"SPAN",{class:!0});var I=i(a);d=m(I,"Total Points: "),h=m(I,l),I.forEach(r),this.h()},h(){s(a,"class","text-2xl")},m(x,I){Nt(x,a,I),e(a,d),e(a,h)},d(x){x&&r(a)}}}function Ts(t){let a,d;return a=new Xs({props:{selectedGameweek:t[5],fantasyTeam:t[6]}}),{c(){bt(a.$$.fragment)},l(l){$t(a.$$.fragment,l)},m(l,h){yt(a,l,h),d=!0},p(l,h){const x={};h&32&&(x.selectedGameweek=l[5]),a.$set(x)},i(l){d||(xe(a.$$.fragment,l),d=!0)},o(l){Ke(a.$$.fragment,l),d=!1},d(l){xt(a,l)}}}function Ns(t){let a,d;return a=new Ys({props:{viewGameweekDetail:t[8],principalId:t[1].principalId}}),{c(){bt(a.$$.fragment)},l(l){$t(a.$$.fragment,l)},m(l,h){yt(a,l,h),d=!0},p(l,h){const x={};h&2&&(x.principalId=l[1].principalId),a.$set(x)},i(l){d||(xe(a.$$.fragment,l),d=!0)},o(l){Ke(a.$$.fragment,l),d=!1},d(l){xt(a,l)}}}function Qs(t){let a,d,l,h,x,I,D,L,U,O,q,N,G,te,C,P=t[1].displayName+"",B,E,K,Q,j,ie,V,J,Y,w,_e,Ue,W,z,Ge,b=(t[2]?.abbreviatedName??"-")+"",Z,Ee,ge,he=(t[2]?.name??"Not Set")+"",je,tt,A,se,Ie,De,st,ae,ve=t[1].weeklyPositionText+"",Je,Ye,ce,ke,Pe=t[1].weeklyPoints.toLocaleString()+"",we,ze,at,ee,Re,We,de,lt,X,fe,Ae=(t[2]?.friendlyName??"Not Entered")+"",qe,Fe,le,Se=t[1].monthlyPositionText+"",be,Xe,Ve,me,F=t[1].monthlyPoints.toLocaleString()+"",pe,S,ut,p,$,y,R,ot,re,$e,rt,Qe,g,Ce=t[1].seasonPositionText+"",it,_,c,He,ye=t[1].seasonPoints.toLocaleString()+"",Ze,T,vt,et,mt,_t,Me,Le,Oe,Be,ht,Te,Et,nt,It,Gt,Zt,wt,es,ct,At,ue,ts,rs;z=new Bs({props:{className:"w-7 mr-2",primaryColour:t[2]?.primaryColourHex??"#2CE3A6",secondaryColour:t[2]?.secondaryColourHex??"#FFFFFF",thirdColour:t[2]?.thirdColourHex??"#000000"}});let Ne=t[0]==="details"&&Cs(),ne=t[0]==="details"&&Ts(t),oe=t[0]==="gameweeks"&&Ns(t);return{c(){a=n("div"),d=n("div"),l=n("div"),h=n("div"),x=n("img"),L=f(),U=n("div"),O=f(),q=n("div"),N=n("p"),G=v("Manager"),te=f(),C=n("p"),B=v(P),E=f(),K=n("p"),Q=v("Joined: "),j=v(t[3]),ie=f(),V=n("div"),J=f(),Y=n("div"),w=n("p"),_e=v("Favourite Team"),Ue=f(),W=n("p"),bt(z.$$.fragment),Ge=f(),Z=v(b),Ee=f(),ge=n("p"),je=v(he),tt=f(),A=n("div"),se=n("div"),Ie=n("p"),De=v("Leaderboards"),st=f(),ae=n("p"),Je=v(ve),Ye=f(),ce=n("span"),ke=v("("),we=v(Pe),ze=v(")"),at=f(),ee=n("p"),Re=v("Weekly"),We=f(),de=n("div"),lt=f(),X=n("div"),fe=n("p"),qe=v(Ae),Fe=f(),le=n("p"),be=v(Se),Xe=f(),Ve=n("span"),me=v("("),pe=v(F),S=v(")"),ut=f(),p=n("p"),$=v("Club"),y=f(),R=n("div"),ot=f(),re=n("div"),$e=n("p"),rt=v(Gs),Qe=f(),g=n("p"),it=v(Ce),_=f(),c=n("span"),He=v("("),Ze=v(ye),T=v(")"),vt=f(),et=n("p"),mt=v("Season"),_t=f(),Me=n("div"),Le=n("div"),Oe=n("div"),Be=n("button"),ht=v("Details"),Et=f(),nt=n("button"),It=v("Gameweeks"),Zt=f(),wt=n("div"),Ne&&Ne.c(),es=f(),ct=n("div"),ne&&ne.c(),At=f(),oe&&oe.c(),this.h()},l(k){a=o(k,"DIV",{class:!0});var H=i(a);d=o(H,"DIV",{class:!0});var pt=i(d);l=o(pt,"DIV",{class:!0});var dt=i(l);h=o(dt,"DIV",{class:!0});var ns=i(h);x=o(ns,"IMG",{class:!0,src:!0,alt:!0}),ns.forEach(r),L=u(dt),U=o(dt,"DIV",{class:!0,style:!0}),i(U).forEach(r),O=u(dt),q=o(dt,"DIV",{class:!0});var Dt=i(q);N=o(Dt,"P",{class:!0});var os=i(N);G=m(os,"Manager"),os.forEach(r),te=u(Dt),C=o(Dt,"P",{class:!0});var is=i(C);B=m(is,P),is.forEach(r),E=u(Dt),K=o(Dt,"P",{class:!0});var ss=i(K);Q=m(ss,"Joined: "),j=m(ss,t[3]),ss.forEach(r),Dt.forEach(r),ie=u(dt),V=o(dt,"DIV",{class:!0,style:!0}),i(V).forEach(r),J=u(dt),Y=o(dt,"DIV",{class:!0});var kt=i(Y);w=o(kt,"P",{class:!0});var cs=i(w);_e=m(cs,"Favourite Team"),cs.forEach(r),Ue=u(kt),W=o(kt,"P",{class:!0});var Ft=i(W);$t(z.$$.fragment,Ft),Ge=u(Ft),Z=m(Ft,b),Ft.forEach(r),Ee=u(kt),ge=o(kt,"P",{class:!0});var ds=i(ge);je=m(ds,he),ds.forEach(r),kt.forEach(r),dt.forEach(r),tt=u(pt),A=o(pt,"DIV",{class:!0});var ft=i(A);se=o(ft,"DIV",{class:!0});var Pt=i(se);Ie=o(Pt,"P",{class:!0});var fs=i(Ie);De=m(fs,"Leaderboards"),fs.forEach(r),st=u(Pt),ae=o(Pt,"P",{class:!0});var Ht=i(ae);Je=m(Ht,ve),Ye=u(Ht),ce=o(Ht,"SPAN",{class:!0});var Mt=i(ce);ke=m(Mt,"("),we=m(Mt,Pe),ze=m(Mt,")"),Mt.forEach(r),Ht.forEach(r),at=u(Pt),ee=o(Pt,"P",{class:!0});var us=i(ee);Re=m(us,"Weekly"),us.forEach(r),Pt.forEach(r),We=u(ft),de=o(ft,"DIV",{class:!0,style:!0}),i(de).forEach(r),lt=u(ft),X=o(ft,"DIV",{class:!0});var St=i(X);fe=o(St,"P",{class:!0});var vs=i(fe);qe=m(vs,Ae),vs.forEach(r),Fe=u(St),le=o(St,"P",{class:!0});var Lt=i(le);be=m(Lt,Se),Xe=u(Lt),Ve=o(Lt,"SPAN",{class:!0});var Ot=i(Ve);me=m(Ot,"("),pe=m(Ot,F),S=m(Ot,")"),Ot.forEach(r),Lt.forEach(r),ut=u(St),p=o(St,"P",{class:!0});var ms=i(p);$=m(ms,"Club"),ms.forEach(r),St.forEach(r),y=u(ft),R=o(ft,"DIV",{class:!0,style:!0}),i(R).forEach(r),ot=u(ft),re=o(ft,"DIV",{class:!0});var Vt=i(re);$e=o(Vt,"P",{class:!0});var _s=i($e);rt=m(_s,Gs),_s.forEach(r),Qe=u(Vt),g=o(Vt,"P",{class:!0});var Bt=i(g);it=m(Bt,Ce),_=u(Bt),c=o(Bt,"SPAN",{class:!0});var Ut=i(c);He=m(Ut,"("),Ze=m(Ut,ye),T=m(Ut,")"),Ut.forEach(r),Bt.forEach(r),vt=u(Vt),et=o(Vt,"P",{class:!0});var hs=i(et);mt=m(hs,"Season"),hs.forEach(r),Vt.forEach(r),ft.forEach(r),pt.forEach(r),_t=u(H),Me=o(H,"DIV",{class:!0});var jt=i(Me);Le=o(jt,"DIV",{class:!0});var Jt=i(Le);Oe=o(Jt,"DIV",{class:!0});var Rt=i(Oe);Be=o(Rt,"BUTTON",{class:!0});var ps=i(Be);ht=m(ps,"Details"),ps.forEach(r),Et=u(Rt),nt=o(Rt,"BUTTON",{class:!0});var gs=i(nt);It=m(gs,"Gameweeks"),gs.forEach(r),Rt.forEach(r),Zt=u(Jt),wt=o(Jt,"DIV",{class:!0});var ws=i(wt);Ne&&Ne.l(ws),ws.forEach(r),Jt.forEach(r),es=u(jt),ct=o(jt,"DIV",{class:!0});var qt=i(ct);ne&&ne.l(qt),At=u(qt),oe&&oe.l(qt),qt.forEach(r),jt.forEach(r),H.forEach(r),this.h()},h(){s(x,"class","w-20"),Es(x.src,I=t[4])||s(x,"src",I),s(x,"alt",D=t[1].displayName),s(h,"class","flex"),s(U,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(U,"min-width","2px"),gt(U,"min-height","50px"),s(N,"class","text-gray-300 text-xs"),s(C,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),s(K,"class","text-gray-300 text-xs"),s(q,"class","flex-grow"),s(V,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(V,"min-width","2px"),gt(V,"min-height","50px"),s(w,"class","text-gray-300 text-xs"),s(W,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold flex items-center"),s(ge,"class","text-gray-300 text-xs"),s(Y,"class","flex-grow"),s(l,"class","flex justify-start items-center text-white space-x-4 flex-grow m-4 bg-panel p-4 rounded-md"),s(Ie,"class","text-gray-300 text-xs"),s(ce,"class","text-xs"),s(ae,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),s(ee,"class","text-gray-300 text-xs"),s(se,"class","flex-grow"),s(de,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(de,"min-width","2px"),gt(de,"min-height","50px"),s(fe,"class","text-gray-300 text-xs"),s(Ve,"class","text-xs"),s(le,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),s(p,"class","text-gray-300 text-xs"),s(X,"class","flex-grow"),s(R,"class","flex-shrink-0 w-px bg-gray-400 self-stretch"),gt(R,"min-width","2px"),gt(R,"min-height","50px"),s($e,"class","text-gray-300 text-xs"),s(c,"class","text-xs"),s(g,"class","text-2xl sm:text-3xl md:text-4xl mt-2 mb-2 font-bold"),s(et,"class","text-gray-300 text-xs"),s(re,"class","flex-grow"),s(A,"class","flex justify-start items-center text-white space-x-4 flex-grow m-4 bg-panel p-4 rounded-md"),s(d,"class","flex flex-col md:flex-row"),s(Be,"class",Te=`btn ${t[0]==="details"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-l-md font-bold text-md min-w-[125px]`),s(nt,"class",Gt=`btn ${t[0]==="gameweeks"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-r-md font-bold text-md min-w-[125px]`),s(Oe,"class","flex"),s(wt,"class","px-4"),s(Le,"class","flex justify-between items-center text-white px-4 pt-4 rounded-md w-full"),s(ct,"class","w-full"),s(Me,"class","flex flex-col bg-panel m-4 rounded-md"),s(a,"class","m-4")},m(k,H){Nt(k,a,H),e(a,d),e(d,l),e(l,h),e(h,x),e(l,L),e(l,U),e(l,O),e(l,q),e(q,N),e(N,G),e(q,te),e(q,C),e(C,B),e(q,E),e(q,K),e(K,Q),e(K,j),e(l,ie),e(l,V),e(l,J),e(l,Y),e(Y,w),e(w,_e),e(Y,Ue),e(Y,W),yt(z,W,null),e(W,Ge),e(W,Z),e(Y,Ee),e(Y,ge),e(ge,je),e(d,tt),e(d,A),e(A,se),e(se,Ie),e(Ie,De),e(se,st),e(se,ae),e(ae,Je),e(ae,Ye),e(ae,ce),e(ce,ke),e(ce,we),e(ce,ze),e(se,at),e(se,ee),e(ee,Re),e(A,We),e(A,de),e(A,lt),e(A,X),e(X,fe),e(fe,qe),e(X,Fe),e(X,le),e(le,be),e(le,Xe),e(le,Ve),e(Ve,me),e(Ve,pe),e(Ve,S),e(X,ut),e(X,p),e(p,$),e(A,y),e(A,R),e(A,ot),e(A,re),e(re,$e),e($e,rt),e(re,Qe),e(re,g),e(g,it),e(g,_),e(g,c),e(c,He),e(c,Ze),e(c,T),e(re,vt),e(re,et),e(et,mt),e(a,_t),e(a,Me),e(Me,Le),e(Le,Oe),e(Oe,Be),e(Be,ht),e(Oe,Et),e(Oe,nt),e(nt,It),e(Le,Zt),e(Le,wt),Ne&&Ne.m(wt,null),e(Me,es),e(Me,ct),ne&&ne.m(ct,null),e(ct,At),oe&&oe.m(ct,null),ue=!0,ts||(rs=[Tt(Be,"click",t[11]),Tt(nt,"click",t[12])],ts=!0)},p(k,H){(!ue||H&16&&!Es(x.src,I=k[4]))&&s(x,"src",I),(!ue||H&2&&D!==(D=k[1].displayName))&&s(x,"alt",D),(!ue||H&2)&&P!==(P=k[1].displayName+"")&&M(B,P),(!ue||H&8)&&M(j,k[3]);const pt={};H&4&&(pt.primaryColour=k[2]?.primaryColourHex??"#2CE3A6"),H&4&&(pt.secondaryColour=k[2]?.secondaryColourHex??"#FFFFFF"),H&4&&(pt.thirdColour=k[2]?.thirdColourHex??"#000000"),z.$set(pt),(!ue||H&4)&&b!==(b=(k[2]?.abbreviatedName??"-")+"")&&M(Z,b),(!ue||H&4)&&he!==(he=(k[2]?.name??"Not Set")+"")&&M(je,he),(!ue||H&2)&&ve!==(ve=k[1].weeklyPositionText+"")&&M(Je,ve),(!ue||H&2)&&Pe!==(Pe=k[1].weeklyPoints.toLocaleString()+"")&&M(we,Pe),(!ue||H&4)&&Ae!==(Ae=(k[2]?.friendlyName??"Not Entered")+"")&&M(qe,Ae),(!ue||H&2)&&Se!==(Se=k[1].monthlyPositionText+"")&&M(be,Se),(!ue||H&2)&&F!==(F=k[1].monthlyPoints.toLocaleString()+"")&&M(pe,F),(!ue||H&2)&&Ce!==(Ce=k[1].seasonPositionText+"")&&M(it,Ce),(!ue||H&2)&&ye!==(ye=k[1].seasonPoints.toLocaleString()+"")&&M(Ze,ye),(!ue||H&1&&Te!==(Te=`btn ${k[0]==="details"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-l-md font-bold text-md min-w-[125px]`))&&s(Be,"class",Te),(!ue||H&1&&Gt!==(Gt=`btn ${k[0]==="gameweeks"?"fpl-button":"inactive-btn"} px-4 py-2 rounded-r-md font-bold text-md min-w-[125px]`))&&s(nt,"class",Gt),k[0]==="details"?Ne||(Ne=Cs(),Ne.c(),Ne.m(wt,null)):Ne&&(Ne.d(1),Ne=null),k[0]==="details"?ne?(ne.p(k,H),H&1&&xe(ne,1)):(ne=Ts(k),ne.c(),xe(ne,1),ne.m(ct,At)):ne&&(zt(),Ke(ne,1,1,()=>{ne=null}),Wt()),k[0]==="gameweeks"?oe?(oe.p(k,H),H&1&&xe(oe,1)):(oe=Ns(k),oe.c(),xe(oe,1),oe.m(ct,null)):oe&&(zt(),Ke(oe,1,1,()=>{oe=null}),Wt())},i(k){ue||(xe(z.$$.fragment,k),xe(ne),xe(oe),ue=!0)},o(k){Ke(z.$$.fragment,k),Ke(ne),Ke(oe),ue=!1},d(k){k&&r(a),xt(z),Ne&&Ne.d(),ne&&ne.d(),oe&&oe.d(),ts=!1,Ms(rs)}}}function Zs(t){let a,d;return a=new Ks({props:{$$slots:{default:[Qs]},$$scope:{ctx:t}}}),{c(){bt(a.$$.fragment)},l(l){$t(a.$$.fragment,l)},m(l,h){yt(a,l,h),d=!0},p(l,[h]){const x={};h&262207&&(x.$$scope={dirty:h,ctx:l}),a.$set(x)},i(l){d||(xe(a.$$.fragment,l),d=!0)},o(l){Ke(a.$$.fragment,l),d=!1},d(l){xt(a,l)}}}let Gs="";function ea(t,a,d){let l,h,x,I;Js(t,Rs,j=>d(10,I=j));let D="details",L,U=Yt(null),O,q,N,G,te=null,C="",P;Ls(async()=>{ks.set(!0);try{await Xt.sync(),await Qt.sync(),q=Xt.subscribe(w=>{O=w}),N=Qt.subscribe(w=>{L=w}),d(1,G=await qs.getManager(l??"",O?.activeSeason.id??1,h&&h>0?h:O?.activeGameweek??1));const j=new Blob([new Uint8Array(G.profilePicture)]),ie=G.profilePicture.length>0?URL.createObjectURL(j):"profile_placeholder.png";d(4,P=ie);const V=Number(G.createDate/1000000n),J=new Date(V);d(3,C=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][J.getUTCMonth()]} ${J.getUTCFullYear()}`),d(2,te=G.favouriteTeamId>0?L.find(w=>w.id==G.favouriteTeamId)??null:null)}catch(j){ls.show("Error fetching manager details.","error"),console.error("Error fetching manager details:",j)}finally{ks.set(!1)}}),Os(()=>{N?.(),q?.()});function B(j){d(0,D=j)}function E(j,ie){let V=G.gameweeks.find(J=>J.gameweek===ie);U.set(V),B("details")}const K=()=>B("details"),Q=()=>B("gameweeks");return t.$$.update=()=>{t.$$.dirty&1024&&(l=I.url.searchParams.get("id")),t.$$.dirty&1024&&d(9,h=Number(I.url.searchParams.get("gw"))??0),t.$$.dirty&512&&d(5,x=h)},[D,G,te,C,P,x,U,B,E,h,I,K,Q]}class da extends As{constructor(a){super(),Fs(this,a,ea,Zs,Hs,{})}}export{da as component};
