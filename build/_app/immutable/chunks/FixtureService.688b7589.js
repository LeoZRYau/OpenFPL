var _=Object.defineProperty;var t=(n,a,e)=>a in n?_(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e;var m=(n,a,e)=>(t(n,typeof a!="symbol"?a+"":a,e),e);import{a as S}from"./Layout.9d799e1b.js";import{A as r,i as c}from"./LoadingIcon.c6bc274d.js";import{r as I}from"./BadgeIcon.1a82ba04.js";class d{constructor(){m(this,"actor");this.actor=r.createActor(c,"bkyz2-fmaaa-aaaaa-qaaaq-cai")}async actorFromIdentity(){const a=await new Promise((e,o)=>{const i=S.subscribe(s=>{s.identity&&(i(),e(s.identity))})});return r.createActor(c,"bkyz2-fmaaa-aaaaa-qaaaq-cai",a)}async updateFixturesData(){let a="fixtures",o=(await this.actor.getDataHashes()).find(s=>s.category==a)??null;const i=localStorage.getItem(a);if(o?.hash!=i){let s=await this.actor.getFixtures();localStorage.setItem("fixtures_data",JSON.stringify(s,I)),localStorage.setItem(a,o?.hash??"")}}async getFixtures(){const a=localStorage.getItem("fixtures_data");let e;try{e=JSON.parse(a||"[]")}catch{e=[]}return e}async getNextFixture(){try{const a=await this.getFixtures(),e=new Date;return a.find(i=>new Date(Number(i.kickOff)/1e6)>e)}catch(a){throw console.error("Error fetching next fixture:",a),a}}async fetchValidatableFixtures(){try{return await(await this.actorFromIdentity()).getValidatableFixtures()}catch(a){throw console.error("Error fetching total managers:",a),a}}}export{d as F};
